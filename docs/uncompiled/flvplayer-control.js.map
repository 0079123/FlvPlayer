{"version":3,"file":"flvplayer-control.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../src/control/icons/index.js","../../src/control/template.js","../../src/control/hotkey.js","../../node_modules/screenfull/dist/screenfull.js","../../src/control/property.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../src/utils/index.js","../../src/control/events.js","../../src/control/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import play from './play.svg';\nimport pause from './pause.svg';\nimport volume from './volume.svg';\nimport volumeClose from './volume-close.svg';\nimport fullscreen from './fullscreen.svg';\nimport loading from './loading.svg';\n\nconst iconsMap = {\n    play,\n    pause,\n    volume,\n    volumeClose,\n    fullscreen,\n    loading,\n};\n\nexport default Object.keys(iconsMap).reduce((icons, key) => {\n    icons[key] = `<i class=\"flvplayer-icon flvplayer-icon-${key}\">${iconsMap[key]}</i>`;\n    return icons;\n}, {});\n","import icons from './icons';\n\nexport default function template(flv, control) {\n    const { options } = flv;\n\n    flv.player.$player.classList.add('flvplayer-controls-show');\n    if (options.live) {\n        flv.player.$player.classList.add('flvplayer-live');\n    }\n\n    flv.player.$player.insertAdjacentHTML('beforeend', `\n        ${options.poster ? `<div class=\"flvplayer-poster\" style=\"background-image: url(${options.poster})\"></div>` : ''}\n            <div class=\"flvplayer-loading\">${icons.loading}</div>\n            <div class=\"flvplayer-controls flv-player-controls-show ${options.live ? 'flv-player-live' : ''}\">\n                ${!options.live ? `\n                    <div class=\"flvplayer-controls-progress\">\n                        <div class=\"flvplayer-loaded\"></div>\n                        <div class=\"flvplayer-played\">\n                            <div class=\"flvplayer-indicator\"></div>\n                        </div>\n                    </div>\n                ` : ''}\n                <div class=\"flvplayer-controls-bottom\">\n                    <div class=\"flvplayer-controls-left\">\n                        <div class=\"flvplayer-controls-item flvplayer-state\">\n                            <div class=\"flvplayer-play\">${icons.play}</div>\n                            <div class=\"flvplayer-pause\">${icons.pause}</div>\n                        </div>\n                        ${options.hasAudio ? `\n                            <div class=\"flvplayer-controls-item flvplayer-volume\">\n                                <div class=\"flvplayer-volume-on\">${icons.volume}</div>\n                                <div class=\"flvplayer-volume-off\">${icons.volumeClose}</div>\n                                <div class=\"flvplayer-volume-panel\">\n                                    <div class=\"flvplayer-volume-panel-handle\"></div>\n                                </div>\n                            </div>\n                        ` : ''}\n                        ${!options.live ? `\n                            <div class=\"flvplayer-controls-item flvplayer-time\">\n                                <span class=\"flvplayer-current\">00:00</span> / <span class=\"flvplayer-duration\">00:00</span>\n                            </div>\n                        ` : ''}\n                    </div>\n                    <div class=\"flvplayer-controls-right\">\n                        <div class=\"flvplayer-controls-item flvplayer-fullscreen\">${icons.fullscreen}</div>\n                    </div>\n                </div>\n            </div>\n        `);\n\n    Object.defineProperty(control, '$poster', {\n        value: options.container.querySelector('.flvplayer-poster'),\n    });\n\n    Object.defineProperty(control, '$loading', {\n        value: options.container.querySelector('.flvplayer-loading'),\n    });\n\n    Object.defineProperty(control, '$controls', {\n        value: options.container.querySelector('.flvplayer-controls'),\n    });\n\n    Object.defineProperty(control, '$state', {\n        value: options.container.querySelector('.flvplayer-state'),\n    });\n\n    Object.defineProperty(control, '$play', {\n        value: options.container.querySelector('.flvplayer-play'),\n    });\n\n    Object.defineProperty(control, '$pause', {\n        value: options.container.querySelector('.flvplayer-pause'),\n    });\n\n    Object.defineProperty(control, '$current', {\n        value: options.container.querySelector('.flvplayer-current'),\n    });\n\n    Object.defineProperty(control, '$duration', {\n        value: options.container.querySelector('.flvplayer-duration'),\n    });\n\n    Object.defineProperty(control, '$volumeOn', {\n        value: options.container.querySelector('.flvplayer-volume-on'),\n    });\n\n    Object.defineProperty(control, '$volumeOff', {\n        value: options.container.querySelector('.flvplayer-volume-off'),\n    });\n\n    Object.defineProperty(control, '$volumePanel', {\n        value: options.container.querySelector('.flvplayer-volume-panel'),\n    });\n\n    Object.defineProperty(control, '$volumeHandle', {\n        value: options.container.querySelector('.flvplayer-volume-panel-handle'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: options.container.querySelector('.flvplayer-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$progress', {\n        value: options.container.querySelector('.flvplayer-controls-progress'),\n    });\n\n    Object.defineProperty(control, '$loaded', {\n        value: options.container.querySelector('.flvplayer-loaded'),\n    });\n\n    Object.defineProperty(control, '$played', {\n        value: options.container.querySelector('.flvplayer-played'),\n    });\n\n    Object.defineProperty(control, '$indicator', {\n        value: options.container.querySelector('.flvplayer-indicator'),\n    });\n}\n","export default function hotkey(flv, control) {\n    const {\n        events: { proxy },\n        player,\n    } = flv;\n\n    const keys = {};\n\n    function addHotkey(key, event) {\n        if (keys[key]) {\n            keys[key].push(event);\n        } else {\n            keys[key] = [event];\n        }\n    }\n\n    addHotkey(27, () => {\n        if (control.fullscreen) {\n            player.fullscreen = false;\n        }\n    });\n\n    addHotkey(32, () => {\n        player.toggle();\n    });\n\n    addHotkey(37, () => {\n        player.currentTime -= 10;\n    });\n\n    addHotkey(38, () => {\n        player.volume += 1;\n    });\n\n    addHotkey(39, () => {\n        player.currentTime += 10;\n    });\n\n    addHotkey(40, () => {\n        player.volume -= 1;\n    });\n\n    proxy(window, 'keydown', event => {\n        if (player.isFocus) {\n            const tag = document.activeElement.tagName.toUpperCase();\n            const editable = document.activeElement.getAttribute('contenteditable');\n            if (tag !== 'INPUT' && tag !== 'TEXTAREA' && editable !== '' && editable !== 'true') {\n                const events = keys[event.keyCode];\n                if (events) {\n                    event.preventDefault();\n                    events.forEach(fn => fn());\n                }\n            }\n        }\n    });\n}\n","/*!\n* screenfull\n* v4.2.1 - 2019-07-27\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telem = elem || document.documentElement;\n\n\t\t\t\tvar promise;\n\n\t\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t\t// Browser sniffing, since the alternative with\n\t\t\t\t// setTimeout is even worse.\n\t\t\t\tif (/ Version\\/5\\.1(?:\\.\\d+)? Safari\\//.test(navigator.userAgent)) {\n\t\t\t\t\tpromise = elem[request]();\n\t\t\t\t} else {\n\t\t\t\t\tpromise = elem[request](keyboardAllowed ? Element.ALLOW_KEYBOARD_INPUT : {});\n\t\t\t\t}\n\n\t\t\t\tPromise.resolve(promise).catch(reject);\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tdocument[fn.exitFullscreen]();\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(elem);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t\t// TODO: remove this in the next major version\n\t\tmodule.exports.default = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import screenfull from 'screenfull';\n\nexport default function property(flv, control) {\n    const {\n        player,\n    } = flv;\n\n    Object.defineProperty(control, 'controls', {\n        get: () => {\n            return player.$player.classList.contains('flvplayer-controls-show');\n        },\n        set: type => {\n            if (type) {\n                player.$player.classList.add('flvplayer-controls-show');\n            } else {\n                player.$player.classList.remove('flvplayer-controls-show');\n            }\n        },\n    });\n\n    Object.defineProperty(control, 'loading', {\n        get: () => {\n            return player.$player.classList.contains('flvplayer-loading-show');\n        },\n        set: type => {\n            if (type) {\n                player.$player.classList.add('flvplayer-loading-show');\n            } else {\n                player.$player.classList.remove('flvplayer-loading-show');\n            }\n        },\n    });\n\n    try {\n        const screenfullChange = () => {\n            if (control.fullscreen) {\n                player.$container.classList.add('flvplayer-fullscreen');\n            } else {\n                player.$container.classList.remove('flvplayer-fullscreen');\n            }\n            player.autoSize();\n        };\n        screenfull.on('change', screenfullChange);\n        flv.events.destroys.push(() => {\n            screenfull.off('change', screenfullChange);\n        });\n    } catch (error) {\n        flv.debug.warn(false, 'Does not seem to support full screen events');\n    }\n\n    Object.defineProperty(control, 'fullscreen', {\n        get: () => screenfull.isFullscreen || player.$container.classList.contains('flvplayer-fullscreen-web'),\n        set: type => {\n            if (type) {\n                try {\n                    screenfull.request(player.$container);\n                } catch (error) {\n                    player.$container.classList.add('flvplayer-fullscreen-web');\n                }\n            } else {\n                try {\n                    screenfull.exit();\n                } catch (error) {\n                    player.$container.classList.remove('flvplayer-fullscreen-web');\n                }\n            }\n        },\n    });\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","export function hasOwnProperty(obj, name) {\n    return Object.prototype.hasOwnProperty.call(obj, name);\n}\n\nexport function readBuffer(buffer) {\n    let index = 0;\n    function read(length) {\n        const tempUint8 = new Uint8Array(length);\n        for (let i = 0; i < length; i += 1) {\n            tempUint8[i] = buffer[index];\n            index += 1;\n        }\n        read.index = index;\n        return tempUint8;\n    }\n    read.index = 0;\n    return read;\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        const merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function createWorker(workerString) {\n    return new Worker(URL.createObjectURL(new Blob([workerString], { type: 'application/javascript' })));\n}\n\nexport function secondToTime(second) {\n    const add0 = num => (num < 10 ? `0${num}` : String(num));\n    const hour = Math.floor(second / 3600);\n    const min = Math.floor((second - hour * 3600) / 60);\n    const sec = Math.floor(second - hour * 3600 - min * 60);\n    return (hour > 0 ? [hour, min, sec] : [min, sec]).map(add0).join(':');\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function debounce(func, wait, context) {\n    let timeout;\n    function fn(...args) {\n        const later = function later() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    }\n\n    fn.clearTimeout = function ct() {\n        clearTimeout(timeout);\n    };\n\n    return fn;\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\nexport function getStyle(element, key, numberType = true) {\n    const value = window.getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function loadScript(url, name) {\n    return new Promise((resolve, reject) => {\n        const $script = document.createElement('script');\n        $script.type = 'text/javascript';\n        $script.onload = () => {\n            if (window[name]) {\n                resolve(window[name]);\n            } else {\n                reject(new Error(`Unable to find global variable '${name}' from '${url}'`));\n            }\n        };\n        $script.onerror = () => {\n            reject(new Error(`Resource loading failed '${url}'`));\n        };\n        $script.src = url;\n        document.head.appendChild($script);\n    });\n}\n\nexport function proxyPropertys(target, ...sources) {\n    sources.forEach(source => {\n        Object.getOwnPropertyNames(source).forEach(key => {\n            if (!hasOwnProperty(target, key)) {\n                Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n            }\n        });\n    });\n}\n","import { secondToTime, throttle, debounce, clamp, getStyle, setStyle } from '../utils';\n\nexport default function controls(flv, control) {\n    const {\n        options: { poster },\n        events: { proxy },\n        player,\n    } = flv;\n\n    if (poster) {\n        flv.on('play', () => {\n            control.$poster.style.display = 'none';\n        });\n\n        flv.on('seeked', () => {\n            control.$poster.style.display = 'none';\n        });\n    }\n\n    flv.on('waiting', () => {\n        control.loading = true;\n    });\n\n    flv.on('ended', () => {\n        control.loading = false;\n    });\n\n    flv.on('timeupdate', () => {\n        control.loading = false;\n    });\n\n    proxy(control.$play, 'click', () => {\n        player.play();\n    });\n\n    proxy(control.$pause, 'click', () => {\n        player.pause();\n    });\n\n    const loadedFn = throttle(timestamp => {\n        const time = clamp(timestamp / player.duration, 0, 1);\n        control.$loaded.style.width = `${time * 100}%`;\n    }, 500);\n\n    flv.on('videoLoaded', timestamp => {\n        if (!flv.options.live) {\n            loadedFn(timestamp);\n        }\n    });\n\n    const timeupdateFn = throttle(currentTime => {\n        control.$played.style.width = `${(currentTime / player.duration) * 100}%`;\n        control.$current.innerText = secondToTime(currentTime);\n    }, 500);\n\n    flv.on('timeupdate', currentTime => {\n        if (!flv.options.live) {\n            timeupdateFn(currentTime);\n        }\n    });\n\n    flv.on('seeked', currentTime => {\n        if (!flv.options.live) {\n            timeupdateFn(currentTime);\n        }\n    });\n\n    flv.on('play', () => {\n        control.$play.style.display = 'none';\n        control.$pause.style.display = 'block';\n    });\n\n    flv.on('ended', () => {\n        control.controls = true;\n        control.$play.style.display = 'block';\n        control.$pause.style.display = 'none';\n    });\n\n    flv.on('pause', () => {\n        control.$play.style.display = 'block';\n        control.$pause.style.display = 'none';\n    });\n\n    flv.on('scripMeta', () => {\n        if (!flv.options.live) {\n            control.$duration.innerText = secondToTime(player.duration);\n        }\n    });\n\n    proxy(control.$fullscreen, 'click', () => {\n        if (control.fullscreen) {\n            control.fullscreen = false;\n        } else {\n            control.fullscreen = true;\n        }\n    });\n\n    const autoHide = debounce(() => {\n        player.$player.classList.add('flvplayer-hide-cursor');\n        control.controls = false;\n    }, 5000);\n\n    proxy(player.$player, 'mousemove', () => {\n        autoHide.clearTimeout();\n        player.$player.classList.remove('flvplayer-hide-cursor');\n        control.controls = true;\n        if (player.playing) {\n            autoHide();\n        }\n    });\n\n    function volumeChangeFromEvent(event) {\n        const { left: panelLeft, width: panelWidth } = control.$volumePanel.getBoundingClientRect();\n        const { width: handleWidth } = control.$volumeHandle.getBoundingClientRect();\n        const percentage =\n            clamp(event.x - panelLeft - handleWidth / 2, 0, panelWidth - handleWidth / 2) / (panelWidth - handleWidth);\n        return percentage * 10;\n    }\n\n    function setVolumeHandle(percentage) {\n        if (percentage === 0) {\n            setStyle(control.$volumeOn, 'display', 'none');\n            setStyle(control.$volumeOff, 'display', 'flex');\n            setStyle(control.$volumeHandle, 'left', '0');\n        } else {\n            const panelWidth = getStyle(control.$volumePanel, 'width') || 60;\n            const handleWidth = getStyle(control.$volumeHandle, 'width');\n            const width = ((panelWidth - handleWidth) * percentage) / 10;\n            setStyle(control.$volumeOn, 'display', 'flex');\n            setStyle(control.$volumeOff, 'display', 'none');\n            setStyle(control.$volumeHandle, 'left', `${width}px`);\n        }\n    }\n\n    if (flv.options.hasAudio) {\n        let lastVolume = 0;\n        let isVolumeDroging = false;\n\n        setVolumeHandle(flv.options.volume);\n        flv.on('volumechange', () => {\n            setVolumeHandle(player.volume);\n        });\n\n        proxy(control.$volumeOn, 'click', () => {\n            control.$volumeOn.style.display = 'none';\n            control.$volumeOff.style.display = 'block';\n            lastVolume = player.volume;\n            player.volume = 0;\n        });\n\n        proxy(control.$volumeOff, 'click', () => {\n            control.$volumeOn.style.display = 'block';\n            control.$volumeOff.style.display = 'none';\n            player.volume = lastVolume || 7;\n        });\n\n        proxy(control.$volumePanel, 'click', event => {\n            player.volume = volumeChangeFromEvent(event);\n        });\n\n        proxy(control.$volumeHandle, 'mousedown', () => {\n            isVolumeDroging = true;\n        });\n\n        proxy(control.$volumeHandle, 'mousemove', event => {\n            if (isVolumeDroging) {\n                player.volume = volumeChangeFromEvent(event);\n            }\n        });\n\n        proxy(document, 'mouseup', () => {\n            if (isVolumeDroging) {\n                isVolumeDroging = false;\n            }\n        });\n    }\n\n    function getPosFromEvent(event) {\n        const { $progress } = control;\n        const { left } = $progress.getBoundingClientRect();\n        const width = clamp(event.x - left, 0, $progress.clientWidth);\n        const second = (width / $progress.clientWidth) * player.duration;\n        const time = secondToTime(second);\n        const percentage = clamp(width / $progress.clientWidth, 0, 1);\n        return { second, time, width, percentage };\n    }\n\n    if (!flv.options.live && !flv.isMobile) {\n        proxy(control.$progress, 'click', event => {\n            if (event.target !== control.$indicator) {\n                const { second, percentage } = getPosFromEvent(event);\n                if (second <= player.loaded) {\n                    control.$played.style.width = `${percentage * 100}%`;\n                    player.currentTime = second;\n                }\n            }\n        });\n\n        let isIndicatorDroging = false;\n        proxy(control.$indicator, 'mousedown', () => {\n            isIndicatorDroging = true;\n        });\n\n        proxy(document, 'mousemove', event => {\n            if (isIndicatorDroging) {\n                const { second, percentage } = getPosFromEvent(event);\n                if (second <= player.loaded) {\n                    control.$played.style.width = `${percentage * 100}%`;\n                    player.currentTime = second;\n                }\n            }\n        });\n\n        proxy(document, 'mouseup', () => {\n            if (isIndicatorDroging) {\n                isIndicatorDroging = false;\n            }\n        });\n    }\n}\n","import './style.scss';\nimport template from './template';\nimport hotkey from './hotkey';\nimport property from './property';\nimport events from './events';\n\nexport default class Control {\n    constructor(flv) {\n        template(flv, this);\n        events(flv, this);\n        property(flv, this);\n        if (!flv.isMobile) {\n            hotkey(flv, this);\n        }\n    }\n}"],"names":["iconsMap","play","pause","volume","volumeClose","fullscreen","loading","Object","keys","reduce","icons","key","template","flv","control","options","player","$player","classList","add","live","insertAdjacentHTML","poster","hasAudio","defineProperty","value","container","querySelector","hotkey","proxy","events","addHotkey","event","push","toggle","currentTime","window","isFocus","tag","document","activeElement","tagName","toUpperCase","editable","getAttribute","keyCode","preventDefault","forEach","fn","property","get","contains","set","type","remove","screenfullChange","$container","autoSize","screenfull","on","destroys","off","error","debug","warn","isFullscreen","request","exit","secondToTime","second","add0","num","String","hour","Math","floor","min","sec","map","join","debounce","func","wait","context","timeout","args","later","apply","clearTimeout","setTimeout","ct","throttle","callback","delay","isThrottled","args2","clamp","a","b","max","setStyle","element","_typeof","item","style","getStyle","numberType","getComputedStyle","getPropertyValue","parseFloat","controls","$poster","display","$play","$pause","loadedFn","timestamp","time","duration","$loaded","width","timeupdateFn","$played","$current","innerText","$duration","$fullscreen","autoHide","playing","volumeChangeFromEvent","$volumePanel","getBoundingClientRect","panelLeft","left","panelWidth","$volumeHandle","handleWidth","percentage","x","setVolumeHandle","$volumeOn","$volumeOff","lastVolume","isVolumeDroging","getPosFromEvent","$progress","clientWidth","isMobile","target","$indicator","loaded","isIndicatorDroging","Control"],"mappings":"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"}