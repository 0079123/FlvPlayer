{"version":3,"file":"flvplayer-control.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../src/control/icons/index.js","../../src/control/template.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../src/utils/index.js","../../src/control/observer.js","../../src/control/hotkey.js","../../node_modules/screenfull/dist/screenfull.js","../../src/control/property.js","../../src/control/events.js","../../src/control/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import play from './play.svg';\nimport pause from './pause.svg';\nimport volume from './volume.svg';\nimport volumeClose from './volume-close.svg';\nimport fullscreen from './fullscreen.svg';\nimport loading from './loading.svg';\n\nconst iconsMap = {\n    play,\n    pause,\n    volume,\n    volumeClose,\n    fullscreen,\n    loading,\n};\n\nexport default Object.keys(iconsMap).reduce((icons, key) => {\n    icons[key] = `<i class=\"flvplayer-icon flvplayer-icon-${key}\">${iconsMap[key]}</i>`;\n    return icons;\n}, {});\n","import icons from './icons';\n\nexport default function template(flv, control) {\n    const { options } = flv;\n\n    flv.player.$player.classList.add('flvplayer-controls-show');\n    if (options.live) {\n        flv.player.$player.classList.add('flvplayer-live');\n    }\n\n    flv.player.$player.insertAdjacentHTML('beforeend', `\n        ${options.poster ? `<div class=\"flvplayer-poster\" style=\"background-image: url(${options.poster})\"></div>` : ''}\n            <div class=\"flvplayer-loading\">${icons.loading}</div>\n            <div class=\"flvplayer-controls flv-player-controls-show ${options.live ? 'flv-player-live' : ''}\">\n                ${!options.live ? `\n                    <div class=\"flvplayer-controls-progress\">\n                        <div class=\"flvplayer-loaded\"></div>\n                        <div class=\"flvplayer-played\">\n                            <div class=\"flvplayer-indicator\"></div>\n                        </div>\n                    </div>\n                ` : ''}\n                <div class=\"flvplayer-controls-bottom\">\n                    <div class=\"flvplayer-controls-left\">\n                        <div class=\"flvplayer-controls-item flvplayer-state\">\n                            <div class=\"flvplayer-play\">${icons.play}</div>\n                            <div class=\"flvplayer-pause\">${icons.pause}</div>\n                        </div>\n                        ${options.hasAudio ? `\n                            <div class=\"flvplayer-controls-item flvplayer-volume\">\n                                <div class=\"flvplayer-volume-on\">${icons.volume}</div>\n                                <div class=\"flvplayer-volume-off\">${icons.volumeClose}</div>\n                                <div class=\"flvplayer-volume-panel\">\n                                    <div class=\"flvplayer-volume-panel-handle\"></div>\n                                </div>\n                            </div>\n                        ` : ''}\n                        ${!options.live ? `\n                            <div class=\"flvplayer-controls-item flvplayer-time\">\n                                <span class=\"flvplayer-current\">00:00</span> / <span class=\"flvplayer-duration\">00:00</span>\n                            </div>\n                        ` : ''}\n                    </div>\n                    <div class=\"flvplayer-controls-right\">\n                        <div class=\"flvplayer-controls-item flvplayer-fullscreen\">${icons.fullscreen}</div>\n                    </div>\n                </div>\n            </div>\n        `);\n\n    Object.defineProperty(control, '$poster', {\n        value: options.container.querySelector('.flvplayer-poster'),\n    });\n\n    Object.defineProperty(control, '$loading', {\n        value: options.container.querySelector('.flvplayer-loading'),\n    });\n\n    Object.defineProperty(control, '$controls', {\n        value: options.container.querySelector('.flvplayer-controls'),\n    });\n\n    Object.defineProperty(control, '$state', {\n        value: options.container.querySelector('.flvplayer-state'),\n    });\n\n    Object.defineProperty(control, '$play', {\n        value: options.container.querySelector('.flvplayer-play'),\n    });\n\n    Object.defineProperty(control, '$pause', {\n        value: options.container.querySelector('.flvplayer-pause'),\n    });\n\n    Object.defineProperty(control, '$current', {\n        value: options.container.querySelector('.flvplayer-current'),\n    });\n\n    Object.defineProperty(control, '$duration', {\n        value: options.container.querySelector('.flvplayer-duration'),\n    });\n\n    Object.defineProperty(control, '$volumeOn', {\n        value: options.container.querySelector('.flvplayer-volume-on'),\n    });\n\n    Object.defineProperty(control, '$volumeOff', {\n        value: options.container.querySelector('.flvplayer-volume-off'),\n    });\n\n    Object.defineProperty(control, '$volumePanel', {\n        value: options.container.querySelector('.flvplayer-volume-panel'),\n    });\n\n    Object.defineProperty(control, '$volumeHandle', {\n        value: options.container.querySelector('.flvplayer-volume-panel-handle'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: options.container.querySelector('.flvplayer-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$progress', {\n        value: options.container.querySelector('.flvplayer-controls-progress'),\n    });\n\n    Object.defineProperty(control, '$loaded', {\n        value: options.container.querySelector('.flvplayer-loaded'),\n    });\n\n    Object.defineProperty(control, '$played', {\n        value: options.container.querySelector('.flvplayer-played'),\n    });\n\n    Object.defineProperty(control, '$indicator', {\n        value: options.container.querySelector('.flvplayer-indicator'),\n    });\n}\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","export function hasOwnProperty(obj, name) {\n    return Object.prototype.hasOwnProperty.call(obj, name);\n}\n\nexport function readBuffer(buffer) {\n    let index = 0;\n    function read(length) {\n        const tempUint8 = new Uint8Array(length);\n        for (let i = 0; i < length; i += 1) {\n            tempUint8[i] = buffer[index];\n            index += 1;\n        }\n        read.index = index;\n        return tempUint8;\n    }\n    read.index = 0;\n    return read;\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        const merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function createWorker(workerString) {\n    return new Worker(URL.createObjectURL(new Blob([workerString], { type: 'application/javascript' })));\n}\n\nexport function secondToTime(second) {\n    const add0 = num => (num < 10 ? `0${num}` : String(num));\n    const hour = Math.floor(second / 3600);\n    const min = Math.floor((second - hour * 3600) / 60);\n    const sec = Math.floor(second - hour * 3600 - min * 60);\n    return (hour > 0 ? [hour, min, sec] : [min, sec]).map(add0).join(':');\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function debounce(func, wait, context) {\n    let timeout;\n    function fn(...args) {\n        const later = function later() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    }\n\n    fn.clearTimeout = function ct() {\n        clearTimeout(timeout);\n    };\n\n    return fn;\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\nexport function getStyle(element, key, numberType = true) {\n    const value = window.getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function loadScript(url, name) {\n    return new Promise((resolve, reject) => {\n        const $script = document.createElement('script');\n        $script.type = 'text/javascript';\n        $script.onload = () => {\n            if (window[name]) {\n                resolve(window[name]);\n            } else {\n                reject(new Error(`Unable to find global variable '${name}' from '${url}'`));\n            }\n        };\n        $script.onerror = () => {\n            reject(new Error(`Resource loading failed '${url}'`));\n        };\n        $script.src = url;\n        document.head.appendChild($script);\n    });\n}\n\nexport function proxyPropertys(target, ...sources) {\n    sources.forEach(source => {\n        Object.getOwnPropertyNames(source).forEach(key => {\n            if (!hasOwnProperty(target, key)) {\n                Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n            }\n        });\n    });\n}\n","import { setStyle } from '../utils';\n\nexport default function observer(flv) {\n    const {\n        events: { proxy },\n        player,\n    } = flv;\n    const object = document.createElement('object');\n    object.setAttribute('aria-hidden', 'true');\n    object.setAttribute('tabindex', -1);\n    object.type = 'text/html';\n    object.data = 'about:blank';\n\n    setStyle(object, {\n        display: 'block',\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        zIndex: '-1',\n    });\n\n    let playerWidth = player.width;\n    let playerHeight = player.height;\n    proxy(object, 'load', () => {\n        proxy(object.contentDocument.defaultView, 'resize', () => {\n            if (player.width !== playerWidth || player.height !== playerHeight) {\n                playerWidth = player.width;\n                playerHeight = player.height;\n                flv.emit('resize');\n            }\n        });\n    });\n\n    player.$container.appendChild(object);\n}\n","export default function hotkey(flv, control) {\n    const {\n        events: { proxy },\n        player,\n    } = flv;\n\n    const keys = {};\n\n    function addHotkey(key, event) {\n        if (keys[key]) {\n            keys[key].push(event);\n        } else {\n            keys[key] = [event];\n        }\n    }\n\n    addHotkey(27, () => {\n        if (control.fullscreen) {\n            player.fullscreen = false;\n        }\n    });\n\n    addHotkey(32, () => {\n        player.toggle();\n    });\n\n    addHotkey(37, () => {\n        player.currentTime -= 10;\n    });\n\n    addHotkey(38, () => {\n        player.volume += 1;\n    });\n\n    addHotkey(39, () => {\n        player.currentTime += 10;\n    });\n\n    addHotkey(40, () => {\n        player.volume -= 1;\n    });\n\n    proxy(window, 'keydown', event => {\n        if (player.isFocus) {\n            const tag = document.activeElement.tagName.toUpperCase();\n            const editable = document.activeElement.getAttribute('contenteditable');\n            if (tag !== 'INPUT' && tag !== 'TEXTAREA' && editable !== '' && editable !== 'true') {\n                const events = keys[event.keyCode];\n                if (events) {\n                    event.preventDefault();\n                    events.forEach(fn => fn());\n                }\n            }\n        }\n    });\n}\n","/*!\n* screenfull\n* v4.2.1 - 2019-07-27\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telem = elem || document.documentElement;\n\n\t\t\t\tvar promise;\n\n\t\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t\t// Browser sniffing, since the alternative with\n\t\t\t\t// setTimeout is even worse.\n\t\t\t\tif (/ Version\\/5\\.1(?:\\.\\d+)? Safari\\//.test(navigator.userAgent)) {\n\t\t\t\t\tpromise = elem[request]();\n\t\t\t\t} else {\n\t\t\t\t\tpromise = elem[request](keyboardAllowed ? Element.ALLOW_KEYBOARD_INPUT : {});\n\t\t\t\t}\n\n\t\t\t\tPromise.resolve(promise).catch(reject);\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tdocument[fn.exitFullscreen]();\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(elem);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t\t// TODO: remove this in the next major version\n\t\tmodule.exports.default = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import screenfull from 'screenfull';\n\nexport default function property(flv, control) {\n    const {\n        player,\n    } = flv;\n\n    Object.defineProperty(control, 'controls', {\n        get: () => {\n            return player.$player.classList.contains('flvplayer-controls-show');\n        },\n        set: type => {\n            if (type) {\n                player.$player.classList.add('flvplayer-controls-show');\n            } else {\n                player.$player.classList.remove('flvplayer-controls-show');\n            }\n        },\n    });\n\n    Object.defineProperty(control, 'loading', {\n        get: () => {\n            return player.$player.classList.contains('flvplayer-loading-show');\n        },\n        set: type => {\n            if (type) {\n                player.$player.classList.add('flvplayer-loading-show');\n            } else {\n                player.$player.classList.remove('flvplayer-loading-show');\n            }\n        },\n    });\n\n    try {\n        const screenfullChange = () => {\n            if (control.fullscreen) {\n                player.$container.classList.add('flvplayer-fullscreen');\n            } else {\n                player.$container.classList.remove('flvplayer-fullscreen');\n            }\n            player.autoSize();\n        };\n        screenfull.on('change', screenfullChange);\n        flv.events.destroys.push(() => {\n            screenfull.off('change', screenfullChange);\n        });\n    } catch (error) {\n        flv.debug.warn(false, 'Does not seem to support full screen events');\n    }\n\n    Object.defineProperty(control, 'fullscreen', {\n        get: () => screenfull.isFullscreen || player.$container.classList.contains('flvplayer-fullscreen-web'),\n        set: type => {\n            if (type) {\n                try {\n                    screenfull.request(player.$container);\n                } catch (error) {\n                    player.$container.classList.add('flvplayer-fullscreen-web');\n                }\n            } else {\n                try {\n                    screenfull.exit();\n                } catch (error) {\n                    player.$container.classList.remove('flvplayer-fullscreen-web');\n                }\n            }\n        },\n    });\n\n    Object.defineProperty(control, 'autoSize', {\n        value: () => {\n            const playerWidth = player.width;\n            const playerHeight = player.height;\n            const playerRatio = playerWidth / playerHeight;\n            const canvasWidth = player.$canvas.width;\n            const canvasHeight = player.$canvas.height;\n            const canvasRatio = canvasWidth / canvasHeight;\n            if (playerRatio > canvasRatio) {\n                const padding = (playerWidth - playerHeight * canvasRatio) / 2;\n                player.$container.style.padding = `0 ${padding}px`;\n            } else {\n                const padding = (playerHeight - playerWidth / canvasRatio) / 2;\n                player.$container.style.padding = `${padding}px 0`;\n            }\n        },\n    });\n}","import { secondToTime, throttle, debounce, clamp, getStyle, setStyle } from '../utils';\n\nexport default function controls(flv, control) {\n    const {\n        options: { poster },\n        events: { proxy },\n        player,\n    } = flv;\n\n    flv.on('resize', () => {\n        control.autoSize();\n    });\n\n    flv.on('scripMeta', () => {\n        control.autoSize();\n    });\n\n    if (poster) {\n        flv.on('play', () => {\n            control.$poster.style.display = 'none';\n        });\n\n        flv.on('seeked', () => {\n            control.$poster.style.display = 'none';\n        });\n    }\n\n    flv.on('waiting', () => {\n        control.loading = true;\n    });\n\n    flv.on('ended', () => {\n        control.loading = false;\n    });\n\n    flv.on('timeupdate', () => {\n        control.loading = false;\n    });\n\n    proxy(control.$play, 'click', () => {\n        player.play();\n    });\n\n    proxy(control.$pause, 'click', () => {\n        player.pause();\n    });\n\n    const loadedFn = throttle(timestamp => {\n        const time = clamp(timestamp / player.duration, 0, 1);\n        control.$loaded.style.width = `${time * 100}%`;\n    }, 500);\n\n    flv.on('videoLoaded', timestamp => {\n        if (!flv.options.live) {\n            loadedFn(timestamp);\n        }\n    });\n\n    const timeupdateFn = throttle(currentTime => {\n        control.$played.style.width = `${(currentTime / player.duration) * 100}%`;\n        control.$current.innerText = secondToTime(currentTime);\n    }, 500);\n\n    flv.on('timeupdate', currentTime => {\n        if (!flv.options.live) {\n            timeupdateFn(currentTime);\n        }\n    });\n\n    flv.on('seeked', currentTime => {\n        if (!flv.options.live) {\n            timeupdateFn(currentTime);\n        }\n    });\n\n    flv.on('play', () => {\n        control.$play.style.display = 'none';\n        control.$pause.style.display = 'block';\n    });\n\n    flv.on('ended', () => {\n        control.controls = true;\n        control.$play.style.display = 'block';\n        control.$pause.style.display = 'none';\n    });\n\n    flv.on('pause', () => {\n        control.$play.style.display = 'block';\n        control.$pause.style.display = 'none';\n    });\n\n    flv.on('scripMeta', () => {\n        if (!flv.options.live) {\n            control.$duration.innerText = secondToTime(player.duration);\n        }\n    });\n\n    proxy(control.$fullscreen, 'click', () => {\n        if (control.fullscreen) {\n            control.fullscreen = false;\n        } else {\n            control.fullscreen = true;\n        }\n    });\n\n    const autoHide = debounce(() => {\n        player.$player.classList.add('flvplayer-hide-cursor');\n        control.controls = false;\n    }, 5000);\n\n    proxy(player.$player, 'mousemove', () => {\n        autoHide.clearTimeout();\n        player.$player.classList.remove('flvplayer-hide-cursor');\n        control.controls = true;\n        if (player.playing) {\n            autoHide();\n        }\n    });\n\n    function volumeChangeFromEvent(event) {\n        const { left: panelLeft, width: panelWidth } = control.$volumePanel.getBoundingClientRect();\n        const { width: handleWidth } = control.$volumeHandle.getBoundingClientRect();\n        const percentage =\n            clamp(event.x - panelLeft - handleWidth / 2, 0, panelWidth - handleWidth / 2) / (panelWidth - handleWidth);\n        return percentage * 10;\n    }\n\n    function setVolumeHandle(percentage) {\n        if (percentage === 0) {\n            setStyle(control.$volumeOn, 'display', 'none');\n            setStyle(control.$volumeOff, 'display', 'flex');\n            setStyle(control.$volumeHandle, 'left', '0');\n        } else {\n            const panelWidth = getStyle(control.$volumePanel, 'width') || 60;\n            const handleWidth = getStyle(control.$volumeHandle, 'width');\n            const width = ((panelWidth - handleWidth) * percentage) / 10;\n            setStyle(control.$volumeOn, 'display', 'flex');\n            setStyle(control.$volumeOff, 'display', 'none');\n            setStyle(control.$volumeHandle, 'left', `${width}px`);\n        }\n    }\n\n    if (flv.options.hasAudio) {\n        let lastVolume = 0;\n        let isVolumeDroging = false;\n\n        setVolumeHandle(flv.options.volume);\n        flv.on('volumechange', () => {\n            setVolumeHandle(player.volume);\n        });\n\n        proxy(control.$volumeOn, 'click', () => {\n            control.$volumeOn.style.display = 'none';\n            control.$volumeOff.style.display = 'block';\n            lastVolume = player.volume;\n            player.volume = 0;\n        });\n\n        proxy(control.$volumeOff, 'click', () => {\n            control.$volumeOn.style.display = 'block';\n            control.$volumeOff.style.display = 'none';\n            player.volume = lastVolume || 7;\n        });\n\n        proxy(control.$volumePanel, 'click', event => {\n            player.volume = volumeChangeFromEvent(event);\n        });\n\n        proxy(control.$volumeHandle, 'mousedown', () => {\n            isVolumeDroging = true;\n        });\n\n        proxy(control.$volumeHandle, 'mousemove', event => {\n            if (isVolumeDroging) {\n                player.volume = volumeChangeFromEvent(event);\n            }\n        });\n\n        proxy(document, 'mouseup', () => {\n            if (isVolumeDroging) {\n                isVolumeDroging = false;\n            }\n        });\n    }\n\n    function getPosFromEvent(event) {\n        const { $progress } = control;\n        const { left } = $progress.getBoundingClientRect();\n        const width = clamp(event.x - left, 0, $progress.clientWidth);\n        const second = (width / $progress.clientWidth) * player.duration;\n        const time = secondToTime(second);\n        const percentage = clamp(width / $progress.clientWidth, 0, 1);\n        return { second, time, width, percentage };\n    }\n\n    if (!flv.options.live) {\n        proxy(control.$progress, 'click', event => {\n            if (event.target !== control.$indicator) {\n                const { second, percentage } = getPosFromEvent(event);\n                if (second <= player.loaded) {\n                    control.$played.style.width = `${percentage * 100}%`;\n                    player.currentTime = second;\n                }\n            }\n        });\n\n        let isIndicatorDroging = false;\n        proxy(control.$indicator, 'mousedown', () => {\n            isIndicatorDroging = true;\n        });\n\n        proxy(document, 'mousemove', event => {\n            if (isIndicatorDroging) {\n                const { second, percentage } = getPosFromEvent(event);\n                if (second <= player.loaded) {\n                    control.$played.style.width = `${percentage * 100}%`;\n                    player.currentTime = second;\n                }\n            }\n        });\n\n        proxy(document, 'mouseup', () => {\n            if (isIndicatorDroging) {\n                isIndicatorDroging = false;\n            }\n        });\n\n        let isCanvasDroging = false;\n        let touchstartX = 0;\n        let touchSecond = 0;\n        proxy(player.$canvas, 'touchstart', event => {\n            isCanvasDroging = true;\n            touchstartX = event.targetTouches[0].clientX;\n        });\n\n        proxy(player.$canvas, 'touchmove', event => {\n            if (isCanvasDroging) {\n                const { $progress } = control;\n                const moveWidth = event.targetTouches[0].clientX - touchstartX;\n                touchSecond = (moveWidth / $progress.clientWidth) * player.duration;\n            }\n        });\n\n        proxy(player.$canvas, 'touchend', () => {\n            if (isCanvasDroging) {\n                isCanvasDroging = false;\n                if (touchSecond <= player.loaded) {\n                    player.currentTime += touchSecond;\n                }\n                touchstartX = 0;\n                touchSecond = 0;\n            }\n        });\n    }\n}\n","import './style.scss';\nimport template from './template';\nimport observer from './observer';\nimport hotkey from './hotkey';\nimport property from './property';\nimport events from './events';\nimport { proxyPropertys } from '../utils';\n\nexport default class Control {\n    constructor(flv) {\n        template(flv, this);\n        observer(flv, this);\n        events(flv, this);\n        property(flv, this);\n        proxyPropertys(flv, this);\n        if (!flv.isMobile) {\n            hotkey(flv, this);\n        }\n    }\n}"],"names":["iconsMap","play","pause","volume","volumeClose","fullscreen","loading","Object","keys","reduce","icons","key","template","flv","control","options","player","$player","classList","add","live","insertAdjacentHTML","poster","hasAudio","defineProperty","value","container","querySelector","hasOwnProperty","obj","name","prototype","call","secondToTime","second","add0","num","String","hour","Math","floor","min","sec","map","join","debounce","func","wait","context","timeout","fn","args","later","apply","clearTimeout","setTimeout","ct","throttle","callback","delay","isThrottled","args2","clamp","a","b","max","setStyle","element","_typeof","forEach","item","style","getStyle","numberType","window","getComputedStyle","getPropertyValue","parseFloat","proxyPropertys","target","sources","source","getOwnPropertyNames","getOwnPropertyDescriptor","observer","proxy","events","object","document","createElement","setAttribute","type","data","display","position","top","left","height","width","overflow","pointerEvents","zIndex","playerWidth","playerHeight","contentDocument","defaultView","emit","$container","appendChild","hotkey","addHotkey","event","push","toggle","currentTime","isFocus","tag","activeElement","tagName","toUpperCase","editable","getAttribute","keyCode","preventDefault","property","get","contains","set","remove","screenfullChange","autoSize","screenfull","on","destroys","off","error","debug","warn","isFullscreen","request","exit","playerRatio","canvasWidth","$canvas","canvasHeight","canvasRatio","padding","controls","$poster","$play","$pause","loadedFn","timestamp","time","duration","$loaded","timeupdateFn","$played","$current","innerText","$duration","$fullscreen","autoHide","playing","volumeChangeFromEvent","$volumePanel","getBoundingClientRect","panelLeft","panelWidth","$volumeHandle","handleWidth","percentage","x","setVolumeHandle","$volumeOn","$volumeOff","lastVolume","isVolumeDroging","getPosFromEvent","$progress","clientWidth","$indicator","loaded","isIndicatorDroging","isCanvasDroging","touchstartX","touchSecond","targetTouches","clientX","moveWidth","Control","isMobile"],"mappings":"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"}