{"version":3,"file":"uncompiled-flvPlayer.js","sources":["../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/tiny-emitter/index.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/isNativeFunction.js","../node_modules/@babel/runtime/helpers/construct.js","../node_modules/@babel/runtime/helpers/wrapNativeSuper.js","../src/utils/index.js","../src/utils/optionValidator.js","../src/debug.js","../src/player/index.js","../src/demuxer.js","../src/decoder/bsparser.js","../src/decoder/renderer.js","../src/decoder/index.js","../src/stream/fetchRequest.js","../src/stream/mozXhrRequest.js","../src/stream/xhrRequest.js","../src/stream/readFile.js","../src/stream/index.js","../src/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","export class FlvPlayerError extends Error {\n    constructor(message, context) {\n        super(message);\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, context || this.constructor);\n        }\n        this.name = 'FlvPlayerError';\n    }\n}\n\nexport function errorHandle(condition, msg) {\n    if (!condition) {\n        throw new FlvPlayerError(msg);\n    }\n    return condition;\n}\n\nexport function readBuffer(buffer) {\n    let index = 0;\n    function read(length) {\n        const tempUint8 = new Uint8Array(length);\n        for (let i = 0; i < length; i += 1) {\n            tempUint8[i] = buffer[index];\n            index += 1;\n        }\n        read.index = index;\n        return tempUint8;\n    }\n    read.index = 0;\n    return read;\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        let merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function readDouble(array) {\n    const view = new DataView(new ArrayBuffer(array.length));\n    array.forEach((b, i) => {\n        view.setUint8(i, b);\n    });\n    return view.getFloat64(0);\n}\n\nexport function readBoolean(array) {\n    return array[0] !== 0;\n}\n\nexport function readString(array) {\n    return String.fromCharCode.call(String, ...array);\n}\n\nexport function string2Buffer(string) {\n    const result = [];\n    for (let i = 0; i < string.length; i += 1) {\n        result.push(Number(string.charCodeAt(i).toString(10)));\n    }\n    return result;\n}\n\nexport function readBufferSum(array, uint = true) {\n    return array.reduce((totle, num, index) => totle + (uint ? num : num - 128) * 256 ** (array.length - index - 1), 0);\n}\n\nexport function hexToBuffer(hexString) {\n    const result = new Uint8Array(hexString.length / 2);\n    const bytes = hexString.split('');\n    for (let i = 0, j = 0, iz = bytes.length; i < iz; i += 2, j += 1) {\n        result[j] = parseInt(bytes[i] + bytes[i + 1], 16);\n    }\n    return result;\n}\n\nexport function decimalToBinary(decimalArr) {\n    return Array.from(decimalArr).map(item => (Array(8).join(0) + item.toString(2)).toUpperCase().slice(-8));\n}\n\nexport function decimalToHex(decimalArr) {\n    return Array.from(decimalArr).map(item => (Array(2).join(0) + item.toString(16)).toUpperCase().slice(-2));\n}\n","import { errorHandle } from './index';\n\nexport default function(flv) {\n    const { container, url } = flv.options;\n\n    errorHandle(container instanceof HTMLDivElement, 'The \\'container\\' option is not a \\'HTMLDivElement\\'');\n\n    errorHandle(\n        flv.constructor.instances.every(item => item.options.container !== container),\n        'Cannot mount multiple instances on the same div element, please destroy the instance first',\n    );\n\n    errorHandle(typeof url === 'string' || url instanceof File, 'The \\'url\\' option is not a string or file');\n}\n","import { FlvPlayerError } from './utils';\n\nexport default class Debug {\n    constructor(flv) {\n        const { debug } = flv.options;\n        this.log = (name, ...args) => {\n            if (debug) {\n                console.log(`FlvPlayer: [${name}]`, ...args);\n            }\n        };\n\n        this.warn = (condition, ...args) => {\n            if (!condition && debug) {\n                console.warn(...args);\n            }\n        };\n\n        this.error = (condition, msg) => {\n            if (!condition) {\n                throw new FlvPlayerError(msg);\n            }\n        };\n    }\n}\n","import './style.scss';\n\nexport default class Player {\n    constructor(flv) {\n        this.flv = flv;\n        const { options } = flv;\n        options.container.classList.add('flv-player-container');\n        this.canvas = document.createElement('canvas');\n        this.canvas.classList.add('flv-player-canvas');\n        this.canvas.width = options.width;\n        this.canvas.height = options.height;\n        this.context = this.canvas.getContext('2d');\n        this.context.fillStyle = '#000';\n        this.context.fillRect(0, 0, options.width, options.height);\n        options.container.appendChild(this.canvas);\n\n        flv.on('scripMeta', ({ amf2 }) => {\n            const { width, height } = amf2.metaData;\n            flv.debug.error(width && height, '[amf2]: Missing length or height');\n            this.canvas.width = width;\n            this.canvas.height = height;\n            this.context = this.canvas.getContext('2d');\n            this.context.fillStyle = '#000';\n            this.context.fillRect(0, 0, width, height);\n        });\n\n        this.videoFrames = [];\n        flv.on('videoFrame', videoFrame => {\n            this.videoFrames.push(videoFrame);\n            this.context.putImageData(videoFrame, 0, 0);\n        });\n    }\n}\n","import { mergeBuffer, readBufferSum, readString, readBuffer, readDouble, readBoolean } from './utils';\n\nconst nalStart = new Uint8Array([0x00, 0x00, 0x00, 0x01]);\nexport default class Demuxer {\n    constructor(flv) {\n        this.flv = flv;\n        const { options, debug } = flv;\n        this.scripMeta = null;\n        this.AVCDecoderConfigurationRecord = null;\n        this.AudioSpecificConfig = null;\n\n        this.uint8 = new Uint8Array(0);\n        this.index = 0;\n        this.header = null;\n        this.loaded = false;\n\n        flv.on('streamStart', () => {\n            debug.log('stream-start', options.url);\n        });\n\n        flv.on('streaming', uint8 => {\n            this.uint8 = mergeBuffer(this.uint8, uint8);\n            this.parse();\n        });\n\n        flv.on('streamEnd', uint8 => {\n            debug.log('stream-end');\n            if (uint8) {\n                this.uint8 = uint8;\n                this.index = 0;\n                this.header = null;\n                this.parse();\n            }\n\n            this.loaded = true;\n            flv.emit('parseDone');\n            debug.log('parse-done');\n        });\n    }\n\n    parse() {\n        const { debug } = this.flv;\n        if (!this.header && this.readable(13)) {\n            const header = Object.create(null);\n            header.signature = readString(this.read(3));\n            header.version = this.read(1)[0];\n            debug.error(header.signature === 'FLV' && header.version === 1, 'FLV header not found');\n            header.flags = this.read(1)[0];\n            header.headersize = readBufferSum(this.read(4));\n            this.header = header;\n            const prevTagSize = readBufferSum(this.read(4));\n            debug.error(prevTagSize === 0, `PrevTagSize0 should be equal to 0, but got ${prevTagSize}`);\n            this.flv.emit('parseHeader', this.header);\n            debug.log('parse-header', this.header);\n        }\n\n        while (this.index < this.uint8.length) {\n            const restIndex = this.index;\n            const tag = Object.create(null);\n\n            if (this.readable(11)) {\n                tag.tagType = this.read(1)[0];\n                tag.dataSize = readBufferSum(this.read(3));\n                const ts2 = this.read(1);\n                const ts1 = this.read(1);\n                const ts0 = this.read(1);\n                const ts3 = this.read(1);\n                tag.timestamp = ts0 | (ts1 << 8) | (ts2 << 16) | (ts3 << 24);\n                tag.streamID = readBufferSum(this.read(3));\n                debug.error(tag.streamID === 0, `streamID should be equal to 0, but got ${tag.streamID}`);\n            } else {\n                this.index = restIndex;\n                break;\n            }\n\n            if (this.readable(tag.dataSize + 4)) {\n                tag.body = this.read(tag.dataSize);\n                const prevTagSize = readBufferSum(this.read(4));\n                debug.error(prevTagSize === tag.dataSize + 11, `Invalid PrevTagSize: ${prevTagSize}`);\n            } else {\n                this.index = restIndex;\n                break;\n            }\n\n            switch (tag.tagType) {\n                case 18:\n                    this.demuxerScripTag(tag);\n                    break;\n                case 9:\n                    this.demuxerVideoTag(tag);\n                    break;\n                case 8:\n                    this.demuxerAudioTag(tag);\n                    break;\n                default:\n                    debug.error(false, `unknown tag type: ${tag.tagType}`);\n                    break;\n            }\n        }\n    }\n\n    readable(length) {\n        return this.uint8.length - this.index >= length;\n    }\n\n    read(length) {\n        const tempUint8 = new Uint8Array(length);\n        for (let i = 0; i < length; i += 1) {\n            tempUint8[i] = this.uint8[this.index];\n            this.index += 1;\n        }\n        return tempUint8;\n    }\n\n    demuxerScripTag(tag) {\n        const { debug } = this.flv;\n        const readScripTag = readBuffer(tag.body);\n        const amf1 = Object.create(null);\n        const amf2 = Object.create(null);\n\n        amf1.type = readScripTag(1)[0];\n        debug.error(amf1.type === 2, `AMF: [amf1] type expect 2, but got ${amf1.type}`);\n        amf1.size = readBufferSum(readScripTag(2));\n        amf1.string = readString(readScripTag(amf1.size));\n\n        amf2.type = readScripTag(1)[0];\n        debug.error(amf2.type === 8, `AMF: [amf2] type expect 8, but got ${amf2.type}`);\n        amf2.size = readBufferSum(readScripTag(4));\n        amf2.metaData = Object.create(null);\n\n        function getValue(type) {\n            let value = null;\n            if (type !== undefined) {\n                switch (type) {\n                    case 0:\n                        value = readDouble(readScripTag(8));\n                        break;\n                    case 1:\n                        value = readBoolean(readScripTag(1));\n                        break;\n                    case 2: {\n                        const valueLength = readBufferSum(readScripTag(2));\n                        value = readString(readScripTag(valueLength));\n                        break;\n                    }\n                    case 3: {\n                        value = Object.create(null);\n                        let lastType = -1;\n                        while (lastType !== 9) {\n                            const nameLength = readBufferSum(readScripTag(2));\n                            const name = readString(readScripTag(nameLength));\n                            const itemType = readScripTag(1)[0];\n                            if (name) {\n                                value[name] = getValue(itemType);\n                            }\n                            lastType = itemType;\n                        }\n                        break;\n                    }\n                    case 5:\n                        value = null;\n                        break;\n                    case 6:\n                        value = undefined;\n                        break;\n                    case 7:\n                        value = `Reference #${readScripTag.index}`;\n                        readScripTag(2);\n                        break;\n                    case 8: {\n                        value = Object.create(null);\n                        let lastType = -1;\n                        while (lastType !== 9) {\n                            const nameLength = readBufferSum(readScripTag(2));\n                            const name = readString(readScripTag(nameLength));\n                            const itemType = readScripTag(1)[0];\n                            if (name) {\n                                value[name] = getValue(itemType);\n                            }\n                            lastType = itemType;\n                        }\n                        break;\n                    }\n                    case 10: {\n                        const valueLength = readBufferSum(readScripTag(4));\n                        value = [];\n                        for (let index = 0; index < valueLength; index += 1) {\n                            const itemType = readScripTag(1)[0];\n                            value.push(getValue(itemType));\n                        }\n                        break;\n                    }\n                    case 11:\n                        value = readDouble(readScripTag(2));\n                        break;\n                    case 12: {\n                        const valueLength = readBufferSum(readScripTag(4));\n                        value = readString(readScripTag(valueLength));\n                        break;\n                    }\n                    default:\n                        debug.error(false, `AMF: Unknown metaData type: ${type}`);\n                        break;\n                }\n            }\n            return value;\n        }\n\n        while (readScripTag.index < tag.body.length) {\n            const nameLength = readBufferSum(readScripTag(2));\n            const name = readString(readScripTag(nameLength));\n            const type = readScripTag(1)[0];\n            if (name) {\n                amf2.metaData[name] = getValue(type);\n            }\n        }\n\n        debug.error(readScripTag.index === tag.body.length, 'AMF: Seems to be incompletely parsed');\n        debug.error(amf2.size === Object.keys(amf2.metaData).length, 'AMF: [amf2] length does not match');\n\n        this.scripMeta = { amf1, amf2 };\n        this.flv.emit('scripMeta', this.scripMeta);\n        debug.log('scrip-meta', this.scripMeta);\n    }\n\n    demuxerVideoTag(tag) {\n        const { debug } = this.flv;\n        debug.error(tag.body.length > 1, 'Invalid video packet');\n        const header = {\n            frameType: (tag.body[0] & 0xf0) >> 4,\n            codecID: tag.body[0] & 0x0f,\n        };\n        debug.error(header.codecID === 7, `[videoTrack] Unsupported codec in video frame: ${header.codecID}`);\n        const packet = tag.body.slice(1, 5);\n        debug.error(packet.length >= 4, '[H264] Invalid AVC packet, missing AVCPacketType or/and CompositionTime');\n        const view = new DataView(packet.buffer);\n        const AVCPacketType = view.getUint8(0);\n        const CompositionTime = ((view.getUint32(0) & 0x00ffffff) << 8) >> 8;\n        const pts = CompositionTime + tag.timestamp;\n        const packetData = tag.body.subarray(5);\n\n        if (AVCPacketType === 0) {\n            debug.warn(!this.AVCDecoderConfigurationRecord, '[h264] Find another one AVCDecoderConfigurationRecord');\n            debug.error(packetData.length >= 7, '[H264] AVCDecoderConfigurationRecord parse length is not enough');\n            const readDcr = readBuffer(packetData);\n            const result = {};\n            result.configurationVersion = readDcr(1)[0];\n            debug.error(\n                result.configurationVersion === 1,\n                `[H264] Invalid configurationVersion: ${result.configurationVersion}`,\n            );\n            result.AVCProfileIndication = readDcr(1)[0];\n            debug.error(\n                result.AVCProfileIndication !== 0,\n                `[H264] Invalid AVCProfileIndication: ${result.AVCProfileIndication}`,\n            );\n            result.profile_compatibility = readDcr(1)[0];\n            result.AVCLevelIndication = readDcr(1)[0];\n            result.lengthSizeMinusOne = (readDcr(1)[0] & 3) + 1;\n            debug.error(\n                result.lengthSizeMinusOne === 4 || result.lengthSizeMinusOne !== 3,\n                `[H264] Invalid lengthSizeMinusOne: ${result.lengthSizeMinusOne}`,\n            );\n            result.numOfSequenceParameterSets = readDcr(1)[0] & 31;\n            debug.error(\n                result.numOfSequenceParameterSets !== 0,\n                `[H264] Invalid numOfSequenceParameterSets: ${result.numOfSequenceParameterSets}`,\n            );\n            debug.warn(\n                result.numOfSequenceParameterSets === 1,\n                `[H264] Strange numOfSequenceParameterSets: ${result.numOfSequenceParameterSets}`,\n            );\n            for (let index = 0; index < result.numOfSequenceParameterSets; index += 1) {\n                result.sequenceParameterSetLength = readBufferSum(readDcr(2));\n                if (result.sequenceParameterSetLength > 0) {\n                    const SPS = readDcr(result.sequenceParameterSetLength);\n                    this.flv.emit('videoData', mergeBuffer(nalStart, SPS));\n                }\n            }\n            result.numOfPictureParameterSets = readDcr(1)[0];\n            debug.error(\n                result.numOfPictureParameterSets !== 0,\n                `[H264] Invalid numOfPictureParameterSets: ${result.numOfPictureParameterSets}`,\n            );\n            debug.warn(\n                result.numOfPictureParameterSets === 1,\n                `[H264] Strange numOfPictureParameterSets: ${result.numOfPictureParameterSets}`,\n            );\n            for (let index = 0; index < result.numOfPictureParameterSets; index += 1) {\n                result.pictureParameterSetLength = readBufferSum(readDcr(2));\n                if (result.pictureParameterSetLength > 0) {\n                    const PPS = readDcr(result.pictureParameterSetLength);\n                    this.flv.emit('videoData', mergeBuffer(nalStart, PPS), pts);\n                }\n            }\n            this.AVCDecoderConfigurationRecord = result;\n            this.flv.emit('AVCDecoderConfigurationRecord', result);\n            debug.log('avc-decoder-configuration-record', result);\n        } else if (AVCPacketType === 1) {\n            const { lengthSizeMinusOne } = this.AVCDecoderConfigurationRecord;\n            const readVideo = readBuffer(packetData);\n            while (readVideo.index < packetData.length) {\n                const length = readBufferSum(readVideo(lengthSizeMinusOne));\n                this.flv.emit('videoData', mergeBuffer(nalStart, readVideo(length)), pts);\n            }\n        } else {\n            debug.error(AVCPacketType === 2, `[H264] Invalid video packet type ${AVCPacketType}`);\n        }\n    }\n\n    demuxerAudioTag(tag) {\n        const { debug } = this.flv;\n        debug.error(tag.body.length > 1, 'Invalid audio packet');\n        const header = {\n            soundFormat: (tag.body[0] & 0xf0) >> 4,\n            soundRate: (tag.body[0] & 0x0c) >> 2,\n            soundSize: (tag.body[0] & 0x02) >> 1,\n            soundType: (tag.body[0] & 0x01) >> 0,\n        };\n        debug.error(header.soundFormat === 10, `[audioTrack] unsupported audio format: ${header.soundFormat}`);\n        const packet = tag.body.subarray(1);\n        const packetType = packet[0];\n        if (packetType === 0) {\n            const packetData = packet.subarray(1);\n            debug.warn(!this.AudioSpecificConfig, '[aac] Find another one AudioSpecificConfig');\n            debug.error(packetData.length >= 2, '[aac] AudioSpecificConfig parse length is not enough');\n            const result = {};\n            result.audioObjectType = (packetData[0] & 0xf8) >> 3;\n            result.samplingFrequencyIndex = ((packetData[0] & 7) << 1) + (((packetData[1] & 0x80) >> 7) & 1);\n            result.channelConfiguration = (packetData[1] & 0x7f) >> 3;\n            this.AudioSpecificConfig = result;\n            this.flv.emit('AudioSpecificConfig', result);\n            debug.log('audio-specific-config', result);\n        } else {\n            const { audioObjectType, samplingFrequencyIndex, channelConfiguration } = this.AudioSpecificConfig;\n            const ADTSLen = tag.dataSize - 2 + 7;\n            const ADTSHeader = new Uint8Array(7);\n            ADTSHeader[0] = 0xff;\n            ADTSHeader[1] = 0xf0;\n            ADTSHeader[1] |= 0 << 3;\n            ADTSHeader[1] |= 0 << 1;\n            ADTSHeader[1] |= 1;\n            ADTSHeader[2] = (audioObjectType - 1) << 6;\n            ADTSHeader[2] |= (samplingFrequencyIndex & 0x0f) << 2;\n            ADTSHeader[2] |= 0 << 1;\n            ADTSHeader[2] |= (channelConfiguration & 0x04) >> 2;\n            ADTSHeader[3] = (channelConfiguration & 0x03) << 6;\n            ADTSHeader[3] |= 0 << 5;\n            ADTSHeader[3] |= 0 << 4;\n            ADTSHeader[3] |= 0 << 3;\n            ADTSHeader[3] |= 0 << 2;\n            ADTSHeader[3] |= (ADTSLen & 0x1800) >> 11;\n            ADTSHeader[4] = (ADTSLen & 0x7f8) >> 3;\n            ADTSHeader[5] = (ADTSLen & 0x7) << 5;\n            ADTSHeader[5] |= 0x1f;\n            ADTSHeader[6] = 0xfc;\n            const ADTSBody = tag.body.subarray(2);\n            const data = mergeBuffer(ADTSHeader, ADTSBody);\n            this.flv.emit('audioData', data, tag.timestamp);\n        }\n    }\n}\n","var g_headers = [];\n\n//exports.create_parser = function(fmt) {\nexport default function create_parser(fmt) {\n  if (fmt == 'ivf') {\n    return new file_parser_ivf();\n  } else if (['264', 'h264', 'avc'].indexOf(fmt) >= 0) {\n    return new file_parser_annexb('H264');\n  } else if (['265', 'h265', 'hevc', 'bin'].indexOf(fmt) >= 0) {\n    return new file_parser_annexb('H265');\n  }\n  return null;\n};\n\nfunction bitstream(buffer) {\n  this.buffer = buffer;\n  this.length = (buffer instanceof Array) ? buffer.length : buffer.byteLength;\n  this.bytepos = 0;\n  this.bits = 0;\n  this.nbits = 0;\n\n  var trailing_zero_bytes = 0;\n  while (0 == this.buffer[this.length - 1 - trailing_zero_bytes]) {\n    trailing_zero_bytes++;\n  }\n\n  var trailing_zero_bits = 0;\n  while ((this.buffer[this.length - 1 - trailing_zero_bytes] &\n          (1 << trailing_zero_bits)) == 0 &&\n         trailing_zero_bits < 8) {\n    trailing_zero_bits++;\n  }\n\n  this.stopbit = 8 * (this.length - trailing_zero_bytes) - trailing_zero_bits;\n\n  this.load = function() {\n    while (this.nbits <= 24 && this.bytepos < this.length) {\n      var onebyte = this.buffer[this.bytepos++];\n      this.bits |= onebyte << (24 - this.nbits);\n      this.nbits += 8;\n    }\n  };\n\n  this.bitpos = function() {\n    return 8 * this.bytepos - this.nbits;\n  };\n\n  this.bitsleft = function() {\n    return this.length * 8 - this.bitpos();\n  };\n\n  this.u = function(n) {\n    var bits = 0;\n    while (n) {\n      bits <<= n;\n      var r = n > 24 ? 24 : n;\n      this.load();\n      bits |= this.bits >>> (32 - r);\n      this.bits <<= r;\n      this.nbits -= r;\n      n -= r;\n    }\n    // To unsigned.\n    return bits >>> 0;\n  };\n\n  this.s = function(n) {\n    var val = this.u(n);\n    var sign = this.u(1);\n    return sign ? -val : val;\n  };\n\n  this.ue = function() {\n    this.load();\n    var bits = this.bits | 1;\n    var leadingzeros = 0;\n    while (!(bits & (1 << 31))) {\n      bits <<= 1;\n      leadingzeros++;\n    }\n    this.bits <<= leadingzeros;\n    this.nbits -= leadingzeros;\n    return this.u(leadingzeros + 1) - 1;\n  };\n\n  this.se = function() {\n    var codenum = this.ue();\n    var codeval = (codenum + 1) >> 1;\n    return (codenum & 1) ? codeval : -codeval;\n  };\n\n  this.uvlc = function() {\n    var leading_zeros = 0;\n    while (!this.u(1)) {\n      ++leading_zeros;\n    }\n    if (leading_zeros >= 32) {\n      return (1 << 32) - 1;\n    }\n    return this.u(leading_zeros) + (1 << leading_zeros) - 1;\n  };\n\n  this.le = function(n) {\n    var val = 0;\n    for (var i = 0; i < n; ++i) {\n      val += bs.u(8) << (i * 8);\n    }\n    return val;\n  };\n\n  this.leb128 = function() {\n    var val = 0;\n    for (var i = 0; i < 8; ++i) {\n      var byte = this.u(8);\n      val |= (byte & 0x7f) << (i * 7);\n      if (!(byte & 0x80)) break;\n    }\n    return val;\n  };\n\n  this.ns = function(n) {\n    var w = cntbits(n);\n    var m = (1 << w) - n;\n    var v = this.u(w - 1);\n    if (v < m) return v;\n    var extra_bit = this.u(1);\n    return (v << 1) - m + extra_bit;\n  };\n\n  this.su = function(n) {\n    var v = this.u(n);\n    var s = 1 << (n - 1)\n    if (v & s)\n      return v - 2 * s;\n    return v;\n  }\n}\n\nfunction int2str(x, base, length, padding, padend) {\n  var str = x.toString(base);\n  var pad = Array(length - str.length + 1).join(padding);\n  return padend ? str + pad : pad + str;\n}\n\nfunction cntbits(x) {\n  var nbits = 1;\n  while (1 << nbits < x) nbits++;\n  return nbits;\n}\n\nfunction more_rbsp_data(bs) {\n  return bs.bitpos() + 1 < bs.stopbit;\n}\n\nfunction bytes2str(bytes) {\n  var str = '';\n  for (var i = 0; i < bytes.length; i++) str += String.fromCharCode(bytes[i]);\n  return str;\n}\n\nfunction bytes2word(buffer, offset) {\n  return (buffer[offset + 1] << 8) | buffer[offset + 0];\n}\n\nfunction bytes2dword(buffer, offset) {\n  return (buffer[offset + 3] << 24) | (buffer[offset + 2] << 16) |\n      (buffer[offset + 1] << 8) | buffer[offset];\n}\n\nfunction in_range(x, array) {\n  return array.indexOf(x) > -1 ? 1 : 0;\n}\n\nfunction clip(num, min, max) {\n  return num <= min ? min : num >= max ? max : num;\n}\n\nfunction store_header(h) {\n  h['@id'] = g_headers.length;\n  g_headers.push(h);\n}\n\nfunction file_parser_base() {\n  this.parser = null;\n  this.buffer = new Uint8Array(1024 * 1024);\n  this.recv = 0;\n  this.addr = 0;\n  this.next_header_idx = 0;\n\n  this.next = function() {\n    if (this.next_header_idx < g_headers.length) {\n      return g_headers[this.next_header_idx++];\n    }\n    return null;\n  };\n\n  this.get = function(id) {\n    return id < g_headers.length ? g_headers[id] : null;\n  };\n}\n\nfunction file_parser_ivf() {\n  file_parser_base.call(this);\n  this.ivf_header_length = null;\n  this.ivf_header = null;\n  this.frame_size = null;\n  this.num_needed_bytes = 8;\n}\n\nfile_parser_ivf.prototype = new file_parser_base();\nfile_parser_ivf.prototype.parse = function(buffer) {\n  if (buffer == null) {\n    return;\n  }\n  var pos = 0;\n  while (pos < buffer.length) {\n    var num_read_bytes = Math.min(this.num_needed_bytes, buffer.length - pos);\n    for (var i = 0; i < num_read_bytes; ++i) {\n      this.buffer[this.recv++] = buffer[pos++];\n    }\n\n    this.num_needed_bytes -= num_read_bytes;\n    if (this.num_needed_bytes) {\n      continue;\n    }\n\n    if (this.ivf_header_length == null) {\n      this.ivf_header_length = (this.buffer[7] << 8) | this.buffer[6];\n      this.num_needed_bytes = this.ivf_header_length - this.recv;\n      continue;\n    }\n\n    if (this.ivf_header == null) {\n      this.ivf_header = this.parse_ivf_header(this.buffer, this.addr);\n      var fourcc = this.ivf_header['fourcc'];\n      if (fourcc == 'VP80') {\n        this.parser = new bitstream_parser_vp8();\n      } else if (fourcc == 'VP90') {\n        this.parser = new bitstream_parser_vp9();\n      } else if (fourcc == 'AV01') {\n        this.parser = new bitstream_parser_av1();\n      } else if (fourcc == 'H264') {\n        this.parser = new file_parser_annexb('H264');\n      } else if (['H265', 'HEVC'].indexOf(fourcc) >= 0) {\n        this.parser = new file_parser_annexb('H265');\n      } else {\n        alert('Unknown FourCC ' + fourcc);\n      }\n\n      store_header(this.ivf_header);\n      this.num_needed_bytes = 12;\n    } else if (this.frame_size == null) {\n      this.frame_size = this.num_needed_bytes = (this.buffer[3] << 24) |\n          (this.buffer[2] << 16) | (this.buffer[1] << 8) | this.buffer[0];\n    } else if (this.parser != null) {\n      this.parser.parse(this.buffer.slice(0, this.recv), this.addr);\n      this.num_needed_bytes = 12;\n      this.frame_size = null;\n    }\n\n    this.addr += this.recv;\n    this.recv = 0;\n  }\n};\n\nfile_parser_ivf.prototype.parse_ivf_header = function(buffer, addr) {\n  var h = {};\n  h['signature'] = bytes2str(buffer.slice(0, 4));\n  h['version'] = bytes2word(buffer, 4);\n  h['length'] = bytes2word(buffer, 6);\n  h['fourcc'] = bytes2str(buffer.slice(8, 12));\n  h['width'] = bytes2word(buffer, 12);\n  h['height'] = bytes2word(buffer, 14);\n  h['frame rate'] = bytes2dword(buffer, 16);\n  h['time scale'] = bytes2dword(buffer, 20);\n  h['num frames'] = bytes2dword(buffer, 24);\n  h['@addr'] = addr;\n  h['@type'] = 'IVF';\n  h['@length'] = h['length'];\n  h['@extra'] = h['fourcc'] + ' ' + h['width'] + 'x' + h['height'];\n  return h;\n};\n\nfunction file_parser_annexb(fourcc) {\n  file_parser_base.call(this);\n  this.code = 0xffffffff;\n  this.first = true;\n  if (fourcc == 'H264') {\n    this.parser = new bitstream_parser_h264();\n  } else if (fourcc == 'H265') {\n    this.parser = new bitstream_parser_h265();\n  }\n}\n\nfile_parser_annexb.prototype = new file_parser_base();\nfile_parser_annexb.prototype.parse = function(buffer, addr) {\n  if (buffer == null) {\n    if (!this.first && this.recv > 0) {\n      this.parser.parse(this.buffer.slice(0, this.recv), this.addr);\n      this.code = 0xffffffff;\n      this.first = true;\n      this.recv = 0;\n    }\n  } else {\n    var pos = 0;\n    if (this.first) {\n      while (pos < buffer.length) {\n        var byte = buffer[pos++];\n        this.addr++;\n        this.code = ((this.code << 8) | byte) & 0x00ffffff;\n        if (this.code == 1) {\n          this.first = false;\n          break;\n        }\n      }\n    }\n\n    var cnt3 = 0;\n    while (pos < buffer.length) {\n      if (this.code == 1 && addr !== undefined) {\n        this.addr = addr + pos;\n      }\n      var byte = buffer[pos++];\n      this.code = ((this.code << 8) | byte) & 0x00ffffff;\n      if (this.code == 3) {\n        cnt3++;\n      } else {\n        this.buffer[this.recv++] = byte;\n        if (this.code == 1) {\n          this.recv -= 3;\n          this.parser.parse(this.buffer.slice(0, this.recv), this.addr);\n          this.addr += this.recv + cnt3;\n          this.recv = 0;\n          cnt3 = 0;\n        }\n      }\n    }\n  }\n};\n\nfunction bitstream_parser_vp8() {\n  this.frame_num = 0;\n};\n\nbitstream_parser_vp8.prototype.parse = function(buffer, addr) {\n  var bs = new bitstream(buffer);\n  var h = {};\n  var byte = bs.u(8);\n  h['frame_type'] = byte & 1;\n  h['version'] = (byte >> 1) & 7;\n  h['show_frame'] = (byte >> 4) & 1;\n  h['partition_length'] = (byte | (bs.u(8) << 8) | (bs.u(8) << 16)) >> 5;\n  if (h['frame_type'] == 0) {\n    h['sync_code'] = '0x' + int2str(bs.u(24), 16, 6, 0, 0);\n    h['width'] = (bs.u(8) | (bs.u(8) << 8)) & 0x3fff;\n    h['height'] = (bs.u(8) | (bs.u(8) << 8)) & 0x3fff;\n  }\n  h['@addr'] = addr;\n  h['@type'] = h['frame_type'] == 0 ? 'I' : 'P';\n  h['@length'] = buffer.length;\n  h['@keyframe'] = 1 - h['frame_type'];\n  h['@frame_num'] = this.frame_num++;\n  store_header(h);\n};\n\nfunction bitstream_parser_vp9() {\n  this.frame_num = 0;\n}\n\nbitstream_parser_vp9.prototype.parse = function(buffer, addr) {\n  var bs = new bitstream(buffer);\n  var h = {};\n  var ref_idx = 0;\n  h['frame_marker'] = bs.u(2);\n  h['profile'] = bs.u(1) + (bs.u(1) << 1);\n  if (h['profile'] == 3) h['reserved_zero'] = bs.u(1);\n  h['show_existing_frames'] = bs.u(1);\n  if (h['show_existing_frames']) h['frame_to_show_map_idx'] = bs.u(3);\n  h['frame_type'] = bs.u(1);\n  h['show_frame'] = bs.u(1);\n  h['error_resilient_mode'] = bs.u(1);\n  if (h['frame_type'] == 0) {\n    h['frame_sync_bytes'] = bs.u(8) + ', ' + bs.u(8) + ', ' + bs.u(8);\n    this.color_config(h, bs);\n    h['frame_width_minus_1'] = bs.u(16);\n    h['frame_height_minus_1'] = bs.u(16);\n    h['render_and_frame_size_different'] = bs.u(1);\n    if (h['render_and_frame_size_different'] == 1) {\n      h['render_width_minus_1'] = bs.u(16);\n      h['render_height_minus_1'] = bs.u(16);\n    }\n  } else {\n    if (h['show_frame'] == 0) h['intra_only'] = bs.u(1);\n    if (h['error_resilient_mode'] == 0) h['reset_frame_context'] = bs.u(2);\n    if (h['intra_only'] || 0) {\n      h['frame_sync_bytes'] = bs.u(8) + ', ' + bs.u(8) + ', ' + bs.u(8);\n      if (h['profile'] > 0) {\n        this.color_config(h, bs);\n        h['refresh_frame_flags'] = bs.u(8);\n        h['frame_width_minus_1'] = bs.u(16);\n        h['frame_height_minus_1'] = bs.u(16);\n        h['render_and_frame_size_different'] = bs.u(1);\n        if (h['render_and_frame_size_different'] == 1) {\n          h['render_width_minus_1'] = bs.u(16);\n          h['render_height_minus_1'] = bs.u(16);\n        }\n      }\n    } else {\n      h['refresh_frame_flags'] = bs.u(8);\n      for (var i = 0; i < 3; i++) {\n        h['ref_frame_idx[' + i + ']'] = bs.u(3);\n        h['ref_frame_sign_bias[' + i + ']'] = bs.u(1);\n      }\n      for (ref_idx = 0; ref_idx < 3; ref_idx++) {\n        h['size_in_refs'] = bs.u(1);\n        if (h['size_in_refs']) break;\n      }\n      if (h['size_in_refs'] == 0) {\n        h['frame_width_minus_1'] = bs.u(16);\n        h['frame_height_minus_1'] = bs.u(16);\n      }\n      h['render_and_frame_size_different'] = bs.u(1);\n      if (h['render_and_frame_size_different'] == 1) {\n        h['render_width_minus_1'] = bs.u(16);\n        h['render_height_minus_1'] = bs.u(16);\n      }\n      h['allow_high_precision_mv'] = bs.u(1);\n      h['is_filter_switchable'] = bs.u(1);\n      if (h['is_filter_switchable'] == 0)\n        h['raw_interpolation_filter'] = bs.u(2);\n    }\n  }\n\n  if (h['error_resilient_mode'] == 0) {\n    h['refresh_frame_context'] = bs.u(1);\n    h['frame_parallel_decoding_mode'] = bs.u(1);\n  }\n  h['frame_context_idx'] = bs.u(2);\n  h['loop_filter_level'] = bs.u(6);\n  h['loop_filter_sharpness'] = bs.u(3);\n  h['loop_filter_delta_enabled'] = bs.u(1);\n  if (h['loop_filter_delta_enabled'] == 1) {\n    h['loop_filter_delta_update'] = bs.u(1);\n    if (h['loop_filter_delta_update'] == 1) {\n      for (var i = 0; i < 4; i++) {\n        h['update_ref_delta[' + i + ']'] = bs.u(1);\n        if (h['update_ref_delta[' + i + ']'] == 1)\n          h['loop_filter_ref_deltas[' + i + ']'] = bs.s(6);\n      }\n      for (var i = 0; i < 2; i++) {\n        h['update_mode_delta[' + i + ']'] = bs.u(1);\n        if (h['update_mode_delta[' + i + ']'] == 1)\n          h['loop_filter_mode_deltas[[' + i + ']'] = bs.s(6);\n      }\n    }\n  }\n  h['base_q_idx'] = bs.u(8);\n  for (var i = 0; i < 3; i++) {\n    h['delta_coded[' + i + ']'] = bs.u(1);\n    if (h['delta_coded[' + i + ']']) h['delta_q[' + i + ']'] = bs.s(4);\n  }\n\n  if ('frame_width_minus_1' in h) {\n    h['#FrameWidth'] = h['frame_width_minus_1'] + 1;\n    h['#FrameHeight'] = h['frame_height_minus_1'] + 1;\n  } else {\n    var ref = this.find_ref(h['ref_frame_idx[' + ref_idx + ']']);\n    h['#FrameWidth'] = ref['#FrameWidth'];\n    h['#FrameHeight'] = ref['#FrameHeight'];\n  }\n  var MiCols = (h['#FrameWidth'] + 7) >> 3;\n  var MiRows = (h['#FrameHeight'] + 7) >> 3;\n  var Sb64Cols = (MiCols + 7) >> 3;\n  var Sb64Rows = (MiRows + 7) >> 3;\n  var minLog2TileCols = 0;\n  while ((64 << minLog2TileCols) < Sb64Cols) minLog2TileCols++;\n  var maxLog2TileCols = 0;\n  while ((Sb64Cols >> (maxLog2TileCols + 1)) >= 4) maxLog2TileCols++;\n  var tile_cols_log2 = minLog2TileCols;\n  for (var i = 0; tile_cols_log2 < maxLog2TileCols; i++) {\n    h['increment_tile_cols_log2[' + i + ']'] = bs.u(1);\n    if (h['increment_tile_cols_log2[' + i + ']'])\n      tile_cols_log2++;\n    else\n      break;\n  }\n  h['tile_rows_log2'] = bs.u(1);\n  if (h['tile_rows_log2']) h['increment_tile_rows_log2'] = bs.u(1);\n\n  h['header_size_in_bytes'] = bs.u(16);\n\n  h['@addr'] = addr;\n  h['@type'] = h['frame_type'] == 0 ? 'I' : 'P';\n  h['@length'] = buffer.length;\n  h['@keyframe'] = 1 - h['frame_type'];\n  h['@extra'] = int2str(h['#FrameWidth'], 10, 4, ' ', 0) + 'x' +\n      int2str(h['#FrameHeight'], 10, 4, ' ', 1) + ' QP ' +\n      int2str(h['base_q_idx'], 10, 3, ' ', 0);\n  h['@extra'] += ' upd ' +\n      ('refresh_frame_flags' in h ? int2str(h['refresh_frame_flags'], 2, 8, '0', 0) : '11111111');\n  if ('ref_frame_idx[0]' in h) {\n    var ref_mask = (1 << h['ref_frame_idx[0]']) | (1 << h['ref_frame_idx[1]']) |\n        (1 << h['ref_frame_idx[2]']);\n    h['@extra'] += ' ref ' + int2str(ref_mask, 2, 8, '0', 0);\n  }\n  h['@frame_num'] = this.frame_num++;\n  store_header(h);\n};\n\nbitstream_parser_vp9.prototype.color_config = function(h, bs) {\n  var color_space = {\n    0: 'CS_UNKNOWN',\n    1: 'CS_BT_601',\n    2: 'CS_BT_709',\n    3: 'CS_SMPTE_170',\n    4: 'CS_SMPTE_240',\n    5: 'CS_BT_2020',\n    6: 'CS_RESERVED',\n    7: 'CS_BT_601'\n  };\n\n  if (h['profile'] >= 2) h['ten_or_twelve_bit'] = bs.u(1);\n  h['color_space'] = color_space[bs.u(3)];\n  if (h['color_space'] != 'CS_RGB') h['color_range'] = bs.u(1);\n  if (h['profile'] == 1 || h['profile'] == 3) {\n    if (h['color_space'] != 'CS_RGB') {\n      h['subsampling_x'] = bs.u(1);\n      h['subsampling_y'] = bs.u(1);\n    }\n    h['reserved_zero'] = bs.u(1);\n  }\n};\n\nbitstream_parser_vp9.prototype.find_ref = function(idx) {\n  for (var i = g_headers.length - 1; i >= 0; i--) {\n    var h = g_headers[i];\n    if (!('refresh_frame_flags' in h) ||\n        (h['refresh_frame_flags'] & (1 << idx))) {\n      return g_headers[i];\n    }\n  }\n  return null;\n};\n\nfunction bitstream_parser_av1() {\n  this.obu_types = [\n    'Reserved',\n    'OBU_SEQUENCE_HEADER',\n    'OBU_TEMPORAL_DELIMITER',\n    'OBU_FRAME_HEADER',\n    'OBU_TILE_GROUP',\n    'OBU_METADATA',\n    'OBU_FRAME',\n    'OBU_REDUNDANT_FRAME_HEADER',\n    'OBU_TILE_LIST',\n    'Reserved',\n    'Reserved',\n    'Reserved',\n    'Reserved',\n    'Reserved',\n    'Reserved',\n    'OBU_PADDING',\n  ];\n\n  this.frame_type =\n      {KEY_FRAME: 0, INTER_FRAME: 1, INTRA_ONLY_FRAME: 2, SWITCH_FRAME: 3};\n\n  this.ref_frame_type = {\n    NONE: -1,\n    INTRA_FRAME: 0,\n    LAST_FRAME: 1,\n    LAST2_FRAME: 2,\n    LAST3_FRAME: 3,\n    GOLDEN_FRAME: 4,\n    BWDREF_FRAME: 5,\n    ALTREF2_FRAME: 6,\n    ALTREF_FRAME: 7\n  };\n\n  this.NUM_REF_FRAMES = 8;\n  this.REFS_PER_FRAME = 7;\n  this.SELECT_SCREEN_CONTENT_TOOLS = 2;\n  this.SELECT_INTEGER_MV = 2;\n  this.PRIMARY_REF_NONE = 7;\n  this.MAX_SEGMENTS = 8;\n  this.IDENTITY = 0;\n  this.TRANSLATION = 1;\n  this.ROTZOOM = 2;\n  this.AFFINE = 3;\n  this.WARPEDMODEL_PREC_BITS = 16;\n\n  this.SeenFrameHeader = 0;\n  this.FeatureEnabled = Array.from(Array(8), () => new Array(8).fill(0));\n  this.FeatureData = Array.from(Array(8), () => new Array(8).fill(0));\n\n  this.frame_num = 0;\n  this.seq_header = null;\n};\nbitstream_parser_av1.prototype.parse = function(buffer, addr) {\n  var bs = new bitstream(buffer);\n  while (bs.bitsleft() >> 3) {\n    var obu_header_bitpos = bs.bitpos();\n    var h = this.parse_obu_header(bs);\n    var payload_bitpos = bs.bitpos();\n    if (h['obu_type'] == 1) {\n      this.sequence_header_obu(bs, h);\n      this.seq_header = h;\n      h['@extra'] = (h['max_frame_width_minus_1'] + 1) + 'x' +\n          (h['max_frame_height_minus_1'] + 1);\n    } else if (h['obu_type'] == 2) {\n      this.SeenFrameHeader = 0;\n    } else if (h['obu_type'] == 6) {\n      this.frame_obu(bs, h);\n      h['@keyframe'] = h['#FrameIsIntra'];\n      h['@frame_num'] = this.frame_num++;\n    }\n\n    h['@addr'] = addr + (obu_header_bitpos >> 3);\n    h['@type'] = this.obu_types[h['obu_type']];\n\n    if ('obu_size' in h) {\n      var payload_bits = bs.bitpos() - payload_bitpos;\n      var trailing_bits = h['obu_size'] * 8 - payload_bits;\n      if (trailing_bits > 0) bs.u(trailing_bits);\n      h['@length'] = h['obu_size'] + ((payload_bitpos - obu_header_bitpos) >> 3);\n    } else {\n      h['@length'] = buffer.length;\n    }\n\n    store_header(h);\n    if (!('obu_size' in h))\n      break;\n  }\n};\n\nbitstream_parser_av1.prototype.find_ref = function(idx) {\n  for (var i = g_headers.length - 1; i >= 0; i--) {\n    var h = g_headers[i];\n    if (!('refresh_frame_flags' in h) ||\n        (h['refresh_frame_flags'] & (1 << idx))) {\n      return g_headers[i];\n    }\n  }\n  return null;\n};\n\nbitstream_parser_av1.prototype.parse_obu_header =\n    function(bs) {\n  var h = {};\n  h['obu_forbidden_bit'] = bs.u(1);\n  h['obu_type'] = bs.u(4);\n  h['obu_extension_flag'] = bs.u(1);\n  h['obu_has_size_field'] = bs.u(1);\n  h['obu_reserved_1bit'] = bs.u(1);\n  if (h['obu_extension_flag']) {\n    h['temporal_id'] = bs.u(3);\n    h['spatial_id'] = bs.u(2);\n    h['extension_header_reserved_3bits'] = bs.u(3);\n  }\n  if (h['obu_has_size_field']) {\n    h['obu_size'] = bs.leb128();\n  }\n  return h;\n};\n\n    bitstream_parser_av1.prototype.sequence_header_obu = function(bs, h) {\n  h['seq_profile'] = bs.u(3);\n  h['still_picture'] = bs.u(1);\n  h['reduced_still_picture_header'] = bs.u(1);\n  if (h['reduced_still_picture_header']) {\n    h['timing_info_present_flag'] = 0;\n    h['decoder_model_info_present_flag'] = 0;\n    h['initial_display_delay_present_flag'] = 0;\n    h['operating_points_cnt_minus_1'] = 0;\n    h['operating_point_idc[0]'] = 0;\n    h['seq_level_idx[0]'] = bs.u(5);\n    h['seq_tier[0]'] = 0;\n    h['decoder_model_present_for_this_op[0]'] = 0;\n    h['initial_display_delay_present_for_this_op[0]'] = 0;\n  } else {\n    h['timing_info_present_flag'] = bs.u(1);\n    if (h['timing_info_present_flag']) {\n      h['num_units_in_display_tick'] = bs.u(32);\n      h['time_scale'] = bs.u(32);\n      h['equal_picture_interval'] = bs.u(1);\n      if (h['equal_picture_interval']) {\n        h['num_ticks_per_picture_minus_1'] = bs.uvlc();\n      }\n      h['decoder_model_info_present_flag'] = bs.u(1);\n      if (h['decoder_model_info_present_flag']) {\n        h['buffer_delay_length_minus_1'] = bs.u(5);\n        h['num_units_in_decoding_tick'] = bs.u(32);\n        h['buffer_removal_time_length_minus_1'] = bs.u(5);\n        h['frame_presentation_time_length_minus_1'] = bs.u(5);\n      }\n    } else {\n      h['decoder_model_info_present_flag'] = 0;\n    }\n    h['initial_display_delay_present_flag'] = bs.u(1);\n    h['operating_points_cnt_minus_1'] = bs.u(5);\n    for (var i = 0; i <= h['operating_points_cnt_minus_1']; i++) {\n      h['operating_point_idc[' + i + ']'] = bs.u(12);\n      h['seq_level_idx[' + i + ']'] = bs.u(5);\n      if (h['seq_level_idx[' + i + ']'] > 7) {\n        h['seq_tier[' + i + ']'] = bs.u(1);\n      } else {\n        h['seq_tier[' + i + ']'] = 0;\n      }\n      if (h['decoder_model_info_present_flag']) {\n        h['decoder_model_present_for_this_op[' + i + ']'] = bs.u(1);\n        if (h['decoder_model_present_for_this_op[' + i + ']']) {\n          var n = h['buffer_delay_length_minus_1'] + 1;\n          h['decoder_buffer_delay[' + i + ']'] = bs.u(n);\n          h['encoder_buffer_delay[' + i + ']'] = bs.u(n);\n          h['low_delay_mode_flag[' + i + ']'] = bs.u(1);\n        }\n      } else {\n        h['decoder_model_present_for_this_op[' + i + ']'] = 0;\n      }\n\n      if (h['initial_display_delay_present_flag']) {\n        h['initial_display_delay_present_for_this_op[' + i + ']'] = bs.u(1);\n        if (h['initial_display_delay_present_for_this_op[' + i + ']']) {\n          h['initial_display_delay_minus_1[' + i + ']'] = bs.u(4);\n        }\n      }\n    }\n  }\n  h['frame_width_bits_minus_1'] = bs.u(4);\n  h['frame_height_bits_minus_1'] = bs.u(4);\n  h['max_frame_width_minus_1'] = bs.u(h['frame_width_bits_minus_1'] + 1);\n  h['max_frame_height_minus_1'] = bs.u(h['frame_height_bits_minus_1'] + 1);\n  if (h['reduced_still_picture_header']) {\n    h['frame_id_numbers_present_flag'] = 0;\n  } else {\n    h['frame_id_numbers_present_flag'] = bs.u(1);\n  }\n  if (h['frame_id_numbers_present_flag']) {\n    h['delta_frame_id_length_minus_2'] = bs.u(4);\n    h['additional_frame_id_length_minus_1'] = bs.u(3);\n  }\n  h['use_128x128_superblock'] = bs.u(1);\n  h['enable_filter_intra'] = bs.u(1);\n  h['enable_intra_edge_filter'] = bs.u(1);\n  if (h['reduced_still_picture_header']) {\n    h['enable_interintra_compound'] = 0;\n    h['enable_masked_compound'] = 0;\n    h['enable_warped_motion'] = 0;\n    h['enable_dual_filter'] = 0;\n    h['enable_order_hint'] = 0;\n    h['enable_jnt_comp'] = 0;\n    h['enable_ref_frame_mvs'] = 0;\n    h['seq_force_screen_content_tools'] = this.SELECT_SCREEN_CONTENT_TOOLS;\n    h['seq_force_integer_mv'] = 1;\n    h['#OrderHintBits'] = 0;\n  } else {\n    h['enable_interintra_compound'] = bs.u(1);\n    h['enable_masked_compound'] = bs.u(1);\n    h['enable_warped_motion'] = bs.u(1);\n    h['enable_dual_filter'] = bs.u(1);\n    h['enable_order_hint'] = bs.u(1);\n    if (h['enable_order_hint']) {\n      h['enable_jnt_comp'] = bs.u(1);\n      h['enable_ref_frame_mvs'] = bs.u(1);\n    }\n    h['seq_choose_screen_content_tools'] = bs.u(1);\n    if (h['seq_choose_screen_content_tools']) {\n      h['seq_force_screen_content_tools'] = this.SELECT_SCREEN_CONTENT_TOOLS;\n    } else {\n      h['seq_force_screen_content_tools'] = bs.u(1);\n    }\n    if (h['seq_force_screen_content_tools'] > 0) {\n      h['seq_choose_integer_mv'] = bs.u(1);\n      if (h['seq_choose_integer_mv']) {\n        h['seq_force_integer_mv'] = 1;\n      } else {\n        h['seq_force_integer_mv'] = bs.u(1);\n      }\n    }\n    if (h['enable_order_hint']) {\n      h['order_hint_bits_minus_1'] = bs.u(3);\n      h['#OrderHintBits'] = h['order_hint_bits_minus_1'] + 1;\n    } else {\n      h['#OrderHintBits'] = 0;\n    }\n  }\n  h['enable_superres'] = bs.u(1);\n  h['enable_cdef'] = bs.u(1);\n  h['enable_restoration'] = bs.u(1);\n\n  this.color_config(bs, h);\n  h['film_grain_params_present'] = bs.u(1);\n  return h;\n};\n\nbitstream_parser_av1.prototype.color_config = function(bs, h) {\n  h['high_bitdepth'] = bs.u(1);\n  if (h['seq_profile'] == 2 && h['high_bitdepth']) {\n    h['twelve_bit'] = bs.u(1);\n  }\n  if (h['seq_profile'] == 1) {\n    h['mono_chrome'] = 0;\n  } else {\n    h['mono_chrome'] = bs.u(1);\n  }\n  h['color_description_present_flag'] = bs.u(1);\n  if (h['color_description_present_flag']) {\n    h['color_primaries'] = bs.u(8);\n    h['transfer_characteristics'] = bs.u(8);\n    h['matrix_coefficients'] = bs.u(8);\n  } else {\n    h['color_primaries'] = 2;\n    h['transfer_characteristics'] = 2;\n    h['matrix_coefficients'] = 2;\n  }\n  if (h['mono_chrome']) {\n    h['color_range'] = bs.u(1);\n    h['subsampling_x'] = 0;\n    h['subsampling_y'] = 0;\n    h['separate_uv_delta_q'] = 0;\n    return;\n  } else if (\n      h['color_primaries'] == 1 && h['transfer_characteristics'] == 13 &&\n      h['matrix_coefficients'] == 0) {\n    h['color_range'] = 1;\n    h['subsampling_x'] = 0;\n    h['subsampling_y'] = 0;\n  } else {\n    h['color_range'] = bs.u(1);\n    if (h['seq_profile'] == 0) {\n      h['subsampling_x'] = 1;\n      h['subsampling_y'] = 1;\n    } else if (h['seq_profile'] == 1) {\n      h['subsampling_x'] = 0;\n      h['subsampling_y'] = 0;\n    } else {\n      if ('twelve_bit' in h && h['twelve_bit']) {\n        h['subsampling_x'] = bs.u(1);\n        if (h['subsampling_x']) h['subsampling_y'] = bs.u(1);\n      } else {\n        h['subsampling_x'] = 1;\n        h['subsampling_y'] = 0;\n      }\n    }\n    if (h['subsampling_x'] && h['subsampling_y']) {\n      h['chroma_sample_position'] = bs.u(2);\n    }\n  }\n  h['separate_uv_delta_q'] = bs.u(1);\n};\n\nbitstream_parser_av1.prototype.frame_header_obu = function(bs, h) {\n  this.uncompressed_header(bs, h);\n};\n\nbitstream_parser_av1.prototype.frame_obu = function(bs, h) {\n  this.frame_header_obu(bs, h);\n};\n\nbitstream_parser_av1.prototype.uncompressed_header = function(bs, h) {\n  var idLen;\n  if (this.seq_header['frame_id_numbers_present_flag']) {\n    idLen =\n        this.seq_header['additional_frame_id_length_minus_1'] +\n         this.seq_header['delta_frame_id_length_minus_2'] + 3;\n  }\n  var allFrames = (1 << this.NUM_REF_FRAMES) - 1;\n  if (this.seq_header['reduced_still_picture_header']) {\n    h['show_existing_frame'] = 0;\n    h['frame_type'] = this.frame_type.KEY_FRAME;\n    h['#FrameIsIntra'] = 1;\n    h['show_frame'] = 1;\n    h['showable_frame'] = 0;\n  } else {\n    h['show_existing_frame'] = bs.u(1);\n    if (h['show_existing_frame'] == 1) {\n      h['frame_to_show_map_idx'] = bs.u(3);\n      if (this.seq_header['decoder_model_info_present_flag'] &&\n          !this.seq_header['equal_picture_interval']) {\n        var n = frame_presentation_time_length_minus_1 + 1;\n        h['frame_presentation_time'] = bs.u(n);\n      }\n      h['refresh_frame_flags'] = 0;\n      if (this.seq_header['frame_id_numbers_present_flag']) {\n        h['display_frame_id'] = bs.u(idLen);\n      }\n      var ref_frame =\n          this.find_ref(h['frame_to_show_map_idx[' + ref_idx + ']']);\n      h['frame_type'] = ref_frame['frame_type'];\n      if (h['frame_type'] == this.frame_type.KEY_FRAME) {\n        h['refresh_frame_flags'] = allFrames;\n      }\n      return;\n    }\n    h['frame_type'] = bs.u(2);\n    h['#FrameIsIntra'] =\n        (h['frame_type'] == this.frame_type.INTRA_ONLY_FRAME ||\n         h['frame_type'] == this.frame_type.KEY_FRAME)\n    h['show_frame'] = bs.u(1);\n    if (h['show_frame'] && this.seq_header['decoder_model_info_present_flag'] &&\n        !equal_picture_interval) {\n      var n = this.seq_header['frame_presentation_time_length_minus_1'] + 1;\n      h['frame_presentation_time'] = bs.u(n);\n    }\n    if (h['show_frame']) {\n      h['showable_frame'] = h['frame_type'] != this.frame_type.KEY_FRAME;\n    } else {\n      h['showable_frame'] = bs.u(1);\n    }\n    if (h['frame_type'] == this.frame_type.SWITCH_FRAME ||\n        (h['frame_type'] == this.frame_type.KEY_FRAME && h['show_frame']))\n      h['error_resilient_mode'] = 1;\n    else\n      h['error_resilient_mode'] = bs.u(1);\n  }\n\n  h['disable_cdf_update'] = bs.u(1);\n  if (this.seq_header['seq_force_screen_content_tools'] ==\n      this.SELECT_SCREEN_CONTENT_TOOLS) {\n    h['allow_screen_content_tools'] = bs.u(1);\n  } else {\n    h['allow_screen_content_tools'] =\n        this.seq_header['seq_force_screen_content_tools'];\n  }\n  if (this.seq_header['allow_screen_content_tools']) {\n    if (this.seq_header['seq_force_integer_mv'] == this.SELECT_INTEGER_MV) {\n      h['force_integer_mv'] = bs.u(1);\n    } else {\n      h['force_integer_mv'] = this.seq_header['seq_force_integer_mv'];\n    }\n  } else {\n    h['force_integer_mv'] = 0;\n  }\n  if (h['#FrameIsIntra']) {\n    h['force_integer_mv'] = 1;\n  }\n  if (this.seq_header['frame_id_numbers_present_flag']) {\n    h['current_frame_id'] = bs.u(idLen);\n  } else {\n    h['current_frame_id'] = 0;\n  }\n  if (h['frame_type'] == this.frame_type.SWITCH_FRAME)\n    h['frame_size_override_flag'] = 1;\n  else if (this.seq_header['reduced_still_picture_header'])\n    h['frame_size_override_flag'] = 0;\n  else\n    h['frame_size_override_flag'] = bs.u(1);\n  h['order_hint'] = bs.u(this.seq_header['#OrderHintBits']);\n  if (h['#FrameIsIntra'] || this.seq_header['error_resilient_mode']) {\n    h['primary_ref_frame'] = this.PRIMARY_REF_NONE;\n  } else {\n    h['primary_ref_frame'] = bs.u(3);\n  }\n  if (this.seq_header['decoder_model_info_present_flag']) {\n    h['buffer_removal_time_present_flag'] = bs.u(1);\n    if (h['buffer_removal_time_present_flag']) {\n      for (var i = 0; i <= this.seq_header['operating_points_cnt_minus_1'];\n           i++) {\n        if (this.seq_header['decoder_model_present_for_this_op[' + i + ']']) {\n          var opPtIdc = this.seq_header['operating_point_idc[' + i + ' ]'];\n          var inTemporalLayer = (opPtIdc >> h['temporal_id']) & 1;\n          var inSpatialLayer = (opPtIdc >> (h['spatial_id'] + 8)) & 1;\n          if (opPtIdc == 0 || (inTemporalLayer && inSpatialLayer)) {\n            var n = this.seq_header['buffer_removal_time_length_minus_1'] + 1;\n            h['buffer_removal_time[' + i + ']'] = bs.u(n);\n          }\n        }\n      }\n    }\n  }\n  h['allow_high_precision_mv'] = 0;\n  h['use_ref_frame_mvs'] = 0;\n  h['allow_intrabc'] = 0;\n  if (h['frame_type'] == this.frame_type.SWITCH_FRAME ||\n      (h['frame_type'] == this.frame_type.KEY_FRAME && h['show_frame'])) {\n    h['refresh_frame_flags'] = allFrames;\n  } else {\n    h['refresh_frame_flags'] = bs.u(8);\n  }\n  if (!h['#FrameIsIntra'] || h['refresh_frame_flags'] != allFrames) {\n    if (this.seq_header['error_resilient_mode'] &&\n        this.seq_header['enable_order_hint']) {\n      for (var i = 0; i < this.NUM_REF_FRAMES; i++) {\n        h['ref_order_hint[' + i + ']'] =\n            bs.u(this.seq_header['#OrderHintBits']);\n      }\n    }\n  }\n\n  if (h['frame_type'] == this.frame_type.KEY_FRAME ||\n      h['frame_type'] == this.frame_type.INTRA_ONLY_FRAME) {\n    this.frame_size(bs, h);\n    this.render_size(bs, h);\n    if (this.seq_header['allow_screen_content_tools'] &&\n        h['#UpscaledWidth'] == h['#FrameWidth']) {\n      h['allow_intrabc'] = bs.u(1);\n    }\n  } else {\n    if (!h['enable_order_hint']) {\n      h['frame_refs_short_signaling'] = 0;\n    } else {\n      h['frame_refs_short_signaling'] = bs.u(1);\n      if (h['frame_refs_short_signaling']) {\n        h['last_frame_idx'] = bs.u(3);\n        h['gold_frame_idx'] = bs.u(3);\n      }\n    }\n    for (i = 0; i < this.REFS_PER_FRAME; i++) {\n      if (!h['frame_refs_short_signaling'])\n        h['ref_frame_idx[' + i + ']'] = bs.u(3);\n      if (this.seq_header['frame_id_numbers_present_flag']) {\n        var n = this.seq_header['delta_frame_id_length_minus_2'] + 2;\n        h['delta_frame_id_minus_1'] = bs.u(n);\n      }\n    }\n\n    if (this.seq_header['frame_size_override_flag'] &&\n        !this.seq_header['error_resilient_mode']) {\n      for (var i = 0; i < this.REFS_PER_FRAME; i++) {\n        h['found_ref[' + i + ']'] = bs.u(1);\n        if (h['found_ref[' + i + ']']) {\n          var find_ref = this.find_ref(h['ref_frame_idx[' + i + ']']);\n          h['#UpscaledWidth'] = find_ref['#UpscaledWidth'];\n          h['#FrameWidth'] = h['#UpscaledWidth'];\n          h['#FrameHeight'] = find_ref['#FrameHeight'];\n          h['#RenderWidth'] = find_ref['#RenderWidth'];\n          h['#RenderHeight'] = find_ref['#RenderHeight'];\n          this.superres_params(bs, h);\n          break;\n        }\n      }\n    }\n    if (!('#FrameWidth' in h)) {\n      this.frame_size(bs, h);\n      this.render_size(bs, h);\n    }\n\n    if (h['force_integer_mv']) {\n      h['allow_high_precision_mv'] = 0;\n    } else {\n      h['allow_high_precision_mv'] = bs.u(1);\n    }\n    h['is_filter_switchable'] = bs.u(1);\n    if (h['is_filter_switchable'] == 1) {\n      h['interpolation_filter'] = 4;\n    } else {\n      h['interpolation_filter'] = bs.u(2);\n    }\n    h['is_motion_mode_switchable'] = bs.u(1);\n    if (this.seq_header['error_resilient_mode'] ||\n        !this.seq_header['enable_ref_frame_mvs']) {\n      h['use_ref_frame_mvs'] = 0;\n    } else {\n      h['use_ref_frame_mvs'] = bs.u(1);\n    }\n  }\n\n  if (this.seq_header['reduced_still_picture_header'] ||\n      h['disable_cdf_update'])\n    h['disable_frame_end_update_cdf'] = 1;\n  else\n    h['disable_frame_end_update_cdf'] = bs.u(1);\n\n  if (h['primary_ref_frame'] == this.PRIMARY_REF_NONE) {\n    this.setup_past_independence(h);\n  } else {\n    this.load_previous(h);\n  }\n\n  this.tile_info(bs, h);\n  this.quantization_params(bs, h);\n  this.segmentation_params(bs, h);\n  this.delta_q_params(bs, h);\n  this.delta_lf_params(bs, h);\n  h['#CodedLossless'] = 1;\n  for (var sid = 0; sid < this.MAX_SEGMENTS; sid++) {\n    h['qindex[' + sid + ']'] = this.get_qindex(h, 1, sid);\n    h['#LosslessArray[' + sid + ']'] = h['qindex[' + sid + ']'] == 0 &&\n        h['#DeltaQYDc'] == 0 && h['#DeltaQUAc'] == 0 && h['#DeltaQUDc'] == 0 &&\n        h['#DeltaQVAc'] == 0 && h['#DeltaQVDc'] == 0\n    if (!h['#LosslessArray[' + sid + ']']) {\n      h['#CodedLossless'] = 0;\n    }\n  }\n  h['#AllLossless'] =\n      h['#CodedLossless'] && (h['#FrameWidth'] == h['#UpscaledWidth']);\n  this.loop_filter_params(bs, h);\n  this.cdef_params(bs, h);\n  this.lr_params(bs, h);\n\n  h['tx_mode_select'] = h['#CodedLossless'] ? 0 : bs.u(1);\n  h['reference_select'] = h['#FrameIsIntra'] ? 0 : bs.u(1);\n\n  this.skip_mode_params(bs, h);\n  if (h['#FrameIsIntra'] || this.seq_header['error_resilient_mode'] ||\n      !this.seq_header['enable_warped_motion'])\n    h['allow_warped_motion'] = 0;\n  else\n    h['allow_warped_motion'] = bs.u(1);\n  h['reduced_tx_set'] = bs.u(1);\n  this.global_motion_params(bs, h);\n  this.film_grain_params(bs, h);\n};\n\nbitstream_parser_av1.prototype.frame_size = function(bs, h) {\n  if (h['frame_size_override_flag']) {\n    var n = frame_width_bits_minus_1 + 1;\n    h['frame_width_minus_1'] = bs.u(n);\n    n = frame_height_bits_minus_1 + 1;\n    h['frame_height_minus_1'] = bs.u(n);\n    h['#FrameWidth'] = h['frame_width_minus_1'] + 1;\n    h['#FrameHeight'] = h['frame_height_minus_1'] + 1;\n  } else {\n    h['#FrameWidth'] = this.seq_header['max_frame_width_minus_1'] + 1;\n    h['#FrameHeight'] = this.seq_header['max_frame_height_minus_1'] + 1;\n  }\n  this.superres_params(bs, h);\n};\n\nbitstream_parser_av1.prototype.superres_params = function(bs, h) {\n  if (this.seq_header['enable_superres'])\n    h['use_superres'] = bs.u(1);\n  else\n    h['use_superres'] = 0;\n  if (h['use_superres']) {\n    h['coded_denom'] = bs.u(3);\n    h['#SuperresDenom'] = h['coded_denom'] + 9;\n  } else {\n    h['#SuperresDenom'] = 8;\n  }\n  h['#UpscaledWidth'] = h['#FrameWidth'];\n  h['#FrameWidth'] = ((h['#UpscaledWidth'] * 8 + (h['#SuperresDenom'] >> 1)) /\n                      h['#SuperresDenom']) >>>\n      0;\n};\n\nbitstream_parser_av1.prototype.render_size = function(bs, h) {\n  h['render_and_frame_size_different'] = bs.u(1);\n  if (h['render_and_frame_size_different'] == 1) {\n    h['render_width_minus_1'] = bs.u(16);\n    h['render_height_minus_1'] = bs.u(16);\n    h['#RenderWidth'] = h['render_width_minus_1'] + 1;\n    h['#RenderHeight'] = h['render_height_minus_1'] + 1;\n  } else {\n    h['#RenderWidth'] = h['#UpscaledWidth'];\n    h['#RenderHeight'] = h['#FrameHeight'];\n  }\n};\n\nbitstream_parser_av1.prototype.get_relative_dist = function(a, b) {\n  if (!this.seq_header['enable_order_hint']) return 0;\n  var diff = a - b;\n  var m = 1 << (this.seq_header['#OrderHintBits'] - 1);\n  diff = (diff & (m - 1)) - (diff & m);\n  return diff;\n};\n\nbitstream_parser_av1.prototype.setup_past_independence = function(h) {\n  for (var ref = this.ref_frame_type.LAST_FRAME;\n       ref <= this.ref_frame_type.ALTREF_FRAME; ++ref) {\n    for (var i = 0; i <= 5; ++i) {\n      h['#PrevGmParams[' + ref + '][' + i + ']'] = (i % 3) == 2 ? 1 << 16 : 8;\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.load_previous = function(h) {\n  var ref_frame =\n      this.find_ref(h['ref_frame_idx[' + h['primary_ref_frame'] + ']']);\n  for (var ref = this.ref_frame_type.LAST_FRAME;\n       ref <= this.ref_frame_type.ALTREF_FRAME; ++ref) {\n    for (var i = 0; i <= 5; ++i) {\n      h['#PrevGmParams[' + ref + '][' + i + ']'] =\n          ref_frame['#gm_params[' + ref + '][' + i + ']'];\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.tile_info = function(bs, h) {\n  var MiCols = 2 * ((h['#FrameWidth'] + 7) >> 3);\n  var MiRows = 2 * ((h['#FrameHeight'] + 7) >> 3);\n  var sbCols = this.seq_header['use_128x128_superblock'] ?\n      ((MiCols + 31) >> 5) :\n      ((MiCols + 15) >> 4);\n  var sbRows = this.seq_header['use_128x128_superblock'] ?\n      ((MiRows + 31) >> 5) :\n      ((MiRows + 15) >> 4);\n  var sbShift = this.seq_header['use_128x128_superblock'] ? 5 : 4\n  var sbSize = sbShift + 2;\n  var maxTileWidthSb = 4096 >> sbSize;\n  var maxTileAreaSb = (4096 * 2304) >> (2 * sbSize);\n  var minLog2TileCols = this.tile_log2(maxTileWidthSb, sbCols);\n  var maxLog2TileCols = this.tile_log2(1, Math.min(sbCols, 64));\n  var maxLog2TileRows = this.tile_log2(1, Math.min(sbRows, 64));\n  var minLog2Tiles =\n      Math.max(minLog2TileCols, this.tile_log2(maxTileAreaSb, sbRows * sbCols))\n\n  h['uniform_tile_spacing_flag'] = bs.u(1);\n  if (h['uniform_tile_spacing_flag']) {\n    h['tile_cols_log2'] = minLog2TileCols;\n    while (h['tile_cols_log2'] < maxLog2TileCols) {\n      if (!bs.u(1)) break;\n      h['tile_cols_log2']++;\n    }\n\n    h['tile_rows_log2'] = Math.max(minLog2Tiles - h['tile_cols_log2'], 0);\n    while (h['tile_rows_log2'] < maxLog2TileRows) {\n      if (!bs.u(1)) break;\n      h['tile_rows_log2']++;\n    }\n  } else {\n    var widestTileSb = 0;\n    var startSb = 0;\n    var i;\n    for (i = 0; startSb < sbCols; i++) {\n      var maxWidth = Math.min(sbCols - startSb, maxTileWidthSb);\n      h['width_in_sbs_minus_1'] = bs.ns(maxWidth);\n      var sizeSb = h['width_in_sbs_minus_1'] + 1;\n      widestTileSb = Math.max(sizeSb, widestTileSb);\n      startSb += sizeSb;\n    }\n    h['tile_cols_log2'] = this.tile_log2(1, i);\n\n    var maxTileAreaSb;\n    if (minLog2Tiles > 0)\n      maxTileAreaSb = (sbRows * sbCols) >> (minLog2Tiles + 1);\n    else\n      maxTileAreaSb = sbRows * sbCols;\n    var maxTileHeightSb = Math.max((maxTileAreaSb / widestTileSb) >>> 0, 1);\n\n    var startSb = 0;\n    var i;\n    for (i = 0; startSb < sbRows; i++) {\n      var maxHeight = Math.min(sbRows - startSb, maxTileHeightSb);\n      h['height_in_sbs_minus_1'] = bs.ns(maxHeight);\n      startSb += h['height_in_sbs_minus_1'] + 1;\n    }\n    h['tile_rows_log2'] = this.tile_log2(1, i);\n  }\n  if (h['tile_cols_log2'] > 0 || h['tile_rows_log2'] > 0) {\n    h['context_update_tile_id'] = bs.u(h['tile_rows_log2'] + h['tile_cols_log2']);\n    h['tile_size_bytes_minus_1'] = bs.u(2);\n  } else {\n    h['context_update_tile_id'] = 0;\n  }\n};\n\nbitstream_parser_av1.prototype.tile_log2 = function(blkSize, target) {\n  var k = 0;\n  while ((blkSize << k) < target) k++;\n  return k;\n};\n\nbitstream_parser_av1.prototype.quantization_params = function(bs, h) {\n  h['base_q_idx'] = bs.u(8);\n  h['#DeltaQYDc'] = this.read_delta_q(bs, h);\n  if (!this.seq_header['mono_chrome']) {\n    if (this.seq_header['separate_uv_delta_q'])\n      h['diff_uv_delta'] = bs.u(1);\n    else\n      h['diff_uv_delta'] = 0;\n    h['#DeltaQUDc'] = this.read_delta_q(bs, h);\n    h['#DeltaQUAc'] = this.read_delta_q(bs, h);\n    if (h['diff_uv_delta']) {\n      h['#DeltaQVAc'] = this.read_delta_q(bs, h);\n      h['#DeltaQVDc'] = this.read_delta_q(bs, h);\n    } else {\n      h['#DeltaQVAa'] = h['#DeltaQUDc'];\n      h['#DeltaQVAc'] = h['#DeltaQUAc'];\n    }\n  } else {\n    h['#DeltaQUDc'] = 0;\n    h['#DeltaQUAc'] = 0;\n    h['#DeltaQVDc'] = 0;\n    h['#DeltaQVAc'] = 0;\n  }\n  h['using_qmatrix'] = bs.u(1);\n  if (h['using_qmatrix']) {\n    h['qm_y'] = bs.u(4);\n    h['qm_u'] = bs.u(4);\n    if (!this.seq_header['separate_uv_delta_q'])\n      h['qm_v'] = h['qm_u'];\n    else\n      h['qm_v'] = bs.u(4);\n  }\n};\n\nbitstream_parser_av1.prototype.read_delta_q = function(bs, h) {\n  var delta_q = 0;\n  var delta_coded = bs.u(1);\n  if (delta_coded) delta_q = bs.su(1 + 6);\n  return delta_q;\n};\n\nbitstream_parser_av1.prototype.segmentation_params = function(bs, h) {\n  var Segmentation_Feature_Bits = [8, 6, 6, 6, 6, 3, 0, 0];\n  var Segmentation_Feature_Signed = [1, 1, 1, 1, 1, 0, 0, 0];\n  var Segmentation_Feature_Max = [255, 63, 63, 63, 63, 7, 0, 0];\n\n  h['segmentation_enabled'] = bs.u(1);\n  if (h['segmentation_enabled'] == 1) {\n    if (h['primary_ref_frame'] == this.PRIMARY_REF_NONE) {\n      h['segmentation_update_map'] = 1;\n      h['segmentation_temporal_update'] = 0;\n      h['segmentation_update_data'] = 1;\n    } else {\n      h['segmentation_update_map'] = bs.u(1);\n      if (h['segmentation_update_map'] == 1)\n        h['segmentation_temporal_update'] = bs.u(1);\n      h['segmentation_update_data'] = bs.u(1);\n    }\n    if (h['segmentation_update_data'] == 1) {\n      for (i = 0; i < 8; i++) {\n        for (j = 0; j < 8; j++) {\n          var enabled = h['feature_enabled[' + i + '][' + j + ']'] = bs.u(1);\n          this.FeatureEnabled[i][j] = enabled;\n          if (enabled) {\n            var bitsToRead = Segmentation_Feature_Bits[j];\n            var limit = Segmentation_Feature_Max[j];\n            var clippedValue = 0;\n            if (Segmentation_Feature_Signed[j] == 1) {\n              h['feature_value[' + i + '][' + j + ']'] = bs.su(1 + bitsToRead);\n              clippedValue =\n                  clip(h['feature_value[' + i + '][' + j + ']'], -limit, limit);\n            } else {\n              h['feature_value[' + i + '][' + j + ']'] = bs.u(bitsToRead);\n              clippedValue = clip(\n                  h['feature_value[' + i + '][' + j + ']'], 0,\n                  h['feature_value[' + i + '][' + j + ']']);\n            }\n            this.FeatureData[i][j] = clippedValue;\n          }\n        }\n      }\n    }\n  } else {\n    this.FeatureEnabled.fill(0);\n    this.FeatureData.fill(0);\n  }\n};\n\nbitstream_parser_av1.prototype.delta_q_params = function(bs, h) {\n  h['delta_q_res'] = 0;\n  h['delta_q_present'] = 0;\n  if (h['base_q_idx'] > 0) {\n    h['delta_q_present'] = bs.u(1);\n  }\n  if (h['delta_q_present']) {\n    h['delta_q_res'] = bs.u(2);\n  }\n};\n\nbitstream_parser_av1.prototype.delta_lf_params = function(bs, h) {\n  h['delta_lf_present'] = 0\n  h['delta_lf_res'] = 0\n  h['delta_lf_multi'] = 0\n  if (h['delta_q_present']) {\n    if (!h['allow_intrabc']) {\n      h['delta_lf_present'] = bs.u(1);\n    }\n    if (h['delta_lf_present']) {\n      h['delta_lf_res'] = bs.u(2);\n      h['delta_lf_multi'] = bs.u(1);\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.get_qindex = function(\n    h, ignoreDeltaQ, segmentId) {\n  var qindex = h['base_q_idx'];\n  if (h['segmentation_enabled'] && this.FeatureEnabled[segmentId][0])\n    qindex += this.FeatureData[segmentId][0];\n  return clip(qindex, 0, 255);\n};\n\nbitstream_parser_av1.prototype.loop_filter_params = function(bs, h) {\n  if (h['#CodedLossless'] || h['allow_intrabc']) {\n    return;\n  }\n  h['loop_filter_level[0]'] = bs.u(6);\n  h['loop_filter_level[1]'] = bs.u(6);\n  if (!this.seq_header['mono_chrome']) {\n    if (h['loop_filter_level[0]'] || h['loop_filter_level[1]']) {\n      h['loop_filter_level[2]'] = bs.u(6);\n      h['loop_filter_level[3]'] = bs.u(6);\n    }\n  }\n  h['loop_filter_sharpness'] = bs.u(3);\n  h['loop_filter_delta_enabled'] = bs.u(1);\n  if (h['loop_filter_delta_enabled']) {\n    h['loop_filter_delta_update'] = bs.u(1);\n    if (h['loop_filter_delta_update']) {\n      for (var i = 0; i < 8; i++) {\n        h['update_ref_delta'] = bs.u(1);\n        if (h['update_ref_delta']) {\n          h['loop_filter_ref_deltas[' + i + ']'] = bs.su(1 + 6);\n        }\n      }\n      for (var i = 0; i < 2; i++) {\n        h['update_mode_delta'] = bs.u(1);\n        if (h['update_mode_delta']) {\n          h['loop_filter_mode_deltas[' + i + ']'] = bs.su(1 + 6);\n        }\n      }\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.cdef_params = function(bs, h) {\n  if (h['#CodedLossless'] || h['allow_intrabc'] ||\n      !this.seq_header['enable_cdef']) {\n    return;\n  }\n  h['cdef_damping_minus_3'] = bs.u(2);\n  h['cdef_bits'] = bs.u(2);\n  for (var i = 0; i < (1 << h['cdef_bits']); i++) {\n    h['cdef_y_pri_strength[' + i + ']'] = bs.u(4);\n    h['cdef_y_sec_strength[' + i + ']'] = bs.u(2);\n    if (h['cdef_y_sec_strength[' + i + ']'] == 3) {\n      h['cdef_y_sec_strength[' + i + ']'] += 1;\n    }\n    if (!this.seq_header['mono_chrome']) {\n      h['cdef_uv_pri_strength[' + i + ']'] = bs.u(4);\n      h['cdef_uv_sec_strength[' + i + ']'] = bs.u(2);\n      if (h['cdef_uv_sec_strength[' + i + ']'] == 3) {\n        h['cdef_uv_sec_strength[' + i + ']'] += 1;\n      }\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.lr_params = function(bs, h) {\n  if (h['#AllLossless'] || h['allow_intrabc'] ||\n      !this.seq_header['enable_restoration']) {\n    return;\n  }\n  var UsesLr = 0;\n  var usesChromaLr = 0;\n  var NumPlanes = this.seq_header['mono_chrome'] ? 1 : 3;\n  for (var i = 0; i < NumPlanes; i++) {\n    h['lr_type['+i+']'] = bs.u(2);\n  }\n  if (h['lr_type[0]']) {\n    if (this.seq_header['use_128x128_superblock']) {\n      h['lr_unit_shift'] = bs.u(1);\n    } else {\n      h['lr_unit_shift'] = bs.u(1);\n      if (h['lr_unit_shift']) {\n        h['lr_unit_extra_shift'] = bs.u(1);\n      }\n    }\n    if (this.seq_header['subsampling_x'] && this.seq_header['subsampling_y'] &&\n        usesChromaLr) {\n      h['lr_uv_shift'] = bs.u(1);\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.skip_mode_params = function(bs, h) {\n  var skipModeAllowed;\n  if (h['#FrameIsIntra'] || !h['reference_select'] || !h['enable_order_hint']) {\n    skipModeAllowed = 0;\n  } else {\n    var forwardIdx = -1;\n    var backwardIdx = -1;\n    var forwardHint = -1;\n    var backwardHint = Math.pow(2, 32) - 1;\n    for (var i = 0; i < this.NUM_REF_FRAMES; i++) {\n      var ref_frame = this.find_ref(h['ref_frame_idx[' + i + ']']);\n      var refHint = ref_frame['order_hint'];\n      if (this.get_relative_dist(refHint, h['order_hint']) < 0) {\n        if (forwardIdx < 0 ||\n            this.get_relative_dist(refHint, forwardHint) > 0) {\n          forwardIdx = i;\n          forwardHint = refHint;\n        }\n      } else if (this.get_relative_dist(refHint, h['order_hint']) > 0) {\n        if (backwardIdx < 0 ||\n            this.get_relative_dist(refHint, backwardHint) < 0) {\n          backwardIdx = i;\n          backwardHint = refHint;\n        }\n      }\n    }\n    if (forwardIdx < 0) {\n      skipModeAllowed = 0;\n    } else if (backwardIdx >= 0) {\n      skipModeAllowed = 1;\n    } else {\n      var secondForwardIdx = -1;\n      var secondForwardHint = -1;\n      for (var i = 0; i < this.NUM_REF_FRAMES; i++) {\n        var ref_frame = this.find_ref(h['ref_frame_idx[' + i + ']']);\n        var refHint = ref_frame['order_hint'];\n        if (this.get_relative_dist(refHint, forwardHint) < 0) {\n          if (secondForwardIdx < 0 ||\n              this.get_relative_dist(refHint, secondForwardHint) > 0) {\n            secondForwardIdx = i;\n            secondForwardHint = refHint;\n          }\n        }\n      }\n      if (secondForwardIdx < 0) {\n        skipModeAllowed = 0;\n      } else {\n        skipModeAllowed = 1;\n      }\n    }\n  }\n  if (skipModeAllowed) {\n    h['skip_mode_present'] = bs.u(1);\n  } else {\n    h['skip_mode_present'] = 0;\n  }\n};\n\nbitstream_parser_av1.prototype.global_motion_params = function(bs, h) {\n  for (var ref = this.ref_frame_type.LAST_FRAME;\n       ref <= this.ref_frame_type.ALTREF_FRAME; ref++) {\n    for (i = 0; i < 6; i++) {\n      h['#gm_params[' + ref + '][' + i + ']'] = ((i % 3 == 2) ? 1 << 16 : 0);\n    }\n  }\n  if (h['#FrameIsIntra']) {\n    return;\n  }\n  for (var ref = this.ref_frame_type.LAST_FRAME;\n       ref <= this.ref_frame_type.ALTREF_FRAME; ref++) {\n    h['is_global[' + ref + ']'] = bs.u(1);\n    var type;\n    if (h['is_global[' + ref + ']']) {\n      h['is_rot_zoom[' + ref + ']'] = bs.u(1);\n      if (h['is_rot_zoom[' + ref + ']']) {\n        type = this.ROTZOOM;\n      } else {\n        h['is_translation[' + ref + ']'] = bs.u(1);\n        type =\n            h['is_translation[' + ref + ']'] ? this.TRANSLATION : this.AFFINE;\n      }\n    } else {\n      type = this.IDENTITY;\n    }\n    if (type >= this.ROTZOOM) {\n      this.read_global_param(bs, h, type, ref, 2);\n      this.read_global_param(bs, h, type, ref, 3);\n      if (type == this.AFFINE) {\n        this.read_global_param(bs, h, type, ref, 4);\n        this.read_global_param(bs, h, type, ref, 5);\n      } else {\n        h['#gm_params[' + ref + '][4]'] = -h['#gm_params[' + ref + '][3]'];\n        h['#gm_params[' + ref + '][5]'] = h['#gm_params[' + ref + '][2]'];\n      }\n    }\n    if (type >= this.TRANSLATION) {\n      this.read_global_param(bs, h, type, ref, 0);\n      this.read_global_param(bs, h, type, ref, 1);\n    }\n  }\n};\n\nbitstream_parser_av1.prototype.read_global_param = function(\n    bs, h, type, ref, idx) {\n  const GM_ABS_ALPHA_BITS = 12;\n  const GM_ALPHA_PREC_BITS = 15;\n  const GM_ABS_TRANS_ONLY_BITS = 9;\n  const GM_ABS_TRANS_BITS = 12;\n  const GM_TRANS_PREC_BITS = 6;\n  const GM_TRANS_ONLY_PREC_BITS = 3;\n  var absBits = GM_ABS_ALPHA_BITS;\n  var precBits = GM_ALPHA_PREC_BITS;\n  if (idx < 2) {\n    if (type == this.TRANSLATION) {\n      absBits = GM_ABS_TRANS_ONLY_BITS - !h['allow_high_precision_mv'];\n      precBits = GM_TRANS_ONLY_PREC_BITS - !h['allow_high_precision_mv'];\n    } else {\n      absBits = GM_ABS_TRANS_BITS;\n      precBits = GM_TRANS_PREC_BITS;\n    }\n  }\n  var precDiff = 16 - precBits;\n  var round = (idx % 3) == 2 ? (1 << 16) : 0;\n  var sub = (idx % 3) == 2 ? (1 << precBits) : 0;\n  var mx = (1 << absBits);\n  var r = (h['#PrevGmParams[' + ref + '][' + idx + ']'] >> precDiff) - sub;\n  h['#gm_params[' + ref + '][' + idx + ']'] =\n      (this.decode_signed_subexp_with_ref(bs, h, -mx, mx + 1, r) << precDiff) +\n      round;\n};\n\nbitstream_parser_av1.prototype.decode_signed_subexp_with_ref = function(\n    bs, h, low, high, r) {\n  var x = this.decode_unsigned_subexp_with_ref(bs, h, high - low, r - low);\n  return x + low;\n};\n\nbitstream_parser_av1.prototype.decode_unsigned_subexp_with_ref = function(\n    bs, h, mx, r) {\n  v = this.decode_subexp(bs, h, mx);\n  if ((r << 1) <= mx) {\n    return this.inverse_recenter(r, v);\n  } else {\n    return mx - 1 - this.inverse_recenter(mx - 1 - r, v);\n  }\n};\n\nbitstream_parser_av1.prototype.decode_subexp = function(bs, h, numSyms) {\n  var i = 0;\n  var mk = 0;\n  var k = 3;\n  var n = 0;\n  while (1) {\n    var b2 = i ? k + i - 1 : k;\n    var a = 1 << b2;\n    if (numSyms <= mk + 3 * a) {\n      h['subexp_final_bits[' + n + ']'] = bs.ns(numSyms - mk);\n      return subexp_final_bits + mk;\n    } else {\n      h['subexp_more_bits[' + n + ']'] = bs.u(1);\n      if (h['subexp_more_bits[' + n + ']']) {\n        i++;\n        mk += a;\n      } else {\n        h['subexp_bits[' + n + ']'] = bs.u(b2);\n        return h['subexp_bits[' + n + ']'] + mk;\n      }\n    }\n    ++n;\n  }\n};\n\nbitstream_parser_av1.prototype.inverse_recenter = function(r, v) {\n  if (v > 2 * r)\n    return v;\n  else if (v & 1)\n    return r - ((v + 1) >> 1);\n  else\n    return r + (v >> 1);\n};\n\nbitstream_parser_av1.prototype.film_grain_params = function(bs, h) {\n  if (!this.seq_header['film_grain_params_present'] ||\n      (!h['show_frame'] && !h['showable_frame'])) {\n    return;\n  }\n  h['apply_grain'] = bs.u(1);\n  if (!h['apply_grain']) {\n    return;\n  }\n  h['grain_seed'] = bs.u(16);\n  if (h['frame_type'] == this.frame_type.INTER_FRAME)\n    h['update_grain'] = bs.u(1);\n  else\n    h['update_grain'] = 1;\n  if (!h['update_grain']) {\n    h['film_grain_params_ref_idx'] = bs.u(3);\n    return;\n  }\n  h['num_y_points'] = bs.u(4);\n  for (i = 0; i < num_y_points; i++) {\n    h['point_y_value[ i ]'] = bs.u(8);\n    h['point_y_scaling[ i ]'] = bs.u(8);\n  }\n  if (this.seq_header['mono_chrome']) {\n    h['chroma_scaling_from_luma'] = 0;\n  } else {\n    h['chroma_scaling_from_luma'] = bs.u(1);\n  }\n  if (this.seq_header['mono_chrome'] ||\n      this.seq_header['chroma_scaling_from_luma'] ||\n      (this.seq_header['subsampling_x'] == 1 &&\n       this.seq_header['subsampling_y'] == 1 && h['num_y_points'] == 0)) {\n    h['num_cb_points'] = 0;\n    h['num_cr_points'] = 0;\n  } else {\n    h['num_cb_points'] = bs.u(4);\n    for (var i = 0; i < num_cb_points; i++) {\n      h['point_cb_value[ i ]'] = bs.u(8);\n      h['point_cb_scaling[ i ]'] = bs.u(8);\n    }\n    h['num_cr_points'] = bs.u(4);\n    for (var i = 0; i < num_cr_points; i++) {\n      h['point_cr_value[ i ]'] = bs.u(8);\n      h['point_cr_scaling[ i ]'] = bs.u(8);\n    }\n  }\n  h['grain_scaling_minus_8'] = bs.u(2);\n  h['ar_coeff_lag'] = bs.u(2);\n  var numPosLuma = 2 * h['ar_coeff_lag'] * (h['ar_coeff_lag'] + 1);\n  var numPosChroma = numPosLuma;\n  if (h['num_y_points']) {\n    numPosChroma = numPosLuma + 1;\n    for (var i = 0; i < numPosLuma; i++)\n      h['ar_coeffs_y_plus_128[' + i + ']'] = bs.u(8);\n  }\n  if (h['chroma_scaling_from_luma'] || h['num_cb_points']) {\n    for (var i = 0; i < numPosChroma; i++)\n      h['ar_coeffs_cb_plus_128[' + i + ']'] = bs.u(8);\n  }\n  if (h['chroma_scaling_from_luma'] || h['num_cr_points']) {\n    for (var i = 0; i < numPosChroma; i++)\n      h['ar_coeffs_cr_plus_128[' + i + ']'] = bs.u(8);\n  }\n  h['ar_coeff_shift_minus_6'] = bs.u(2);\n  h['grain_scale_shift'] = bs.u(2);\n  if (h['num_cb_points']) {\n    h['cb_mult'] = bs.u(8);\n    h['cb_luma_mult'] = bs.u(8);\n    h['cb_offset'] = bs.u(9);\n  }\n  if (h['num_cr_points']) {\n    h['cr_mult'] = bs.u(8);\n    h['cr_luma_mult'] = bs.u(8);\n    h['cr_offset'] = bs.u(9);\n  }\n  h['overlap_flag'] = bs.u(1);\n  h['clip_to_restricted_range'] = bs.u(1);\n};\n\nfunction bitstream_parser_h264() {\n  this.nal_unit_type = [\n    'Unknown',\n    'Slice',\n    'DP A',\n    'DP B',\n    'DP C',\n    'IDR',\n    'SEI',\n    'SPS',\n    'PPS',\n    'AUD',\n    'End of sequence',\n    'End of stream',\n    'Filler data',\n    'SPS extension',\n    'Prefix NAL unit',\n    'Subset SPS',\n    'Reserved',\n    'Reserved',\n    'Reserved',\n    'Auxiliary slice',\n    'Slice extension',\n    'Slice multiview',\n    'Reserved',\n    'Reserved',\n    'Unknown',\n    'Unknown',\n    'Unknown',\n    'Unknown',\n    'Unknown',\n    'Unknown',\n    'Unknown',\n    'Unknown'\n  ];\n\n  this.sei_payload_type = [\n    'buffering_period', 'pic_timing', 'pan_scan_rect', 'filler_payload',\n    'user_data_registered_itu_t_t35', 'user_data_unregistered',\n    'recovery_point', 'dec_ref_pic_marking_repetition'\n  ];\n\n  this.frame_num = 0;\n}\n\nbitstream_parser_h264.prototype.parse = function(buffer, addr) {\n  var bs = new bitstream(buffer);\n  var h = this.parse_nalu(bs);\n  if (h['nal_unit_type'] == 6) {\n    this.parse_sei(bs, h);\n  } else if (h['nal_unit_type'] == 7) {\n    this.parse_sps(bs, h);\n    h['@extra'] = (h['pic_width_in_mbs_minus1'] + 1) * 16 + 'x' +\n        (2 - h['frame_mbs_only_flag']) *\n            (h['pic_height_in_map_units_minus1'] + 1) * 16;\n    h['@extra'] += ' ' + this.profile(h);\n    h['@extra'] += ' ' + h['level_idc'] / 10;\n  } else if (h['nal_unit_type'] == 8) {\n    this.parse_pps(bs, h);\n    h['@extra'] = h['entropy_coding_mode_flag'] ? 'CABAC' : 'CAVLC';\n  } else if (in_range(h['nal_unit_type'], [1, 5, 20])) {\n    this.parse_slice(bs, h);\n    h['@keyframe'] = h['nal_unit_type'] == 5 || (h['idr_flag'] || 0);\n    if (h['@keyframe']) {\n      h['@type'] = 'IDR';\n    } else {\n      h['@type'] = ['P', 'B', 'I', 'SP', 'SI'][h['slice_type'] % 5];\n    }\n    h['@extra'] = 'frame_num ' + h['frame_num'];\n    if (h['first_mb_in_slice'] == 0) {\n      h['@frame_num'] = this.frame_num++;\n    }\n  }\n\n  if (!('@type' in h)) {\n    h['@type'] = this.nal_unit_type[h['nal_unit_type']];\n  }\n\n  h['@addr'] = addr;\n  h['@length'] = buffer.length;\n  h['@data'] = buffer;\n  store_header(h);\n};\n\nbitstream_parser_h264.prototype.find_nalu = function(type, key, value) {\n  for (var i = g_headers.length - 1; i >= 0; i--) {\n    var h = g_headers[i];\n    if ('nal_unit_type' in h && in_range(h['nal_unit_type'], type)) {\n      if (key == null || h[key] == value) {\n        return h;\n      }\n    }\n  }\n  return null;\n};\n\nbitstream_parser_h264.prototype.profile = function(sps) {\n  var profile_idc = {\n    66: 'Baseline',\n    77: 'Main',\n    88: 'Extended',\n    100: 'High',\n    110: 'High 10',\n    122: 'High 4:2:2',\n    244: 'High 4:4:4 Predictive',\n    83: 'Scalable Baseline',\n    86: 'Scalable High'\n  };\n\n  var profile = sps['profile_idc'] in profile_idc ?\n      profile_idc[sps['profile_idc']] :\n      'Unknown';\n  if (sps['profile_idc'] == 66) {\n    if (sps['constraint_set0_flag'] == 1) profile = 'Constrained ' + profile;\n  } else if (sps['profile_idc'] == 100) {\n    if ((sps['constraint_set4_flag'] == 1 && sps['constraint_set5_flag'] == 1))\n      profile = 'Constrained ' + profile;\n  } else if (sps['profile_idc'] == 110) {\n    if (sps['constraint_set3_flag'] == 1) profile += ' Intra';\n  } else if (sps['profile_idc'] == 83) {\n    if (sps['constraint_set5_flag'] == 1)\n      profile = 'Scalable Constrained Baseline';\n  } else if (sps['profile_idc'] == 86) {\n    if (sps['constraint_set5_flag'] == 1) profile = 'Scalable Constrained High';\n  }\n  return profile;\n};\n\nbitstream_parser_h264.prototype.parse_nalu = function(bs) {\n  var nalu = {};\n  nalu['forbidden_zero_bit'] = bs.u(1);\n  nalu['nal_ref_idc'] = bs.u(2);\n  nalu['nal_unit_type'] = bs.u(5);\n  if (in_range(nalu['nal_unit_type'], [14, 20, 30])) {\n    nalu['svc_extension_flag'] = bs.u(1);\n    if (nalu['svc_extension_flag']) {\n      nalu['idr_flag'] = bs.u(1);\n      nalu['priority_id'] = bs.u(6);\n      nalu['no_inter_layer_pred_flag'] = bs.u(1);\n      nalu['dependency_id'] = bs.u(3);\n      nalu['quality_id'] = bs.u(4);\n      nalu['temporal_id'] = bs.u(3);\n      nalu['use_ref_base_pic_flag'] = bs.u(1);\n      nalu['discardable_flag'] = bs.u(1);\n      nalu['output_flag'] = bs.u(1);\n      nalu['reserved_three_2bits'] = int2str(bs.u(2), 2, 2, '0', 0);\n    }\n  }\n  return nalu;\n};\n\nbitstream_parser_h264.prototype.parse_sps = function(bs, sps) {\n  sps['profile_idc'] = bs.u(8);\n  sps['constraint_set0_flag'] = bs.u(1);\n  sps['constraint_set1_flag'] = bs.u(1);\n  sps['constraint_set2_flag'] = bs.u(1);\n  sps['constraint_set3_flag'] = bs.u(1);\n  sps['constraint_set4_flag'] = bs.u(1);\n  sps['constraint_set5_flag'] = bs.u(1);\n  sps['reserved_zero_2bits'] = int2str(bs.u(2), 2, 2, '0', 0);\n  sps['level_idc'] = bs.u(8);\n  sps['seq_parameter_set_id'] = bs.ue();\n  if (in_range(\n          sps['profile_idc'], [100, 110, 122, 244, 44, 83, 86, 118, 128])) {\n    sps['chroma_format_idc'] = bs.ue();\n    if (sps['chroma_format_idc'] == 3)\n      sps['separate_colour_plane_flag'] = bs.u(1);\n    sps['bit_depth_luma_minus8'] = bs.ue();\n    sps['bit_depth_chroma_minus8'] = bs.ue();\n    sps['qpprime_y_zero_transform_bypass_flag'] = bs.u(1);\n    sps['seq_scaling_matrix_present_flag'] = bs.u(1);\n    if (sps['seq_scaling_matrix_present_flag']) {\n      for (var i = 0; i < (sps['chroma_format_idc'] != 3 ? 8 : 12); i++) {\n        sps['seq_scaling_list_present_flag[' + i + ']'] = bs.u(1);\n        if (sps['seq_scaling_list_present_flag[' + i + ']']) {\n          var n = i < 6 ? 4 : 8;\n          sps['seq_scaling_list_present_flag[' + i + ']'] =\n              this.scaling_list(bs, n * n);\n        }\n      }\n    }\n  }\n  sps['log2_max_frame_num_minus4'] = bs.ue();\n  sps['pic_order_cnt_type'] = bs.ue();\n  if (sps['pic_order_cnt_type'] == 0) {\n    sps['log2_max_pic_order_cnt_lsb_minus4'] = bs.ue();\n  } else if (sps['pic_order_cnt_type'] == 1) {\n    sps['delta_pic_order_always_zero_flag'] = bs.u(1);\n    sps['offset_for_non_ref_pic'] = bs.se();\n    sps['offset_for_top_to_bottom_field'] = bs.se();\n    sps['num_ref_frames_in_pic_order_cnt_cycle'] = bs.ue();\n    for (var i = 0; i < sps['num_ref_frames_in_pic_order_cnt_cycle']; i++)\n      sps['offset_for_ref_frame[' + i + ']'] = bs.se();\n  }\n  sps['max_num_ref_frames'] = bs.ue();\n  sps['gaps_in_frame_num_value_allowed_flag'] = bs.u(1);\n  sps['pic_width_in_mbs_minus1'] = bs.ue();\n  sps['pic_height_in_map_units_minus1'] = bs.ue();\n  sps['frame_mbs_only_flag'] = bs.u(1);\n  if (sps['frame_mbs_only_flag'] == 0)\n    sps['mb_adaptive_frame_field_flag'] = bs.u(1);\n  sps['direct_8x8_inference_flag'] = bs.u(1);\n  sps['frame_cropping_flag'] = bs.u(1);\n  if (sps['frame_cropping_flag']) {\n    sps['frame_crop_left_offset'] = bs.ue();\n    sps['frame_crop_right_offset'] = bs.ue();\n    sps['frame_crop_top_offset'] = bs.ue();\n    sps['frame_crop_bottom_offset'] = bs.ue();\n  }\n  sps['vui_parameters_present_flag'] = bs.u(1);\n  if (sps['vui_parameters_present_flag']) {\n    sps['aspect_ratio_info_present_flag'] = bs.u(1);\n    if (sps['aspect_ratio_info_present_flag']) {\n      sps['aspect_ratio_idc'] = bs.u(8);\n      if (sps['aspect_ratio_idc'] == 255) {\n        sps['sar_width'] = bs.u(16);\n        sps['sar_height'] = bs.u(16);\n      }\n    }\n    sps['overscan_info_present_flag'] = bs.u(1);\n    if (sps['overscan_info_present_flag'])\n      sps['overscan_appropriate_flag'] = bs.u(1);\n    sps['video_signal_type_present_flag'] = bs.u(1);\n    if (sps['video_signal_type_present_flag']) {\n      sps['video_format'] = bs.u(3);\n      sps['video_full_range_flag'] = bs.u(1);\n      sps['colour_description_present_flag'] = bs.u(1);\n      if (sps['colour_description_present_flag']) {\n        sps['colour_primaries'] = bs.u(8);\n        sps['transfer_characteristics'] = bs.u(8);\n        sps['matrix_coefficients'] = bs.u(8);\n      }\n    }\n    sps['chroma_loc_info_present_flag'] = bs.u(1);\n    if (sps['chroma_loc_info_present_flag']) {\n      sps['chroma_sample_loc_type_top_field'] = bs.ue();\n      sps['chroma_sample_loc_type_bottom_field'] = bs.ue();\n    }\n    sps['timing_info_present_flag'] = bs.u(1);\n    if (sps['timing_info_present_flag']) {\n      sps['num_units_in_tick'] = bs.u(32);\n      sps['time_scale'] = bs.u(32);\n      sps['fixed_frame_rate_flag'] = bs.u(1);\n    }\n    sps['nal_hrd_parameters_present_flag'] = bs.u(1);\n    if (sps['nal_hrd_parameters_present_flag'])\n      sps['nal_hrd'] = this.parse_hrd(bs);\n    sps['vcl_hrd_parameters_present_flag'] = bs.u(1);\n    if (sps['vcl_hrd_parameters_present_flag'])\n      sps['vlc_hrd'] = this.parse_hrd(bs);\n    if (sps['nal_hrd_parameters_present_flag'] ||\n        sps['vcl_hrd_parameters_present_flag'])\n      sps['low_delay_hrd_flag'] = bs.u(1);\n    sps['pic_struct_present_flag'] = bs.u(1);\n    sps['bitstream_restriction_flag'] = bs.u(1);\n    if (sps['bitstream_restriction_flag']) {\n      sps['motion_vectors_over_pic_boundaries_flag'] = bs.u(1);\n      sps['max_bytes_per_pic_denom'] = bs.ue();\n      sps['max_bits_per_mb_denom'] = bs.ue();\n      sps['log2_max_mv_length_horizontal'] = bs.ue();\n      sps['log2_max_mv_length_vertical'] = bs.ue();\n      sps['max_num_reorder_frames'] = bs.ue();\n      sps['max_dec_frame_buffering'] = bs.ue();\n    }\n  }\n};\n\nbitstream_parser_h264.prototype.parse_hrd = function(bs) {\n  var hrd = {};\n  hrd['cpb_cnt_minus1'] = bs.ue();\n  hrd['bit_rate_scale'] = bs.u(4);\n  hrd['cpb_size_scale'] = bs.u(4);\n  for (var i = 0; i < hrd['cpb_cnt_minus1'] + 1; i++) {\n    hrd['bit_rate_value_minus1[' + i + ']'] = bs.ue();\n    hrd['cpb_size_value_minus1[' + i + ']'] = bs.ue();\n    hrd['cbr_flag[' + i + ']'] = bs.u(1);\n  }\n  hrd['initial_cpb_removal_delay_length_minus1'] = bs.u(5);\n  hrd['cpb_removal_delay_length_minus1'] = bs.u(5);\n  hrd['dpb_output_delay_length_minus1'] = bs.u(5);\n  hrd['time_offset_length'] = bs.u(5);\n  return hrd;\n};\n\nbitstream_parser_h264.prototype.parse_pps = function(bs, pps) {\n  pps['pic_parameter_set_id'] = bs.ue();\n  pps['seq_parameter_set_id'] = bs.ue();\n  pps['entropy_coding_mode_flag'] = bs.u(1);\n  pps['bottom_field_pic_order_in_frame_present_flag'] = bs.u(1);\n  pps['num_slice_groups_minus1'] = bs.ue();\n  pps['num_ref_idx_l0_default_active_minus1'] = bs.ue();\n  pps['num_ref_idx_l1_default_active_minus1'] = bs.ue();\n  pps['weighted_pred_flag'] = bs.u(1);\n  pps['weighted_bipred_idc'] = bs.u(2);\n  pps['pic_init_qp_minus26'] = bs.se();\n  pps['pic_init_qs_minus26'] = bs.se();\n  pps['chroma_qp_index_offset'] = bs.se();\n  pps['deblocking_filter_control_present_flag'] = bs.u(1);\n  pps['constrained_intra_pred_flag'] = bs.u(1);\n  pps['redundant_pic_cnt_present_flag'] = bs.u(1);\n  if (more_rbsp_data(bs)) {\n    pps['transform_8x8_mode_flag'] = bs.u(1);\n    pps['pic_scaling_matrix_present_flag'] = bs.u(1);\n    if (pps['pic_scaling_matrix_present_flag']) {\n      sps = this.find_nalu(\n          [7, 15], 'seq_parameter_set_id', pps['seq_parameter_set_id']);\n      nlists = 6;\n      if (sps)\n        nlists +=\n            ('chroma_format_idc' in sps && sps['chroma_format_idc'] == 3) ?\n            6 * pps['transform_8x8_mode_flag'] :\n            2 * pps['transform_8x8_mode_flag'];\n      for (var i = 0; i < nlists; i++) {\n        pps['pic_scaling_list_present_flag[' + i + ']'] = bs.u(1);\n        if (pps['pic_scaling_list_present_flag[' + i + ']']) {\n          var n = i < 6 ? 4 : 8;\n          pps['pic_scaling_list_present_flag[' + i + ']'] =\n              this.scaling_list(bs, n * n);\n        }\n      }\n    }\n  }\n};\n\nbitstream_parser_h264.prototype.parse_slice = function(bs, sh) {\n  sh['first_mb_in_slice'] = bs.ue();\n  sh['slice_type'] = bs.ue();\n  sh['pic_parameter_set_id'] = bs.ue();\n  var pps =\n      this.find_nalu([8], 'pic_parameter_set_id', sh['pic_parameter_set_id']);\n  if (pps == null) return sh;\n\n  var sps = this.find_nalu(\n      sh['nal_unit_type'] == 20 ? [15] : [7], 'seq_parameter_set_id',\n      pps['seq_parameter_set_id']);\n  if (sps == null) return sh;\n\n  if ('separate_colour_plane_flag' in sps &&\n      sps['separate_colour_plane_flag'] == 1)\n    sh['colour_plane_id'] = bs.u(2);\n\n  sh['frame_num'] = bs.u(sps['log2_max_frame_num_minus4'] + 4);\n\n  if (sps['frame_mbs_only_flag'] == 0) {\n    sh['field_pic_flag'] = bs.u(1);\n    if (sh['field_pic_flag']) sh['bottom_field_flag'] = bs.u(1);\n  }\n\n  if (sh['nal_unit_type'] == 5 || ('idr_flag' in sh && sh['idr_flag'] == 1))\n    sh['idr_pic_id'] = bs.ue();\n\n  if (sps['pic_order_cnt_type'] == 0) {\n    sh['pic_order_cnt_lsb'] =\n        bs.u(sps['log2_max_pic_order_cnt_lsb_minus4'] + 4);\n    if (pps['bottom_field_pic_order_in_frame_present_flag'] == 1 &&\n        (!('field_pic_flag' in sh) || sh['field_pic_flag'] == 0))\n      sh['delta_pic_order_cnt_bottom'] = bs.se();\n  } else if (\n      sps['pic_order_cnt_type'] == 1 &&\n      sps['delta_pic_order_always_zero_flag'] == 0) {\n    sh['delta_pic_order_cnt[0]'] = bs.se();\n    if (pps['bottom_field_pic_order_in_frame_present_flag'] &&\n        'field_pic_flag' in sh && sh['field_pic_flag'] == 0)\n      sh['delta_pic_order_cnt[1]'] = bs.se();\n  }\n\n  if (pps['redundant_pic_cnt_present_flag'] == 1)\n    sh['redundant_pic_cnt'] = bs.ue();\n\n  if (!('quality_id' in sh) || sh['quality_id'] == 0) {\n    if (sh['slice_type'] % 5 == 1) sh['direct_spatial_mv_pred_flag'] = bs.u(1);\n\n    if (in_range(sh['slice_type'] % 5, [0, 1, 3])) {\n      sh['num_ref_idx_active_override_flag'] = bs.u(1);\n      if (sh['num_ref_idx_active_override_flag']) {\n        sh['num_ref_idx_l0_active_minus1'] = bs.ue();\n        if (sh['slice_type'] % 5 == 1)\n          sh['num_ref_idx_l1_active_minus1'] = bs.ue();\n      }\n    }\n\n    if (!in_range(sh['slice_type'] % 5, [2, 4])) {\n      for (var list = 0; list < (sh['slice_type'] % 5 == 1 ? 2 : 1); list++) {\n        sh['ref_pic_list_modification_flag_l' + list] = bs.u(1);\n        if (sh['ref_pic_list_modification_flag_l' + list]) {\n          var i = 0;\n          var modification_of_pic_nums_idc = 0;\n          while (modification_of_pic_nums_idc != 3) {\n            modification_of_pic_nums_idc = bs.ue();\n            // todo: add command name\n            sh['modification_of_pic_nums_idc_l' + list + '[' + i + ']'] =\n                modification_of_pic_nums_idc;\n            if (in_range(modification_of_pic_nums_idc, [0, 1]))\n              sh['abs_diff_pic_num_minus1_l' + list + '[' + i + ']'] = bs.ue();\n            else if (modification_of_pic_nums_idc == 2)\n              sh['long_term_pic_num_l' + list + '[' + i + ']'] = bs.ue();\n            i += 1;\n          }\n        }\n      }\n    }\n\n    if ((pps['weighted_pred_flag'] && in_range(sh['slice_type'] % 5, [0, 3])) ||\n        (pps['weighted_bipred_idc'] == 1 && sh['slice_type'] % 5 == 1)) {\n      sh['luma_log2_weight_denom'] = bs.ue();\n      if (!('chroma_format_idc' in sps) || sps['chroma_format_idc'] != 0)\n        sh['chroma_log2_weight_denom'] = bs.ue();\n      for (var list = 0; list < (sh['slice_type'] % 5 == 1 ? 2 : 1); list++) {\n        var num_ref_idx_active_minus1 =\n            pps['num_ref_idx_l' + list + '_default_active_minus1'];\n        if ('num_ref_idx_l' + list + '_active_minus1' in sh)\n          var num_ref_idx_active_minus1 =\n              sh['num_ref_idx_l' + list + '_active_minus1'];\n        for (var i = 0; i <= num_ref_idx_active_minus1; i++) {\n          sh['luma_weight_l' + list + '_flag'] = bs.u(1);\n          if (sh['luma_weight_l' + list + '_flag']) {\n            sh['luma_weight_l' + list + '[' + i + ']'] = bs.se();\n            sh['luma_offset_l' + list + '[' + i + ']'] = bs.se();\n          }\n          if ('chroma_log2_weight_denom' in sh) {\n            sh['chroma_weight_l' + list + '_flag'] = bs.u(1);\n            if (sh['chroma_weight_l' + list + '_flag']) {\n              for (var j = 0; j < 2; j++) {\n                sh['chroma_weight_l' + list + '[' + i + ']' +\n                   '[' + j + ']'] = bs.se();\n                sh['chroma_offset_l' + list + '[' + i + ']' +\n                   '[' + j + ']'] = bs.se();\n              }\n            }\n          }\n        }\n      }\n    }\n\n    if (sh['nal_ref_idc'] != 0) {\n      if (sh['nal_unit_type'] == 5 ||\n          ('idr_flag' in sh && sh['idr_flag'] == 1)) {\n        sh['no_output_of_prior_pics_flag'] = bs.u(1);\n        sh['long_term_reference_flag'] = bs.u(1);\n      } else {\n        sh['adaptive_ref_pic_marking_mode_flag'] = bs.u(1);\n        if (sh['adaptive_ref_pic_marking_mode_flag']) {\n          var i = 0;\n          var memory_management_control_operation = 1;\n          while (memory_management_control_operation != 0) {\n            memory_management_control_operation = bs.ue();\n            sh['memory_management_control_operation[' + i + ']'] =\n                memory_management_control_operation;\n            if (in_range(memory_management_control_operation, [1, 3]))\n              sh['difference_of_pic_nums_minus1[' + i + ']'] = bs.ue();\n            if (memory_management_control_operation == 2)\n              sh['long_term_pic_num[' + i + ']'] = bs.ue();\n            if (in_range(memory_management_control_operation, [3, 6]))\n              sh['long_term_frame_idx[' + i + ']'] = bs.ue();\n            if (memory_management_control_operation == 4)\n              sh['max_long_term_frame_idx_plus1[' + i + ']'] = bs.ue();\n            i += 1;\n          }\n        }\n      }\n\n      if ('slice_header_restriction_flag' in sps &&\n          sps['slice_header_restriction_flag'] == 0) {\n        sh['store_ref_base_pic_flag'] = bs.u(1);\n        if (sh['use_ref_base_pic_flag'] ||\n            sh['store_ref_base_pic_flag'] && sh['idr_flag'] == 0) {\n          sh['adaptive_ref_base_pic_marking_mode_flag'] = bs.u(1);\n          if (sh['adaptive_ref_base_pic_marking_mode_flag']) {\n            var i = 0;\n            var memory_management_base_control_operation = 1;\n            while (memory_management_base_control_operation != 0) {\n              memory_management_base_control_operation = bs.ue();\n              // todo: describe command\n              sh['memory_management_base_control_operation[' + i + ']'] =\n                  memory_management_control_operation;\n              if (memory_management_control_operation == 1)\n                sh['difference_of_base_pic_nums_minus1[' + i + ']'] = bs.ue();\n              if (memory_management_control_operation == 2)\n                sh['long_term_base_pic_num[' + i + ']'] = bs.ue();\n              i += 1;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  if (pps['entropy_coding_mode_flag'] &&\n      !in_range(sh['slice_type'] % 5, [2, 4]))\n    sh['cabac_init_idc'] = bs.ue();\n\n  sh['slice_qp_delta'] = bs.se();\n  if (in_range(sh['slice_type'], [3, 4])) {\n    if (sh['slice_type'] == 3) sh['sp_for_switch_flag'] = bs.u(1);\n    sh['slice_qs_delta'] = bs.se();\n  }\n\n  if (pps['deblocking_filter_control_present_flag']) {\n    sh['disable_deblocking_filter_idc'] = bs.ue();\n    if (sh['disable_deblocking_filter_idc'] != 1) {\n      sh['slice_alpha_c0_offset_div2'] = bs.se();\n      sh['slice_beta_offset_div2'] = bs.se();\n    }\n  }\n\n  if (sh['nal_unit_type'] == 20) {\n    if (sh['no_inter_layer_pred_flag'] == 0 && sh['quality_id'] == 0) {\n      sh['ref_layer_dq_id'] = bs.ue();\n      if (sps['inter_layer_deblocking_filter_control_present_flag']) {\n        sh['disable_inter_layer_deblocking_filter_idc'] = bs.ue();\n        if (sh['disable_inter_layer_deblocking_filter_idc'] != 1) {\n          sh['inter_layer_slice_alpha_c0_offset_div2'] = bs.se();\n          sh['inter_layer_slice_beta_offset_div2'] = bs.se();\n        }\n      }\n      sh['constrained_intra_resampling_flag'] = bs.u(1);\n      if (sps['extended_spatial_scalability_idc'] == 2) {\n        if ('chroma_format_idc' in sps && sps['chroma_format_idc'] > 0) {\n          sh['ref_layer_chroma_phase_x_plus1_flag'] = bs.u(1);\n          sh['ref_layer_chroma_phase_y_plus1'] = bs.u(2);\n        }\n        sh['scaled_ref_layer_left_offset'] = bs.se();\n        sh['scaled_ref_layer_top_offset'] = bs.se();\n        sh['scaled_ref_layer_right_offset'] = bs.se();\n        sh['scaled_ref_layer_bottom_offset'] = bs.se();\n      }\n    }\n\n    if (sh['no_inter_layer_pred_flag'] == 0) {\n      sh['slice_skip_flag'] = bs.u(1);\n      if (sh['slice_skip_flag'])\n        sh['num_mbs_in_slice_minus1'] = bs.ue();\n      else {\n        sh['adaptive_base_mode_flag'] = bs.u(1);\n        if (sh['adaptive_base_mode_flag'] == 0)\n          sh['default_base_mode_flag'] = bs.u(1);\n        sh['adaptive_motion_prediction_flag'] = bs.u(1);\n        if (sh['adaptive_motion_prediction_flag'] == 0)\n          sh['default_motion_prediction_flag'] = bs.u(1);\n        sh['adaptive_residual_prediction_flag'] = bs.u(1);\n        if (sh['adaptive_residual_prediction_flag'] == 0)\n          sh['default_residual_prediction_flag'] = bs.u(1);\n      }\n      if ('adaptive_tcoeff_level_prediction_flag' in sps &&\n          sps['adaptive_tcoeff_level_prediction_flag'] == 1)\n        sh['default_residual_prediction_flag'] = bs.u(1);\n    }\n\n    if (sps['slice_header_restriction_flag'] == 0 &&\n        (!('slice_skip_flag' in sh) || sh['slice_skip_flag'] == 0)) {\n      sh['scan_idx_start'] = bs.u(4);\n      sh['scan_idx_end'] = bs.u(4);\n    }\n  }\n};\n\nbitstream_parser_h264.prototype.parse_sei = function(bs, h) {\n  var i = 0;\n  do {\n    var payload_type = 0;\n    do {\n      payload_type += bs.u(8);\n    } while (payload_type != 0 && (payload_type % 255) == 0);\n\n    var payload_size = 0;\n    do {\n      payload_size += bs.u(8);\n    } while (payload_size != 0 && (payload_size % 255) == 0);\n\n    h['payload_type[' + i + ']'] = payload_type;\n    h['payload_size[' + i + ']'] = payload_size;\n\n    if (payload_type < this.sei_payload_type.length) {\n      h['payload_type[' + i + ']'] += ' ' + this.sei_payload_type[payload_type];\n    }\n\n    bs.u(8 * payload_size);\n    ++i;\n  } while (more_rbsp_data(bs));\n};\n\nfunction bitstream_parser_h265() {\n  this.nal_unit_type = [\n    'TRAIL_N',\n    'TRAIL_R',\n    'TSA_N',\n    'TSA_R',\n    'STSA_N',\n    'STSA_R',\n    'RADL_N',\n    'RADL_R',\n    'RASL_N',\n    'RASL_R',\n    'RSV_VCL_N10',\n    'RSV_VCL_N12',\n    'RSV_VCL_N14',\n    'RSV_VCL_R11',\n    'RSV_VCL_R13',\n    'RSV_VCL_R15',\n    'BLA_W_LP',\n    'BLA_W_RADL',\n    'BLA_N_LP',\n    'IDR_W_RADL',\n    'IDR_N_LP',\n    'CRA_NUT',\n    'RSV_IRAP_VCL22',\n    'RSV_IRAP_VCL23',\n    'RSV_VCL24',\n    'RSV_VCL25',\n    'RSV_VCL26',\n    'RSV_VCL27',\n    'RSV_VCL28',\n    'RSV_VCL29',\n    'RSV_VCL30',\n    'RSV_VCL31',\n    'VPS',\n    'SPS',\n    'PPS',\n    'AUD',\n    'EOS',\n    'EOB',\n    'FD_NUT',\n    'PREFIX SEI',\n    'SUFFIX SEI',\n    'RSV_NVCL41',\n    'RSV_NVCL47',\n    'UNSPEC48',\n    'UNSPEC63'\n  ];\n\n  this.frame_num = 0;\n}\n\nbitstream_parser_h265.prototype.parse = function(buffer, addr) {\n  var bs = new bitstream(buffer);\n  var h = this.parse_nalu(bs);\n\n  if (h['nal_unit_type'] == 32) {\n    this.parse_vps(bs, h);\n  } else if (h['nal_unit_type'] == 33) {\n    this.parse_sps(bs, h);\n    h['@extra'] =\n        h['pic_width_in_luma_samples'] + 'x' + h['pic_height_in_luma_samples'];\n    h['@extra'] += ' ' + this.profile(h);\n    h['@extra'] += ' ' + h['general_level_idc'];\n  } else if (h['nal_unit_type'] == 34) {\n    this.parse_pps(bs, h);\n  } else if ([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 16, 17, 18, 19, 20,\n              21].indexOf(h['nal_unit_type']) >= 0) {\n    this.slice_segment_header(bs, h);\n    h['@keyframe'] = [19, 20].indexOf(h['nal_unit_type']) >= 0 ? 1 : 0;\n    if (h['@keyframe']) {\n      h['@type'] = 'IDR';\n    } else {\n      h['@type'] = ['B', 'P', 'I'][h['slice_type']];\n    }\n    h['@extra'] = this.nal_unit_type[h['nal_unit_type']];\n    h['@extra'] += ' ' + (h['@keyframe'] ? 0 : h['slice_pic_order_cnt_lsb']);\n    h['@poc'] = h['@keyframe'] ? 0 : h['slice_pic_order_cnt_lsb'];\n\n    if (h['first_slice_segment_in_pic_flag']) {\n      h['@frame_num'] = this.frame_num++;\n    }\n  }\n\n  h['@addr'] = addr;\n  if (!('@type' in h)) h['@type'] = this.nal_unit_type[h['nal_unit_type']];\n  h['@length'] = buffer.length;\n  store_header(h);\n};\n\nbitstream_parser_h265.prototype.find_nalu = function(type, key, value) {\n  for (var i = g_headers.length - 1; i >= 0; i--) {\n    var h = g_headers[i];\n    if ('nal_unit_type' in h && in_range(h['nal_unit_type'], type)) {\n      if (key == null || h[key] == value) {\n        return h;\n      }\n    }\n  }\n  return null;\n};\n\nbitstream_parser_h265.prototype.parse_nalu = function(bs) {\n  var nalu = {};\n  nalu['forbidden_zero_bit'] = bs.u(1);\n  nalu['nal_unit_type'] = bs.u(6);\n  nalu['nuh_layer_id'] = bs.u(6);\n  nalu['nuh_temporal_id_plus1'] = bs.u(3);\n  return nalu;\n};\n\nbitstream_parser_h265.prototype.profile = function(sps) {\n  if (sps['general_profile_idc'] == 1 ||\n      sps['general_profile_compatibility_flag[1]'])\n    return 'Main';\n  if (sps['general_profile_idc'] == 2 ||\n      sps['general_profile_compatibility_flag[2]'])\n    return 'Main 10';\n  if (sps['general_profile_idc'] == 3 ||\n      sps['general_profile_compatibility_flag[3]'])\n    return 'Main Still Picture';\n};\n\nbitstream_parser_h265.prototype.profile_tier_level = function(\n    bs, idx, profilePresentFlag, maxNumSubLayersMinus1, h) {\n  if (profilePresentFlag) {\n    h['general_profile_space' + idx] = bs.u(2);\n    h['general_tier_flag' + idx] = bs.u(1);\n    h['general_profile_idc' + idx] = bs.u(5);\n    h['general_profile_compatibility_flags' + idx] =\n        int2str(bs.u(32), 2, 32, '0', 0);\n    h['general_progressive_source_flag' + idx] = bs.u(1);\n    h['general_interlaced_source_flag' + idx] = bs.u(1);\n    h['general_non_packed_constraint_flag' + idx] = bs.u(1);\n    h['general_frame_only_constraint_flag' + idx] = bs.u(1);\n    if (in_range(h['general_profile_idc' + idx], [4, 5, 6, 7]) ||\n        (h['general_profile_compatibility_flags' + idx] & 0xf0)) {\n      h['general_max_12bit_constraint_flag' + idx] = bs.u(1);\n      h['general_max_10bit_constraint_flag' + idx] = bs.u(1);\n      h['general_max_8bit_constraint_flag' + idx] = bs.u(1);\n      h['general_max_422chroma_constraint_flag' + idx] = bs.u(1);\n      h['general_max_420chroma_constraint_flag' + idx] = bs.u(1);\n      h['general_max_monochrome_constraint_flag' + idx] = bs.u(1);\n      h['general_intra_constraint_flag' + idx] = bs.u(1);\n      h['general_one_picture_only_constraint_flag' + idx] = bs.u(1);\n      h['general_lower_bit_rate_constraint_flag' + idx] = bs.u(1);\n      h['general_reserved_zero_34bits' + idx] = bs.u(34);\n    } else\n      h['general_reserved_zero_43bits' + idx] = bs.u(43);\n    if ((h['general_profile_idc' + idx] >= 1 &&\n         h['general_profile_idc' + idx] <= 5) ||\n        (h['general_profile_compatibility_flags' + idx] & 0x3e))\n      h['general_inbld_flag' + idx] = bs.u(1);\n    else\n      h['general_reserved_zero_bit' + idx] = bs.u(1);\n  }\n  h['general_level_idc' + idx] = bs.u(8);\n  for (var i = 0; i < maxNumSubLayersMinus1; i++) {\n    h['sub_layer_profile_present_flag' + idx + '[' + i + ']'] = bs.u(1);\n    h['sub_layer_level_present_flag' + idx + '[' + i + ']'] = bs.u(1);\n  }\n  if (maxNumSubLayersMinus1 > 0)\n    for (var i = maxNumSubLayersMinus1; i < 8; i++)\n      h['reserved_zero_2bits' + idx + '[' + i + ']'] = bs.u(2);\n  for (var i = 0; i < maxNumSubLayersMinus1; i++) {\n    if (h['sub_layer_profile_present_flag' + idx + '[' + i + ']']) {\n      h['sub_layer_profile_space' + idx + '[' + i + ']'] = bs.u(2);\n      h['sub_layer_tier_flag' + idx + '[' + i + ']'] = bs.u(1);\n      h['sub_layer_profile_idc' + idx + '[' + i + ']'] = bs.u(5);\n      h['sub_layer_profile_compatibility_flag' + idx + '[' + i + ']'] =\n          bs.u(32);\n      h['sub_layer_progressive_source_flag' + idx + '[' + i + ']'] = bs.u(1);\n      h['sub_layer_interlaced_source_flag' + idx + '[' + i + ']'] = bs.u(1);\n      h['sub_layer_non_packed_constraint_flag' + idx + '[' + i + ']'] = bs.u(1);\n      h['sub_layer_frame_only_constraint_flag' + idx + '[' + i + ']'] = bs.u(1);\n      if (in_range(\n              h['sub_layer_profile_idc' + idx + '[' + i + ']'], [4, 5, 6, 7]) ||\n          (h['sub_layer_profile_compatibility_flag' + idx + '[' + i + ']'] &\n           0xf0)) {\n        h['sub_layer_max_12bit_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_max_10bit_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_max_8bit_constraint_flag' + idx + '[' + i + ']'] = bs.u(1);\n        h['sub_layer_max_422chroma_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_max_420chroma_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_max_monochrome_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_intra_constraint_flag' + idx + '[' + i + ']'] = bs.u(1);\n        h['sub_layer_one_picture_only_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_lower_bit_rate_constraint_flag' + idx + '[' + i + ']'] =\n            bs.u(1);\n        h['sub_layer_reserved_zero_34bits' + idx + '[' + i + ']'] = bs.u(34);\n      } else\n        h['sub_layer_reserved_zero_43bits' + idx + '[' + i + ']'] = bs.u(43);\n      if ((h['sub_layer_profile_idc' + idx + '[' + i + ']'] >= 1 &&\n           h['sub_layer_profile_idc' + idx + '[' + i + ']'] <= 5) ||\n          (h['sub_layer_profile_idc' + idx + '[' + i + ']'] & 0x3e))\n        h['sub_layer_inbld_flag' + idx + '[' + i + ']'] = bs.u(1);\n      else\n        h['sub_layer_reserved_zero_bit' + idx + '[' + i + ']'] = bs.u(1);\n    }\n    if (h['sub_layer_level_present_flag' + idx + '[' + i + ']'])\n      h['sub_layer_level_idc' + idx + '[' + i + ']'] = bs.u(8);\n  }\n};\n\nbitstream_parser_h265.prototype.hrd_parameters = function(\n    bs, idx, commonInfPresentFlag, maxNumSubLayersMinus1, hrd) {\n  var suffix = idx == '' ? '' : '[' + idx + ']';\n  if (commonInfPresentFlag) {\n    hrd['nal_hrd_parameters_present_flag' + suffix] = bs.u(1);\n    hrd['vcl_hrd_parameters_present_flag' + suffix] = bs.u(1);\n    if (hrd['nal_hrd_parameters_present_flag' + suffix] ||\n        hrd['vcl_hrd_parameters_present_flag' + suffix]) {\n      hrd['sub_pic_hrd_params_present_flag' + suffix] = bs.u(1);\n      if (hrd['sub_pic_hrd_params_present_flag' + suffix]) {\n        hrd['tick_divisor_minus2' + suffix] = bs.u(8);\n        hrd['du_cpb_removal_delay_increment_length_minus1' + suffix] = bs.u(5);\n        hrd['sub_pic_cpb_params_in_pic_timing_sei_flag' + suffix] = bs.u(1);\n        hrd['dpb_output_delay_du_length_minus1' + suffix] = bs.u(5);\n      }\n      hrd['bit_rate_scale' + suffix] = bs.u(4);\n      hrd['cpb_size_scale' + suffix] = bs.u(4);\n      if (hrd['sub_pic_hrd_params_present_flag' + suffix])\n        hrd['cpb_size_du_scale' + suffix] = bs.u(4);\n      hrd['initial_cpb_removal_delay_length_minus1' + suffix] = bs.u(5);\n      hrd['au_cpb_removal_delay_length_minus1' + suffix] = bs.u(5);\n      hrd['dpb_output_delay_length_minus1' + suffix] = bs.u(5);\n    }\n  }\n\n  for (i = 0; i <= maxNumSubLayersMinus1; i++) {\n    hrd['fixed_pic_rate_general_flag' + suffix + '[' + i + ']'] = bs.u(1);\n    if (!hrd['fixed_pic_rate_general_flag' + suffix + '[' + i + ']'])\n      hrd['fixed_pic_rate_within_cvs_flag' + suffix + '[' + i + ']'] = bs.u(1);\n    if (hrd['fixed_pic_rate_within_cvs_flag' + suffix + '[' + i + ']'])\n      hrd['elemental_duration_in_tc_minus1' + suffix + '[' + i + ']'] = bs.ue();\n    else\n      hrd['low_delay_hrd_flag' + suffix + '[' + i + ']'] = bs.u(1);\n    if (!hrd['low_delay_hrd_flag' + suffix + '[' + i + ']'])\n      hrd['cpb_cnt_minus1' + suffix + '[' + i + ']'] = bs.ue();\n    if (hrd['nal_hrd_parameters_present_flag' + suffix]) {\n      for (var j = 0; j <= i; j++) {\n        hrd['nal_bit_rate_value_minus1' + suffix + '[' + i + '][' + j + ']'] =\n            bs.ue();\n        hrd['nal_cpb_size_value_minus1' + suffix + '[' + i + '][' + j + ']'] =\n            bs.ue();\n        if (hrd['nal_sub_pic_hrd_params_present_flag' + suffix]) {\n          hrd['nal_cpb_size_du_value_minus1' + suffix + '[' + i + '][' + j +\n              ']'] = bs.ue();\n          hrd['nal_bit_rate_du_value_minus1' + suffix + '[' + i + '][' + j +\n              ']'] = bs.ue();\n        }\n        hrd['nal_cbr_flag' + suffix + '[' + i + '][' + j + ']'] = bs.u(1);\n      }\n    }\n    if (hrd['vcl_hrd_parameters_present_flag' + suffix]) {\n      for (var j = 0; j <= i; j++) {\n        hrd['vlc_bit_rate_value_minus1' + suffix + '[' + i + '][' + j + ']'] =\n            bs.ue();\n        hrd['vlc_cpb_size_value_minus1' + suffix + '[' + i + '][' + j + ']'] =\n            bs.ue();\n        if (hrd['vlc_sub_pic_hrd_params_present_flag' + suffix]) {\n          hrd['vlc_cpb_size_du_value_minus1' + suffix + '[' + i + '][' + j +\n              ']'] = bs.ue();\n          hrd['vlc_bit_rate_du_value_minus1' + suffix + '[' + i + '][' + j +\n              ']'] = bs.ue();\n        }\n        hrd['vlc_cbr_flag' + suffix + '[' + i + '][' + j + ']'] = bs.u(1);\n      }\n    }\n  }\n};\n\nbitstream_parser_h265.prototype.rep_format = function(bs, i, vps) {\n  var suffix = '[' + i + ']';\n  vps['pic_width_vps_in_luma_samples' + suffix] = bs.u(16);\n  vps['pic_height_vps_in_luma_samples' + suffix] = bs.u(16);\n  vps['chroma_and_bit_depth_vps_present_flag' + suffix] = bs.u(1);\n  if (vps['chroma_and_bit_depth_vps_present_flag' + suffix]) {\n    vps['chroma_format_vps_idc' + suffix] = bs.u(2);\n    if (vps['chroma_format_vps_idc' + suffix] == 3)\n      vps['separate_colour_plane_vps_flag' + suffix] = bs.u(1);\n    vps['bit_depth_vps_luma_minus8' + suffix] = bs.u(4);\n    vps['bit_depth_vps_chroma_minus8' + suffix] = bs.u(4);\n  }\n  vps['conformance_window_vps_flag' + suffix] = bs.u(1);\n  if (vps['conformance_window_vps_flag' + suffix]) {\n    vps['conf_win_vps_left_offset' + suffix] = bs.ue();\n    vps['conf_win_vps_right_offset' + suffix] = bs.ue();\n    vps['conf_win_vps_top_offset' + suffix] = bs.ue();\n    vps['conf_win_vps_bottom_offset' + suffix] = bs.ue();\n  }\n};\n\nbitstream_parser_h265.prototype.dpb_size = function(bs, i, vps) {\n  for (var i = 1; i < vps['#NumOutputLayerSets']; i++) {\n    currLsIdx = vps['#OlsIdxToLsIdx[' + i + ']'];\n    vps['sub_layer_flag_info_present_flag[' + i + ']'] = bs.u(1);\n    for (var j = 0;\n         j <= vps['#MaxSubLayersInLayerSetMinus1[' + currLsIdx + ']']; j++) {\n      if (j > 0 && vps['sub_layer_flag_info_present_flag[' + i + ']'])\n        vps['sub_layer_dpb_info_present_flag[' + i + '][' + j + ']'] = bs.u(1);\n      if (vps['sub_layer_dpb_info_present_flag[' + i + '][' + j + ']']) {\n        for (k = 0; k < vps['#NumLayersInIdList[' + currLsIdx + ']']; k++)\n          if (vps['#NecessaryLayerFlag[' + i + '][' + k + ']'] &&\n              (vps['vps_base_layer_internal_flag'] ||\n               (vps['#LayerSetLayerIdList[' + currLsIdx + '][' + k + ']'] !=\n                0)))\n            vps['max_vps_dec_pic_buffering_minus1[' + i + '][' + k + '][' + j +\n                ']'] = bs.ue();\n        vps['max_vps_num_reorder_pics[' + i + '][' + j + ']'] = bs.ue();\n        vps['max_vps_latency_increase_plus1[' + i + '][' + j + ']'] = bs.ue();\n      }\n    }\n  }\n};\n\nbitstream_parser_h265.prototype.vps_vui_bsp_hrd_params = function(bs, vps) {\n  vps['vps_num_add_hrd_params'] = bs.ue();\n  for (var i = vps['vps_num_hrd_parameters'];\n       i < vps['vps_num_hrd_parameters'] + vps['vps_num_add_hrd_params']; i++) {\n    if (i > 0) vps['cprms_add_present_flag[' + i + ']'] = bs.u(1);\n    vps['num_sub_layer_hrd_minus1[' + i + ']'] = bs.ue();\n    this.hrd_parameters(\n        bs, i, vps['cprms_add_present_flag[' + i + ']'],\n        vps['num_sub_layer_hrd_minus1[' + i + ']'], vps);\n  }\n  if (vps['vps_num_hrd_parameters'] + vps['vps_num_add_hrd_params'] > 0) {\n    for (var h = 1; h < vps['#NumOutputLayerSets']; h++) {\n      vps['num_signalled_partitioning_schemes[' + h + ']'] = bs.ue();\n      for (var j = 1;\n           j < vps['num_signalled_partitioning_schemes[' + h + ']'] + 1; j++) {\n        vps['num_partitions_in_scheme_minus1[' + h + '][' + j + ']'] = bs.ue();\n        for (var k = 0;\n             k <= vps['num_partitions_in_scheme_minus1[' + h + '][' + j + ']'];\n             k++)\n          for (var r = 0; r < vps['#NumLayersInIdList[' +\n                                  vps['#OlsIdxToLsIdx[' + h + ']'] + ']'];\n               r++)\n            vps['layer_included_in_partition_flag[' + h + '][' + j + '][' + k +\n                '][' + r + ']'] = bs.u(1);\n      }\n      for (var i = 0;\n           i < vps['num_signalled_partitioning_schemes[' + h + ']'] + 1; i++)\n        for (var t = 0; t <= vps['#MaxSubLayersInLayerSetMinus1[' +\n                                 vps['#OlsIdxToLsIdx[' + h + ']'] + ']'];\n             t++) {\n          vps['num_bsp_schedules_minus1[' + h + '][' + i + '][' + t + ']'] =\n              bs.ue();\n          for (var j = 0; j <=\n               vps['num_bsp_schedules_minus1[' + h + '][' + i + '][' + t + ']'];\n               j++)\n            for (var k = 0; k <=\n                 vps['num_partitions_in_scheme_minus1[' + h + '][' + i + ']'];\n                 k++) {\n              if (vps['vps_num_hrd_parameters'] +\n                      vps['vps_num_add_hrd_params'] >\n                  1)\n                vps['bsp_hrd_idx[' + h + '][' + i + '][' + t + '][' + j + '][' +\n                    k + ']'] =\n                    bs.u(this.cntbits(\n                        vps['vps_num_hrd_parameters'] +\n                        vps['vps_num_add_hrd_params']));\n              vps['bsp_sched_idx[' + h + '][' + i + '][' + t + '][' + j + '][' +\n                  k + ']'] = bs.ue();\n            }\n        }\n    }\n  }\n};\n\nbitstream_parser_h265.prototype.vps_vui = function(bs, vps) {\n  vps['cross_layer_pic_type_aligned_flag'] = bs.u(1);\n  if (!vps['cross_layer_pic_type_aligned_flag'])\n    vps['cross_layer_irap_aligned_flag'] = bs.u(1);\n  if (vps['cross_layer_irap_aligned_flag'])\n    vps['all_layers_idr_aligned_flag'] = bs.u(1);\n  vps['bit_rate_present_vps_flag'] = bs.u(1);\n  vps['pic_rate_present_vps_flag'] = bs.u(1);\n  if (vps['bit_rate_present_vps_flag'] || vps['pic_rate_present_vps_flag'])\n    for (var i = vps['vps_base_layer_internal_flag'] ? 0 : 1;\n         i < vps['#NumLayerSets']; i++)\n      for (var j = 0; j <= vps['#MaxSubLayersInLayerSetMinus1[' + i + ']'];\n           j++) {\n        if (vps['bit_rate_present_vps_flag'])\n          vps['bit_rate_present_flag[' + i + '][' + j + ']'] = bs.u(1);\n        if (vps['pic_rate_present_vps_flag'])\n          vps['pic_rate_present_flag[' + i + '][' + j + ']'] = bs.u(1);\n        if (vps['bit_rate_present_flag[' + i + '][' + j + ']']) {\n          vps['avg_bit_rate[' + i + '][' + j + ']'] = bs.u(16);\n          vps['max_bit_rate[' + i + '][' + j + ']'] = bs.u(16);\n        }\n        if (vps['pic_rate_present_flag[' + i + '][' + j + ']']) {\n          vps['constant_pic_rate_idc[' + i + '][' + j + ']'] = bs.u(2);\n          vps['avg_pic_rate[' + i + '][' + j + ']'] = bs.u(16);\n        }\n      }\n  vps['video_signal_info_idx_present_flag'] = bs.u(1);\n  if (vps['video_signal_info_idx_present_flag'])\n    vps['vps_num_video_signal_info_minus1'] = bs.u(4);\n  for (var i = 0; i <= vps['vps_num_video_signal_info_minus1']; i++) {\n    vps['video_vps_format[' + i + ']'] = bs.u(3);\n    vps['video_full_range_vps_flag[' + i + ']'] = bs.u(1);\n    vps['colour_primaries_vps[' + i + ']'] = bs.u(8);\n    vps['transfer_characteristics_vps[' + i + ']'] = bs.u(8);\n    vps['matrix_coeffs_vps[' + i + ']'] = bs.u(8);\n  }\n  if (vps['video_signal_info_idx_present_flag'] &&\n      vps['vps_num_video_signal_info_minus1'] > 0)\n    for (var i = vps['vps_base_layer_internal_flag'] ? 0 : 1;\n         i <= vps['vps_max_layers_minus1']; i++)\n      vps['vps_video_signal_info_idx[' + i + ']'] = bs.u(4);\n  vps['tiles_not_in_use_flag'] = bs.u(1);\n  if (!vps['tiles_not_in_use_flag']) {\n    for (var i = vps['vps_base_layer_internal_flag'] ? 0 : 1;\n         i <= vps['vps_max_layers_minus1']; i++) {\n      vps['tiles_in_use_flag[' + i + ']'] = bs.u(1);\n      if (vps['tiles_in_use_flag[' + i + ']'])\n        vps['loop_filter_not_across_tiles_flag[' + i + ']'] = bs.u(1);\n    }\n    for (var i = vps['vps_base_layer_internal_flag'] ? 1 : 2;\n         i <= vps['vps_max_layers_minus1']; i++)\n      for (var j = 0; j < vps['#NumDirectRefLayers[' +\n                              vps['layer_id_in_nuh[' + i + ']'] + ']'];\n           j++) {\n        var layerIdx =\n            vps['#LayerIdxInVps[' +\n                vps['#IdDirectRefLayer[' + vps['layer_id_in_nuh[' + i + ']']] +\n                '][' + j + ']'];\n        if (vps['tiles_in_use_flag[' + i + ']'] &&\n            vps['tiles_in_use_flag[' + layerIdx + ']'])\n          vps['tile_boundaries_aligned_flag[' + i + '][' + j + ']'] = bs.u(1);\n      }\n  }\n  vps['wpp_not_in_use_flag'] = bs.u(1);\n  if (!vps['wpp_not_in_use_flag'])\n    for (var i = vps['vps_base_layer_internal_flag'] ? 0 : 1;\n         i <= vps['vps_max_layers_minus1']; i++)\n      vps['wpp_in_use_flag[' + i + ']'] = bs.u(1);\n  vps['single_layer_for_non_irap_flag'] = bs.u(1);\n  vps['higher_layer_irap_skip_flag'] = bs.u(1);\n  vps['ilp_restricted_ref_layers_flag'] = bs.u(1);\n  if (vps['ilp_restricted_ref_layers_flag'])\n    for (var i = 1; i <= vps['vps_max_layers_minus1']; i++)\n      for (var j = 0; j < vps['#NumDirectRefLayers[' +\n                              vps['layer_id_in_nuh[' + i + ']'] + ']'];\n           j++)\n        if (vps['vps_base_layer_internal_flag'] ||\n            vps['#IdDirectRefLayer[' + vps['layer_id_in_nuh[' + i + ']'] +\n                '][' + j + ']'] > 0) {\n          vps['min_spatial_segment_offset_plus1[' + i + '][' + j + ']'] =\n              bs.ue();\n          if (vps['min_spatial_segment_offset_plus1[' + i + '][' + j + ']'] >\n              0) {\n            vps['ctu_based_offset_enabled_flag[' + i + '][' + j + ']'] =\n                bs.u(1);\n            if (vps['ctu_based_offset_enabled_flag[' + i + '][' + j + ']'])\n              vps['min_horizontal_ctu_offset_plus1[' + i + '][' + j + ']'] =\n                  bs.ue();\n          }\n        }\n  vps['vps_vui_bsp_hrd_present_flag'] = bs.u(1);\n  if (vps['vps_vui_bsp_hrd_present_flag']) this.vps_vui_bsp_hrd_params(bs, vps);\n  for (var i = 1; i <= vps['vps_max_layers_minus1']; i++)\n    if (vps['#NumDirectRefLayers[' + vps['layer_id_in_nuh[' + i + ']'] + ']'] ==\n        0)\n      vps['base_layer_parameter_set_compatibility_flag[' + i + ']'] = bs.u(1);\n};\n\nbitstream_parser_h265.prototype.vps_extension = function(bs, vps) {\n  if (vps['vps_max_layers_minus1'] > 0 && vps['vps_base_layer_internal_flag'])\n    this.profile_tier_level(bs, 1, 0, vps['vps_max_sub_layers_minus1'], vps)\n    vps['splitting_flag'] = bs.u(1);\n  var NumScalabilityTypes = 0;\n  for (var i = 0; i < 16; i++) {\n    vps['scalability_mask_flag[' + i + ']'] = bs.u(1)\n    NumScalabilityTypes += vps['scalability_mask_flag[' + i + ']'];\n  }\n  for (var j = 0; j < (NumScalabilityTypes - vps['splitting_flag']); j++)\n    vps['dimension_id_len_minus1[' + j + ']'] = bs.u(3);\n  vps['vps_nuh_layer_id_present_flag'] = bs.u(1);\n  for (var i = 1; i <= vps['vps_max_layers_minus1']; i++) {\n    if (vps['vps_nuh_layer_id_present_flag'])\n      vps['layer_id_in_nuh[' + i + ']'] = bs.u(6);\n    if (!vps['splitting_flag'])\n      for (var j = 0; j < NumScalabilityTypes; j++)\n        vps['dimension_id[' + i + '][' + j + ']'] =\n            bs.u(vps['dimension_id_len_minus1[' + j + ']'] + 1);\n  }\n  vps['#NumViews'] = 1;\n  for (var i = 0; i <= vps['vps_max_layers_minus1']; i++) {\n    var lId = vps['layer_id_in_nuh[' + i + ']'];\n    for (var smIdx = 0, j = 0; smIdx < 16; smIdx++) {\n      if (vps['scalability_mask_flag[' + smIdx + ']']) {\n        vps['#ScalabilityId[' + i + '][' + smIdx + ']'] =\n            vps['dimension_id[' + i + '][' + j + ']'];\n        j++;\n      } else\n        vps['#ScalabilityId[' + i + '][' + smIdx + ']'] = 0;\n    }\n    vps['#DepthLayerFlag[' + lId + ']'] =\n        vps['#ScalabilityId[' + i + '][' + 0 + ']'];\n    vps['#ViewOrderIdx[' + lId + ']'] =\n        vps['#ScalabilityId[' + i + '][' + 1 + ']'];\n    vps['#DependencyId[' + lId + ']'] =\n        vps['#ScalabilityId[' + i + '][' + 2 + ']'];\n    vps['#AuxId[' + lId + ']'] = vps['#ScalabilityId[' + i + '][' + 3 + ']'];\n    if (i > 0) {\n      var newViewFlag = 1;\n      for (var j = 0; j < i; j++)\n        if (vps['#ViewOrderIdx[' + lId + ']'] ==\n            vps['#ViewOrderIdx[' + vps['layer_id_in_nuh[' + j + ']'] + ']'])\n          newViewFlag = 0;\n      vps['#NumViews'] += newViewFlag;\n    }\n  }\n  vps['view_id_len'] = bs.u(4);\n  if (vps['view_id_len'] > 0)\n    for (var i = 0; i < NumViews; i++)\n      vps['view_id_val[' + i + ']'] = bs.u(vps['view_id_len']);\n  var NumDirectRefLayers = new Uint8Array(63);\n  for (var i = 1; i <= vps['vps_max_layers_minus1']; i++)\n    NumDirectRefLayers[i] = 0;\n  for (var j = 0; j < i; j++)\n    vps['direct_dependency_flag[' + i + '][' + j + ']'] = bs.u(1);\n  NumDirectRefLayers[j] += vps['direct_dependency_flag[' + i + '][' + j + ']'];\n\n  for (i = 0; i <= vps['vps_max_layers_minus1']; i++)\n    for (j = 0; j <= vps['vps_max_layers_minus1']; j++) {\n      vps['#DependencyFlag[' + i + '][' + j + ']'] =\n          vps['direct_dependency_flag[' + i + '][' + j + ']'];\n      for (k = 0; k < i; k++)\n        if (vps['direct_dependency_flag[' + i + '][' + k + ']'] &&\n            vps['#DependencyFlag[' + k + '][' + j + ']'])\n          vps['#DependencyFlag[' + i + '][' + j + ']'] = 1;\n    }\n\n  for (i = 0; i <= vps['vps_max_layers_minus1']; i++) {\n    var iNuhLId = vps['layer_id_in_nuh[' + i + ']'];\n    var d = 0, r = 0, p = 0;\n    for (var j = 0; j <= vps['vps_max_layers_minus1']; j++) {\n      var jNuhLid = vps['layer_id_in_nuh[' + j + ']'];\n      if (vps['direct_dependency_flag[' + i + '][' + j + ']'])\n        vps['#IdDirectRefLayer[' + iNuhLId + '][' + d + ']'] = jNuhLid;\n      d++;\n      if (vps['#DependencyFlag[' + i + '][' + j + ']'])\n        vps['#IdRefLayer[' + iNuhLId + '][' + r + ']'] = jNuhLid;\n      r++;\n      if (vps['#DependencyFlag[' + j + '][' + i + ']'])\n        vps['#IdPredictedLayerr[' + iNuhLId + '][' + p + ']'] = jNuhLid;\n      p++;\n    }\n    vps['#NumDirectRefLayers[' + iNuhLId + ']'] = d;\n    vps['#NumRefLayers[' + iNuhLId + ']'] = r;\n    vps['#NumPredictedLayers[' + iNuhLId + ']'] = p;\n    vps['#LayerIdxInVps[' + iNuhLId + ']'] = i;\n  }\n\n  for (var i = 0; i <= 63; i++) vps['#layerIdInListFlag[' + i + ']'] = 0;\n  var k = 0;\n  for (var i = 0; i <= vps['vps_max_layers_minus1']; i++) {\n    var iNuhLId = vps['layer_id_in_nuh[' + i + ']'];\n    if (vps['#NumDirectRefLayers[' + iNuhLId + ']'] == 0) {\n      vps['#TreePartitionLayerIdList[' + k + '][' + 0 + ']'] = iNuhLId;\n      for (var j = 0, h = 1; j < vps['#NumPredictedLayers[' + iNuhLId + ']'];\n           j++) {\n        var predLId = vps['#IdPredictedLayer[' + iNuhLId + '][' + j + ']'];\n        if (!vps['#layerIdInListFlag[' + predLId + ']']) {\n          vps['#TreePartitionLayerIdList[' + k + '][' + h + ']'] = predLId;\n          h++;\n          vps['#layerIdInListFlag[' + predLId + ']'] = 1\n        }\n      }\n      vps['#NumLayersInTreePartition[' + k + ']'] = h;\n      k++;\n    }\n  }\n  vps['#NumIndependentLayers'] = k;\n  if (vps['#NumIndependentLayers'] > 1) vps['num_add_layer_sets'] = bs.ue();\n  vps['#NumLayerSets'] =\n      vps['vps_num_layer_sets_minus1'] + 1 + (vps['num_add_layer_sets'] || 0);\n  var nuhLayerIdA = 0;\n  for (var i = 0; i < (vps['num_add_layer_sets'] || 0); i++) {\n    for (var j = 1; j < vps['#NumIndependentLayers']; j++)\n      vps['highest_layer_idx_plus1[' + i + '][' + j + ']'] =\n          bs.u(this.cntbits(vps['#NumLayersInTreePartition[' + j + ']'] + 1));\n    var layerNum = 0;\n    var lsIdx = vps['vps_num_layer_sets_minus1'] + 1 + i;\n    for (var treeIdx = 1; treeIdx < vps['#NumIndependentLayers']; treeIdx++)\n      for (var layerCnt = 0; layerCnt <\n           vps['highest_layer_idx_plus1[' + i + '][' + treeIdx + ']'];\n           layerCnt++) {\n        vps['#LayerSetLayerIdList[' + lsIdx + '][' + layerNum + ']'] =\n            vps['#TreePartitionLayerIdList[' + treeIdx + '][' + layerCnt + ']'];\n        layerNum++;\n        if (vps['#LayerSetLayerIdList[' + lsIdx + '][' + layerNum + ']'] >\n            nuhLayerIdA)\n          nuhLayerIdA =\n              vps['#LayerSetLayerIdList[' + lsIdx + '][' + layerNum + ']'];\n      }\n    vps['#NumLayersInIdList[' + lsIdx + ']'] = layerNum;\n  }\n\n  vps['vps_sub_layers_max_minus1_present_flag'] = bs.u(1);\n  if (vps['vps_sub_layers_max_minus1_present_flag'])\n    for (var i = 0; i <= vps['vps_max_layers_minus1']; i++)\n      vps['sub_layers_vps_max_minus1[' + i + ']'] = bs.u(3);\n  vps['max_tid_ref_present_flag'] = bs.u(1);\n  if (vps['max_tid_ref_present_flag'])\n    for (var i = 0; i < vps['vps_max_layers_minus1']; i++)\n      for (var j = i + 1; j <= vps['vps_max_layers_minus1']; j++)\n        if (vps['direct_dependency_flag[' + j + '][' + i + ']'])\n          vps['max_tid_il_ref_pics_plus1[' + i + '][' + j + ']'] = bs.u(3);\n  vps['default_ref_layers_active_flag'] = bs.u(1);\n  vps['vps_num_profile_tier_level_minus1'] = bs.ue();\n  for (var i = vps['vps_base_layer_internal_flag'] ? 2 : 1;\n       i <= vps['vps_num_profile_tier_level_minus1']; i++) {\n    vps['vps_profile_present_flag[' + i + ']'] = bs.u(1);\n    this.profile_tier_level(\n        bs, i, vps['vps_profile_present_flag[' + i + ']'],\n        vps['vps_max_sub_layers_minus1'], vps);\n  }\n\n  if (vps['#NumLayerSets'] > 1) {\n    vps['num_add_olss'] = bs.ue();\n    vps['default_output_layer_idc'] = bs.u(2);\n  }\n\n  for (var i = 0; i < vps['#NumLayerSets']; i++) {\n    var maxSlMinus1 = 0;\n    for (k = 0; k < NumLayersInIdList[i]; k++) {\n      lId = vps['#LayerSetLayerIdList[' + i + '][' + k + ']'];\n      maxSlMinus1 = Math.max(\n          maxSLMinus1,\n          vps['sub_layers_vps_max_minus1[' +\n              vps['#LayerIdxInVps[' + lId + ']'] + ']']);\n    }\n    vps['#MaxSubLayersInLayerSetMinus1[' + i + ']'] = maxSlMinus1;\n  }\n\n  vps['#NumOutputLayerSets'] =\n      (vps['num_add_olss'] || 0) + vps['#NumLayerSets'];\n  for (var i = 1; i < vps['#NumOutputLayerSets']; i++) {\n    if (vps['#NumLayerSets'] > 2 && i >= vps['#NumLayerSets'])\n      vps['layer_set_idx_for_ols_minus1[' + i + ']'] =\n          bs.u(this.cntbits(vps['#NumLayerSets'] - 1));\n    var OlsIdxToLsIdx = vps['#OlsIdxToLsIdx[' + i + ']'] =\n        i < vps['#NumLayerSets'] ?\n        i :\n        ((vps['layer_set_idx_for_ols_minus1[' + i + ']'] || 0) + 1);\n    if (i > vps['vps_num_layer_sets_minus1'] ||\n        (vps['default_output_layer_idc'] || 0) == 2)\n      for (var j = 0; j < vps['#NumLayersInIdList[' + OlsIdxToLsIdx + ']']; j++)\n        vps['#OutputLayerFlag[' + i + '][' + j + ']'] =\n            vps['output_layer_flag[' + i + '][' + j + ']'] = bs.u(1);\n    else\n      for (var j = 0; j < vps['#NumLayersInIdList[' + OlsIdxToLsIdx + ']'];\n           j++) {\n        var defaultOutputLayerIdc = (vps['default_output_layer_idc'] || 0);\n        if (defaultOutputLayerIdc == 0 ||\n            (defaultOutputLayerIdc == 1 &&\n             vps['#LayerSetLayerIdList[' + OlsIdxToLsIdx + '][' + j + ']'] ==\n                 nuhLayerIdA))\n          vps['#OutputLayerFlag[' + i + '][' + j + ']'] = 1;\n      }\n    vps['#NumOutputLayersInOutputLayerSet[' + i + ']'] = 0;\n    for (var j = 0; j < vps['#NumLayersInIdList[' + OlsIdxToLsIdx + ']']; j++) {\n      vps['#NumOutputLayersInOutputLayerSet[' + i + ']'] +=\n          vps['#OutputLayerFlag[' + i + '][' + j + ']'];\n      if (vps['#OutputLayerFlag[' + i + '][' + j + ']'])\n        vps['#OlsHighestOutputLayerId[' + i + ']'] =\n            vps['#LayerSetLayerIdList[' + OlsIdxToLsIdx + '][' + j + ']'];\n    }\n    for (var j = 0; j < vps['#NumLayersInIdList[' + OlsIdxToLsIdx + ']']; j++) {\n      vps['#NecessaryLayerFlag[' + i + '][' + j + ']'] =\n          vps['#OutputLayerFlag[' + i + '][' + j + ']'];\n      var currLayerId =\n          vps['#LayerSetLayerIdList[' + j + '][' + rLsLayerIdx + ']'];\n      for (var rLsLayerIdx = 0; rLsLayerIdx < j; rLsLayerIdx++) {\n        var refLayerId =\n            vps['#LayerSetLayerIdList[' + j + '][' + rLsLayerIdx + ']'];\n        if (vps['#DependencyFlag[' +\n                vps['#LayerIdxInVps[' + currLayerId + ']'] + '][' +\n                vps['#LayerIdxInVps[' + refLayerId + ']'] + ']'])\n          vps['#NecessaryLayerFlag[' + i + '][' + j + ']'] = 1;\n      }\n    }\n    for (var j = 0; j < vps['#NumLayersInIdList[' + OlsIdxToLsIdx + ']']; j++) {\n      if (vps['#NecessaryLayerFlag[' + i + '][' + j + ']'] &&\n          vps['vps_num_profile_tier_level_minus1'] > 0)\n        vps['profile_tier_level_idx[' + i + '][' + j + ']'] =\n            bs.u(this.cntbits(vps['vps_num_profile_tier_level_minus1'] + 1));\n    }\n    if (vps['#NumOutputLayersInOutputLayerSet[' + i + ']'] == 1 &&\n        vps['#NumDirectRefLayers[' +\n            vps['#OlsHighestOutputLayerId[' + i + ']'] + ']'] > 0)\n      vps['alt_output_layer_flag[' + i + ']'] = bs.u(1);\n  }\n  vps['vps_num_rep_formats_minus1'] = bs.ue();\n  for (var i = 0; i <= vps['vps_num_rep_formats_minus1']; i++)\n    this.rep_format(bs, i, vps);\n  if (vps['vps_num_rep_formats_minus1'] > 0)\n    vps['rep_format_idx_present_flag'] = bs.u(1);\n  if (vps['rep_format_idx_present_flag']) {\n    var nbits = this.cntbits(vps['vps_num_rep_formats_minus1'] + 1);\n    for (var i = vps['vps_base_layer_internal_flag'] ? 1 : 0;\n         i <= vps['vps_max_layers_minus1']; i++)\n      vps['vps_rep_format_idx[' + i + ']'] = bs.u(nbits);\n  }\n  vps['max_one_active_ref_layer_flag'] = bs.u(1);\n  vps['vps_poc_lsb_aligned_flag'] = bs.u(1);\n  for (var i = 1; i <= vps['vps_max_layers_minus1']; i++)\n    if (vps['#NumDirectRefLayers[' + (vps['layer_id_in_nuh[' + i + ']'] || 0) +\n            ']'] == 0)\n      vps['poc_lsb_not_present_flag[' + i + ']'] = bs.u(1);\n  this.dpb_size(bs, vps);\n  vps['direct_dep_type_len_minus2'] = bs.ue();\n  vps['direct_dependency_all_layers_flag'] = bs.u(1);\n  if (vps['direct_dependency_all_layers_flag'])\n    vps['direct_dependency_all_layers_type'] =\n        bs.u(vps['direct_dep_type_len_minus2'] + 2);\n  else {\n    for (var i = vvps['ps_base_layer_internal_flag'] ? 1 : 2;\n         i <= vps['vps_max_layers_minus1']; i++)\n      for (var j = vps['vps_base_layer_internal_flag'] ? 0 : 1; j < i; j++)\n        if (vps['direct_dependency_flag[' + i + '][' + j + ']'])\n          vps['direct_dependency_type[' + i + '][' + j + ']'] =\n              bs.u(vps['direct_dep_type_len_minus2'] + 2);\n  }\n  vps['vps_non_vui_extension_length'] = bs.ue();\n  for (var i = 1; i <= vps['vps_non_vui_extension_length']; i++)\n    vps['vps_non_vui_extension_data_byte'] = bs.u(8);\n  vps['vps_vui_present_flag'] = bs.u(1);\n  if (vps['vps_vui_present_flag']) {\n    while (!bs.bytealign()) bs.u(1);\n    this.vps_vui(bs, vps);\n  }\n};\n\nbitstream_parser_h265.prototype.vps_3d_extension = function(bs, vps) {\n  vps['cp_precision'] = bs.ue();\n  for (var n = 1; n < vps['#NumViews']; n++) {\n    i = vps['#ViewOIdxList[' + n + ']'];\n    vps['num_cp[' + i + ']'] = bs.u(6);\n    if (vps['num_cp[' + i + ']'] > 0) {\n      vps['cp_in_slice_segment_header_flag[' + i + ']'] = bs.u(1);\n      for (var m = 0; m < vps['num_cp[' + i + ']']; m++) {\n        vps['cp_ref_voi[' + i + '][' + m + ']'] = bs.ue();\n        if (!vps['cp_in_slice_segment_header_flag[' + i + ']']) {\n          var j = vps['cp_ref_voi[' + i + '][' + m + ']'];\n          vps['vps_cp_scale[' + i + '][' + j + ']'] = bs.se();\n          vps['vps_cp_off[' + i + '][' + j + ']'] = bs.se();\n          vps['vps_cp_inv_scale_plus_scale[' + i + '][' + j + ']'] = bs.se();\n          vps['vps_cp_inv_off_plus_off[' + i + '][' + j + ']'] = bs.se();\n        }\n      }\n    }\n  }\n};\n\nbitstream_parser_h265.prototype.parse_vps = function(bs, vps) {\n  vps['vps_video_parameter_set_id'] = bs.u(4);\n  vps['vps_base_layer_internal_flag'] = bs.u(1);\n  vps['vps_base_layer_available_flag '] = bs.u(1);\n  vps['vps_max_layers_minus1'] = bs.u(6);\n  vps['vps_max_sub_layers_minus1'] = bs.u(3);\n  vps['vps_temporal_id_nesting_flag'] = bs.u(1);\n  vps['vps_reserved_0xffff_16bits'] = bs.u(16);\n  this.profile_tier_level(bs, '', 1, vps['vps_max_sub_layers_minus1'], vps);\n  vps['vps_sub_layer_ordering_info_present_flag'] = bs.u(1);\n  for (var i =\n           (vps['vps_sub_layer_ordering_info_present_flag'] ?\n                0 :\n                vps['vps_max_sub_layers_minus1']);\n       i <= vps['vps_max_sub_layers_minus1']; i++) {\n    vps['vps_max_dec_pic_buffering_minus1[' + i + ']'] = bs.ue();\n    vps['vps_max_num_reorder_pics[' + i + ']'] = bs.ue();\n    vps['vps_max_latency_increase_plus1[' + i + ']'] = bs.ue();\n  }\n  vps['vps_max_layer_id'] = bs.u(6);\n  vps['vps_num_layer_sets_minus1'] = bs.ue();\n  for (var i = 1; i <= vps['vps_num_layer_sets_minus1']; i++)\n    for (var j = 0; j <= vps['vps_max_layer_id']; j++)\n      vps['layer_id_included_flag[' + i + '][' + j + ']'] = bs.u(1);\n  vps['vps_timing_info_present_flag'] = bs.u(1);\n  if (vps['vps_timing_info_present_flag']) {\n    vps['vps_num_units_in_tick'] = bs.u(32);\n    vps['vps_time_scale'] = bs.u(32);\n    vps['vps_poc_proportional_to_timing_flag'] = bs.u(1);\n    if (vps['vps_poc_proportional_to_timing_flag'])\n      vps['vps_num_ticks_poc_diff_one_minus1'] = bs.ue();\n    vps['vps_num_hrd_parameters'] = bs.ue();\n    for (var i = 0; i < vps['vps_num_hrd_parameters']; i++) {\n      vps['hrd_layer_set_idx[' + i + ']'] = bs.ue();\n      if (i > 0) vps['cprms_present_flag[' + i + ']'] = bs.u(1);\n      this.hrd_parameters(\n          bs, i, i == 0 || vps['cprms_present_flag[' + i + ']'],\n          vps['vps_max_sub_layers_minus1'], vps);\n    }\n  }\n\n  vps['vps_extension_flag'] = bs.u(1);\n  if (vps['vps_extension_flag']) {\n    while (!bs.bytealign()) bs.u(1);\n    this.vps_extension(bs, vps);\n    vps['vps_extension2_flag'] = bs.u(1);\n    if (vps['vps_extension2_flag']) {\n      vps['vps_3d_extension_flag'] = bs.u(1);\n      if (vps['vps_3d_extension_flag']) {\n        while (!bs.bytealign()) bs.u(1);\n        this.vps_3d_extension(bs, vui);\n      }\n      vps['vps_extension3_flag'] = bs.u(1);\n      if (vps['vps_extension3_flag'])\n        for (var i = 0; more_rbsp_data(bs); i++)\n          vps['vps_extension_data_flag[' + i + ']'] = bs.u(1);\n    }\n  }\n  return vps;\n};\n\nbitstream_parser_h265.prototype.short_term_ref_pic_set = function(\n    bs, stRpsIdx, num_short_term_ref_pic_sets, rps, sps) {\n  var idx = stRpsIdx == num_short_term_ref_pic_sets ? '' : '[' + stRpsIdx + ']';\n  if (stRpsIdx > 0) rps['inter_ref_pic_set_prediction_flag' + idx] = bs.u(1);\n  if (rps['inter_ref_pic_set_prediction_flag' + idx]) {\n    if (stRpsIdx == num_short_term_ref_pic_sets)\n      rps['delta_idx_minus1' + idx] = bs.ue();\n    rps['delta_rps_sign' + idx] = bs.u(1);\n    rps['abs_delta_rps_minus1' + idx] = bs.ue();\n    var RefRpsIdx = stRpsIdx - 1 -\n        (stRpsIdx == num_short_term_ref_pic_sets ?\n             rps['delta_idx_minus1' + idx] :\n             0);\n    var deltaRps = (1 - 2 * rps['delta_rps_sign' + idx]) *\n        (rps['abs_delta_rps_minus1' + idx] + 1);\n    var RefNumDeltaPocs = sps['#NumDeltaPocs[' + RefRpsIdx + ']'];\n    var NumDeltaPocs = 0;\n    for (var j = 0; j <= RefNumDeltaPocs; j++) {\n      rps['used_by_curr_pic_flag' + idx + '[' + j + ']'] = bs.u(1);\n      if (rps['used_by_curr_pic_flag' + idx + '[' + j + ']'] == 0)\n        rps['use_delta_flag' + idx + '[' + j + ']'] = bs.u(1);\n      if (rps['used_by_curr_pic_flag' + idx + '[' + j + ']'] ||\n          rps['use_delta_flag' + idx + '[' + j + ']'])\n        NumDeltaPocs++;\n    }\n    rps['#NumDeltaPocs' + idx] = NumDeltaPocs;\n  } else {\n    rps['num_negative_pics' + idx] = bs.ue();\n    rps['num_positive_pics' + idx] = bs.ue();\n    for (var j = 0; j < rps['num_negative_pics' + idx]; j++) {\n      rps['delta_poc_s0_minus1' + idx + '[' + j + ']'] = bs.ue();\n      rps['used_by_curr_pic_s0_flag' + idx + '[' + j + ']'] = bs.u(1);\n    }\n    for (var j = 0; j < rps['num_positive_pics' + idx]; j++) {\n      rps['delta_poc_s1_minus1' + idx + '[' + j + ']'] = bs.ue();\n      rps['used_by_curr_pic_s1_flag' + idx + '[' + j + ']'] = bs.u(1);\n    }\n    rps['#NumDeltaPocs' + idx] =\n        rps['num_negative_pics' + idx] + rps['num_positive_pics' + idx];\n  }\n};\n\nbitstream_parser_h265.prototype.scaling_list_data = function(bs, list) {\n  for (var sizeId = 0; sizeId < 4; sizeId++) {\n    for (var matrixId = 0; matrixId < ((sizeId == 3) ? 2 : 6); matrixId++) {\n      list['scaling_list_pred_mode_flag[' + sizeId + '][' + matrixId + ']'] =\n          bs.u(1);\n      if (!list\n              ['scaling_list_pred_mode_flag[' + sizeId + '][' + matrixId + ']'])\n        list\n            ['scaling_list_pred_matrix_id_delta[' + sizeId + '][' + matrixId +\n             ']'] = bs.ue();\n      else {\n        var nextCoef = 8;\n        var coefNum = Math.min(64, (1 << (4 + (sizeId << 1))));\n        if (sizeId > 1) {\n          var scaling_list_dc_coef_minus8 = bs.se();\n          nextCoef = scaling_list_dc_coef_minus8 + 8;\n        }\n        var rowLen = Math.sqrt(coefNum);\n        var scalingList = new Array(coefNum);\n        for (var i = 0; i < coefNum; i++) {\n          var scaling_list_delta_coef = bs.se();\n          nextCoef = (nextCoef + scaling_list_delta_coef + 256) % 256;\n          scalingList[i] = nextCoef;\n        }\n        list['scaling_list_pred_mode_flag[' + sizeId + '][' + matrixId + ']'] =\n            scalingList;\n      }\n    }\n  }\n};\n\nbitstream_parser_h265.prototype.parse_sps = function(bs, sps) {\n  sps['sps_video_parameter_set_id'] = bs.u(4);\n  sps['sps_max_sub_layers_minus1'] = bs.u(3);\n  sps['sps_temporal_id_nesting_flag'] = bs.u(1);\n  this.profile_tier_level(bs, '', 1, sps['sps_max_sub_layers_minus1'], sps);\n  sps['sps_seq_parameter_set_id'] = bs.ue();\n  sps['chroma_format_idc'] = bs.ue();\n  if (sps['chroma_format_idc'] == 3)\n    sps['separate_colour_plane_flag'] = bs.u(1);\n\n  sps['pic_width_in_luma_samples'] = bs.ue();\n  sps['pic_height_in_luma_samples'] = bs.ue();\n  sps['conformance_window_flag'] = bs.u(1);\n  if (sps['conformance_window_flag']) {\n    sps['conf_win_left_offset'] = bs.ue();\n    sps['conf_win_right_offset'] = bs.ue();\n    sps['conf_win_top_offset'] = bs.ue();\n    sps['conf_win_bottom_offset'] = bs.ue();\n  }\n  sps['bit_depth_luma_minus8'] = bs.ue();\n  sps['bit_depth_chroma_minus8'] = bs.ue();\n  sps['log2_max_pic_order_cnt_lsb_minus4'] = bs.ue();\n  sps['sps_sub_layer_ordering_info_present_flag'] = bs.u(1);\n  for (var i =\n           (sps['sps_sub_layer_ordering_info_present_flag'] ?\n                0 :\n                sps['sps_max_sub_layers_minus1']);\n       i <= sps['sps_max_sub_layers_minus1']; i++) {\n    sps['sps_max_dec_pic_buffering_minus1[' + i + ']'] = bs.ue();\n    sps['sps_max_num_reorder_pics[' + i + ']'] = bs.ue();\n    sps['sps_max_latency_increase_plus1[' + i + ']'] = bs.ue();\n  }\n  sps['log2_min_luma_coding_block_size_minus3'] = bs.ue();\n  sps['log2_diff_max_min_luma_coding_block_size'] = bs.ue();\n  sps['log2_min_transform_block_size_minus2'] = bs.ue();\n  sps['log2_diff_max_min_transform_block_size'] = bs.ue();\n  sps['max_transform_hierarchy_depth_inter'] = bs.ue();\n  sps['max_transform_hierarchy_depth_intra'] = bs.ue();\n  sps['scaling_list_enabled_flag'] = bs.u(1);\n  if (sps['scaling_list_enabled_flag']) {\n    sps['sps_scaling_list_data_present_flag'] = bs.u(1);\n    if (sps['sps_scaling_list_data_present_flag'])\n      this.scaling_list_data(bs, sps);\n  }\n  sps['amp_enabled_flag'] = bs.u(1);\n  sps['sample_adaptive_offset_enabled_flag'] = bs.u(1);\n  sps['pcm_enabled_flag'] = bs.u(1);\n  if (sps['pcm_enabled_flag']) {\n    sps['pcm_sample_bit_depth_luma_minus1'] = bs.u(4);\n    sps['pcm_sample_bit_depth_chroma_minus1'] = bs.u(4);\n    sps['log2_min_pcm_luma_coding_block_size_minus3'] = bs.ue();\n    sps['log2_diff_max_min_pcm_luma_coding_block_size'] = bs.ue();\n    sps['pcm_loop_filter_disabled_flag'] = bs.u(1);\n  }\n  sps['num_short_term_ref_pic_sets'] = bs.ue();\n  for (var i = 0; i < sps['num_short_term_ref_pic_sets']; i++)\n    this.short_term_ref_pic_set(\n        bs, i, sps['num_short_term_ref_pic_sets'], sps, sps);\n  sps['long_term_ref_pics_present_flag'] = bs.u(1);\n  if (sps['long_term_ref_pics_present_flag']) {\n    sps['num_long_term_ref_pics_sps'] = bs.ue();\n    for (var i = 0; i < sps['num_long_term_ref_pics_sps']; i++) {\n      sps['lt_ref_pic_poc_lsb_sps[' + i + ']'] =\n          bs.u(sps['log2_max_pic_order_cnt_lsb_minus4'] + 4);\n      sps['used_by_curr_pic_lt_sps_flag[' + i + ']'] = bs.u(1);\n    }\n  }\n  sps['sps_temporal_mvp_enabled_flag'] = bs.u(1);\n  sps['strong_intra_smoothing_enabled_flag'] = bs.u(1);\n  sps['vui_parameters_present_flag'] = bs.u(1);\n  if (sps['vui_parameters_present_flag']) {\n    sps['aspect_ratio_info_present_flag'] = bs.u(1);\n    if (sps['aspect_ratio_info_present_flag']) {\n      sps['aspect_ratio_idc'] = bs.u(8);\n      if (sps['aspect_ratio_idc'] == 255) {\n        sps['sar_width'] = bs.u(16);\n        sps['sar_height'] = bs.u(16);\n      }\n    }\n    sps['overscan_info_present_flag'] = bs.u(1);\n    if (sps['overscan_info_present_flag'])\n      sps['overscan_appropriate_flag'] = bs.u(1);\n    sps['video_signal_type_present_flag'] = bs.u(1);\n    if (sps['video_signal_type_present_flag']) {\n      sps['video_format'] = bs.u(3);\n      sps['video_full_range_flag'] = bs.u(1);\n      sps['colour_description_present_flag'] = bs.u(1);\n      if (sps['colour_description_present_flag']) {\n        sps['colour_primaries'] = bs.u(8);\n        sps['transfer_characteristics'] = bs.u(8);\n        sps['matrix_coeffs'] = bs.u(8);\n      }\n    }\n    sps['chroma_loc_info_present_flag'] = bs.u(1);\n    if (sps['chroma_loc_info_present_flag']) {\n      sps['chroma_sample_loc_type_top_field'] = bs.ue();\n      sps['chroma_sample_loc_type_bottom_field'] = bs.ue();\n    }\n    sps['neutral_chroma_indication_flag'] = bs.u(1);\n    sps['field_seq_flag'] = bs.u(1);\n    sps['frame_field_info_present_flag'] = bs.u(1);\n    sps['default_display_window_flag'] = bs.u(1);\n    if (sps['default_display_window_flag']) {\n      sps['def_disp_win_left_offset'] = bs.ue();\n      sps['def_disp_win_right_offset'] = bs.ue();\n      sps['def_disp_win_top_offset'] = bs.ue();\n      sps['def_disp_win_bottom_offset'] = bs.ue();\n    }\n    sps['vui_timing_info_present_flag'] = bs.u(1);\n    if (sps['vui_timing_info_present_flag']) {\n      sps['vui_num_units_in_tick'] = bs.u(32);\n      sps['vui_time_scale'] = bs.u(32);\n      sps['vui_poc_proportional_to_timing_flag'] = bs.u(1);\n      if (sps['vui_poc_proportional_to_timing_flag'])\n        sps['vui_num_ticks_poc_diff_one_minus1'] = bs.ue();\n      sps['vui_hrd_parameters_present_flag'] = bs.u(1);\n      if (sps['vui_hrd_parameters_present_flag'])\n        this.hrd_parameters(bs, '', 1, sps['sps_max_sub_layers_minus1'], sps);\n    }\n    sps['bitstream_restriction_flag'] = bs.u(1);\n    if (sps['bitstream_restriction_flag']) {\n      sps['tiles_fixed_structure_flag'] = bs.u(1);\n      sps['motion_vectors_over_pic_boundaries_flag'] = bs.u(1);\n      sps['restricted_ref_pic_lists_flag'] = bs.u(1);\n      sps['min_spatial_segmentation_idc'] = bs.ue();\n      sps['max_bytes_per_pic_denom'] = bs.ue();\n      sps['max_bits_per_min_cu_denom'] = bs.ue();\n      sps['log2_max_mv_length_horizontal'] = bs.ue();\n      sps['log2_max_mv_length_vertical'] = bs.ue();\n    }\n  }\n  sps['sps_extension_flag'] = bs.u(1);\n  if (sps['sps_extension_flag']) {\n    sps['sps_range_extension_flag'] = bs.u(1);\n    sps['sps_multilayer_extension_flag'] = bs.u(1);\n    sps['sps_3d_extension_flag'] = bs.u(1);\n    sps['sps_extension_5bits'] = bs.u(5);\n  }\n  if (sps['sps_range_extension_flag']) {\n    sps['transform_skip_rotation_enabled_flag'] = bs.u(1);\n    sps['transform_skip_context_enabled_flag'] = bs.u(1);\n    sps['implicit_rdpcm_enabled_flag'] = bs.u(1);\n    sps['explicit_rdpcm_enabled_flag'] = bs.u(1);\n    sps['extended_precision_processing_flag'] = bs.u(1);\n    sps['intra_smoothing_disabled_flag'] = bs.u(1);\n    sps['high_precision_offsets_enabled_flag'] = bs.u(1);\n    sps['persistent_rice_adaptation_enabled_flag'] = bs.u(1);\n    sps['cabac_bypass_alignment_enabled_flag'] = bs.u(1);\n  }\n  if (sps['sps_multilayer_extension_flag']) {\n    sps['inter_view_mv_vert_constraint_flag'] = bs.u(1);\n  }\n  if (sps['sps_3d_extension_flag']) {\n    for (var d = 0; d <= 1; d++) {\n      sps['iv_di_mc_enabled_flag[' + d + ']'] = bs.u(1);\n      sps['iv_mv_scal_enabled_flag[' + d + ']'] = bs.u(1);\n      if (d == 0) {\n        sps['log2_ivmc_sub_pb_size_minus3'] = bs.ue();\n        sps['iv_res_pred_enabled_flag'] = bs.u(1);\n        sps['depth_ref_enabled_flag'] = bs.u(1);\n        sps['vsp_mc_enabled_flag'] = bs.u(1);\n        sps['dbbp_enabled_flag'] = bs.u(1);\n      } else {\n        sps['tex_mc_enabled_flag'] = bs.u(1);\n        sps['log2_texmc_sub_pb_size_minus3'] = bs.ue();\n        sps['intra_contour_enabled_flag'] = bs.u(1);\n        sps['intra_dc_only_wedge_enabled_flag'] = bs.u(1);\n        sps['cqt_cu_part_pred_enabled_flag'] = bs.u(1);\n        sps['inter_dc_only_enabled_flag'] = bs.u(1);\n        sps['skip_intra_enabled_flag'] = bs.u(1);\n      }\n    }\n  }\n  if (sps['sps_extension_5bits']) {\n    for (var i = 0; more_rbsp_data(bs); i++)\n      sps['sps_extension_5bits[' + i + ']'] = bs.u(1);\n  }\n};\n\nbitstream_parser_h265.prototype.colour_mapping_octants = function(\n    pps, inpDepth, idxY, idxCb, idxCr, inpLength) {\n  if (inpDepth < pps['cm_octant_depth'])\n    pps['split_octant_flag[' + inpDepth + ']'] = bs.u(1);\n  if (pps['split_octant_flag[' + inpDepth + ']'])\n    for (var k = 0; k < 2; k++)\n      for (var m = 0; m < 2; m++)\n        for (var n = 0; n < 2; n++)\n          this.colour_mapping_octants(\n              pps, inpDepth + 1, idxY + ((PartNumY * k * inpLength) >> 1),\n              idxCb + ((m * inpLength) >> 1), idxCr + ((n * inpLength) >> 1),\n              inpLength >> 1);\n  else\n    for (var i = 0; i < 1 << pps['cm_y_part_num_log2']; i++) {\n      var idxShiftY = idxY + (i << (pps['cm_octant_depth'] - inpDepth));\n      for (var j = 0; j < 4; j++) {\n        var coded_res_flag =\n            pps['coded_res_flag[' + idxShiftY + '][' + idxCb + '][' + idxCr +\n                '][' + j + ']'] = bs.u(1);\n        if (coded_res_flag) {\n          for (var c = 0; c < 3; c++) {\n            var res_coeff_q =\n                pps['res_coeff_q[' + idxShiftY + '][' + idxCb + '][' + idxCr +\n                    '][' + j + '][' + c + ']'] = bs.ue();\n            var res_coeff_r =\n                pps['res_coeff_r[' + idxShiftY + '][' + idxCb + '][' + idxCr +\n                    '][' + j + '][' + c + ']'] = bs.ue();\n            if (res_coeff_q || res_coeff_r)\n              pps['res_coeff_s[' + idxShiftY + '][' + idxCb + '][' + idxCr +\n                  '][' + j + '][' + c + ']'] = bs.u(1);\n          }\n        }\n      }\n    }\n};\n\nbitstream_parser_h265.prototype.delta_dlt = function(pps, i) {\n  pps['num_val_delta_dlt[' + i + ']'] =\n      bs.u(pps['pps_bit_depth_for_depth_layers_minus8'] + 8);\n  if (pps['num_val_delta_dlt[' + i + ']'] > 0) {\n    if (pps['num_val_delta_dlt[' + i + ']'] > 1)\n      pps['max_diff[' + i + ']'] =\n          bs.u(pps['pps_bit_depth_for_depth_layers_minus8'] + 8);\n    var min_diff_minus1 = pps['max_diff[' + i + ']'] - 1;\n    if (pps['num_val_delta_dlt[' + i + ']'] > 2 &&\n        pps['max_diff[' + i + ']'] > 0)\n      min_diff_minus1 = pps['min_diff_minus1[' + i + ']'] =\n          bs.u(this.cntbits(pps['max_diff[' + i + ']']));\n    pps['delta_dlt_val0[' + i + ']'] =\n        bs.u(pps['pps_bit_depth_for_depth_layers_minus8'] + 8);\n    if (pps['max_diff[' + i + ']'] > min_diff_minus1 + 1) {\n      var nbits =\n          this.cntbits(pps['max_diff[' + i + ']'] - min_diff_minus1 + 2);\n      for (var k = 1; k < pps['num_val_delta_dlt[' + i + ']']; k++)\n        pps['delta_val_diff_minus_min[' + k + ']'] = bs.u(nbits);\n    }\n  }\n};\n\nbitstream_parser_h265.prototype.parse_pps = function(bs, pps) {\n  pps['pps_pic_parameter_set_id'] = bs.ue();\n  pps['pps_seq_parameter_set_id'] = bs.ue();\n  pps['dependent_slice_segments_enabled_flag'] = bs.u(1);\n  pps['output_flag_present_flag'] = bs.u(1);\n  pps['num_extra_slice_header_bits'] = bs.u(3);\n  pps['sign_data_hiding_enabled_flag'] = bs.u(1);\n  pps['cabac_init_present_flag'] = bs.u(1);\n  pps['num_ref_idx_l0_default_active_minus1'] = bs.ue();\n  pps['num_ref_idx_l1_default_active_minus1'] = bs.ue();\n  pps['init_qp_minus26'] = bs.se();\n  pps['constrained_intra_pred_flag'] = bs.u(1);\n  pps['transform_skip_enabled_flag'] = bs.u(1);\n  pps['cu_qp_delta_enabled_flag'] = bs.u(1);\n  if (pps['cu_qp_delta_enabled_flag']) pps['diff_cu_qp_delta_depth'] = bs.ue();\n  pps['pps_cb_qp_offset'] = bs.se();\n  pps['pps_cr_qp_offset'] = bs.se();\n  pps['pps_slice_chroma_qp_offsets_present_flag'] = bs.u(1);\n  pps['weighted_pred_flag'] = bs.u(1);\n  pps['weighted_bipred_flag'] = bs.u(1);\n  pps['transquant_bypass_enabled_flag'] = bs.u(1);\n  pps['tiles_enabled_flag'] = bs.u(1);\n  pps['entropy_coding_sync_enabled_flag'] = bs.u(1);\n  if (pps['tiles_enabled_flag']) {\n    pps['num_tile_columns_minus1'] = bs.ue();\n    pps['num_tile_rows_minus1'] = bs.ue();\n    pps['uniform_spacing_flag'] = bs.u(1);\n    if (pps['uniform_spacing_flag'] == 0) {\n      for (var i = 0; i < pps['num_tile_columns_minus1']; i++)\n        pps['column_width_minus1[' + i + ']'] = bs.ue();\n      for (var i = 0; i < pps['num_tile_rows_minus1']; i++)\n        pps['row_height_minus1[' + i + ']'] = bs.ue();\n    }\n    pps['loop_filter_across_tiles_enabled_flag'] = bs.u(1);\n  }\n  pps['pps_loop_filter_across_slices_enabled_flag'] = bs.u(1);\n  pps['deblocking_filter_control_present_flag'] = bs.u(1);\n  if (pps['deblocking_filter_control_present_flag']) {\n    pps['deblocking_filter_override_enabled_flag'] = bs.u(1);\n    pps['pps_deblocking_filter_disabled_flag'] = bs.u(1);\n    if (pps['pps_deblocking_filter_disabled_flag'] == 0) {\n      pps['pps_beta_offset_div2'] = bs.se();\n      pps['pps_tc_offset_div2'] = bs.se();\n    }\n  }\n  pps['pps_scaling_list_data_present_flag'] = bs.u(1);\n  if (pps['pps_scaling_list_data_present_flag'])\n    this.scaling_list_data(bs, pps);\n  pps['lists_modification_present_flag'] = bs.u(1);\n  pps['log2_parallel_merge_level_minus2'] = bs.ue();\n  pps['slice_segment_header_extension_present_flag'] = bs.u(1);\n  pps['pps_extension_present_flag'] = bs.u(1);\n  if (pps['pps_extension_present_flag']) {\n    pps['pps_range_extension_flag'] = bs.u(1);\n    pps['pps_multilayer_extension_flag'] = bs.u(1);\n    pps['pps_3d_extension_flag'] = bs.u(1);\n    pps['pps_extension_5bits'] = bs.u(5);\n  }\n  if (pps['pps_range_extension_flag']) {\n    if (pps['transform_skip_enabled_flag'])\n      pps['log2_max_transform_skip_block_size_minus2'] = bs.ue();\n    pps['cross_component_prediction_enabled_flag'] = bs.u(1);\n    pps['chroma_qp_offset_list_enabled_flag'] = bs.u(1);\n    if (pps['chroma_qp_offset_list_enabled_flag']) {\n      pps['diff_cu_chroma_qp_offset_depth'] = bs.ue();\n      pps['chroma_qp_offset_list_len_minus1'] = bs.ue();\n      for (var i = 0; i <= pps['chroma_qp_offset_list_len_minus1']; i++) {\n        pps['cb_qp_offset_list[' + i + ']'] = bs.se();\n        pps['cr_qp_offset_list[' + i + ']'] = bs.se();\n      }\n    }\n    pps['log2_sao_offset_scale_luma'] = bs.ue();\n    pps['log2_sao_offset_scale_chroma'] = bs.ue();\n  }\n  if (pps['pps_multilayer_extension_flag']) {\n    pps['poc_reset_info_present_flag'] = bs.u(1);\n    pps['pps_infer_scaling_list_flag'] = bs.u(1);\n    if (pps['pps_infer_scaling_list_flag'])\n      pps['pps_scaling_list_ref_layer_id'] = bs.u(6);\n    pps['num_ref_loc_offsets'] = bs.ue();\n    for (var i = 0; i < pps['num_ref_loc_offsets']; i++) {\n      pps['ref_loc_offset_layer_id[' + i + ']'] = bs.u(6);\n      pps['scaled_ref_layer_offset_present_flag[' + i + ']'] = bs.u(1);\n      if (pps['scaled_ref_layer_offset_present_flag[' + i + ']']) {\n        pps['scaled_ref_layer_left_offset[ ref_loc_offset_layer_id[' + i +\n            ']]'] = bs.se();\n        pps['scaled_ref_layer_top_offset[ ref_loc_offset_layer_id[' + i +\n            ']]'] = bs.se();\n        pps['scaled_ref_layer_right_offset[ ref_loc_offset_layer_id[' + i +\n            ']]'] = bs.se();\n        pps['scaled_ref_layer_bottom_offset[ ref_loc_offset_layer_id[' + i +\n            ']]'] = bs.se();\n      }\n      pps['ref_region_offset_present_flag[' + i + ']'] = bs.u(1);\n      if (pps['ref_region_offset_present_flag[' + i + ']']) {\n        pps['ref_region_left_offset[ ref_loc_offset_layer_id[' + i + ']]'] =\n            bs.se();\n        pps['ref_region_top_offset[ ref_loc_offset_layer_id[' + i + ']]'] =\n            bs.se();\n        pps['ref_region_right_offset[ ref_loc_offset_layer_id[' + i + ']]'] =\n            bs.se();\n        pps['ref_region_bottom_offset[ ref_loc_offset_layer_id[' + i + ']]'] =\n            bs.se();\n      }\n      pps['resample_phase_set_present_flag[' + i + ']'] = bs.u(1);\n      if (pps['resample_phase_set_present_flag[' + i + ']']) {\n        pps['phase_hor_luma[ ref_loc_offset_layer_id[' + i + ']]'] = bs.ue();\n        pps['phase_ver_luma[ ref_loc_offset_layer_id[' + i + ']]'] = bs.ue();\n        pps['phase_hor_chroma_plus8[ ref_loc_offset_layer_id[' + i + ']]'] =\n            bs.ue();\n        pps['phase_ver_chroma_plus8[ ref_loc_offset_layer_id[' + i + ']]'] =\n            bs.ue();\n      }\n    }\n    pps['colour_mapping_enabled_flag'] = bs.u(1);\n    if (pps['colour_mapping_enabled_flag']) {\n      pps['num_cm_ref_layers_minus1'] = bs.ue();\n      for (var i = 0; i <= pps['num_cm_ref_layers_minus1']; i++)\n        pps['cm_ref_layer_id[' + i + ']'] = bs.u(6);\n      pps['cm_octant_depth'] = bs.u(2);\n      pps['cm_y_part_num_log2'] = bs.u(2);\n      pps['luma_bit_depth_cm_input_minus8'] = bs.ue();\n      pps['chroma_bit_depth_cm_input_minus8'] = bs.ue();\n      pps['luma_bit_depth_cm_output_minus8'] = bs.ue();\n      pps['chroma_bit_depth_cm_output_minus8'] = bs.ue();\n      pps['cm_res_quant_bits'] = bs.u(2);\n      pps['cm_delta_flc_bits_minus1'] = bs.u(2);\n      if (pps['cm_octant_depth'] == 1) {\n        pps['cm_adapt_threshold_u_delta'] = bs.se();\n        pps['cm_adapt_threshold_v_delta'] = bs.se();\n      }\n      this.colour_mapping_octants(pps, 0, 0, 0, 0, 1 << pps['cm_octant_depth']);\n    }\n  }\n  if (pps['pps_3d_extension_flag']) {\n    pps['dlts_present_flag'] = bs.u(1);\n    if (pps['dlts_present_flag']) {\n      pps['pps_depth_layers_minus1'] = bs.u(6);\n      pps['pps_bit_depth_for_depth_layers_minus8'] = bs.u(4);\n      for (var i = 0; i <= pps['pps_bit_depth_for_depth_layers_minus8']; i++) {\n        pps['dlt_flag[' + i + ']'] = bs.u(1);\n        if (pps['dlt_flag[' + i + ']']) {\n          pps['dlt_pred_flag[' + i + ']'] = bs.u(1);\n          if (!pps['dlt_pred_flag[' + i + ']'])\n            pps['dlt_val_flags_present_flag[' + i + ']'] = bs.u(1);\n          if (pps['dlt_val_flags_present_flag[' + i + ']'])\n            for (var j = 0; j <=\n                 (1 << (pps['pps_bit_depth_for_depth_layers_minus8'] + 8)) - 1;\n                 j++)\n              pps['dlt_value_flag[' + i + '][' + j + ']'] = bs.u(1);\n          else\n            this.delta_dlt(pps, i);\n        }\n      }\n    }\n  }\n  if (pps['pps_extension_5bits']) {\n    for (var i = 0; more_rbsp_data(bs); i++)\n      pps['pps_extension_data_flag[' + i + ']'] = bs.u(1);\n  }\n};\n\nbitstream_parser_h265.prototype.slice_segment_header = function(bs, sh) {\n  sh['first_slice_segment_in_pic_flag'] = bs.u(1);\n  if (sh['nal_unit_type'] >= 16 && sh['nal_unit_type'] <= 23)\n    sh['no_output_of_prior_pics_flag'] = bs.u(1);\n  sh['slice_pic_parameter_set_id'] = bs.ue();\n\n  this.pps = this.find_nalu(\n      [34], 'pps_pic_parameter_set_id', sh['slice_pic_parameter_set_id']);\n  if (this.pps == null) return sh;\n\n  this.sps = this.find_nalu(\n      [33], 'sps_seq_parameter_set_id', this.pps['pps_seq_parameter_set_id']);\n\n  if (sh['first_slice_segment_in_pic_flag'] == 0) {\n    if (this.pps['dependent_slice_segments_enabled_flag'])\n      sh['dependent_slice_segment_flag'] = bs.u(1);\n    var MaxCUWidth = 1\n        << (this.sps['log2_min_luma_coding_block_size_minus3'] + 3 +\n            this.sps['log2_diff_max_min_luma_coding_block_size']);\n    var NumCTUs = Math.floor(\n                      (this.sps['pic_width_in_luma_samples'] + MaxCUWidth - 1) /\n                      MaxCUWidth) *\n        Math.floor(\n            (this.sps['pic_height_in_luma_samples'] + MaxCUWidth - 1) /\n            MaxCUWidth);\n    var n = 0;\n    while (NumCTUs > (1 << n)) n++;\n    sh['slice_segment_address'] = bs.u(n);\n  }\n\n  if (!sh['dependent_slice_segment_flag']) {\n    for (var i = 0; i < this.pps['num_extra_slice_header_bits']; i++)\n      sh['slice_reserved_flag[' + i + ']'] = bs.u(1);\n    sh['slice_type'] = bs.ue();\n    if (this.pps['output_flag_present_flag']) sh['pic_output_flag'] = bs.u(1);\n\n    if (this.sps == null) return sh;\n\n    if (this.sps['separate_colour_plane_flag']) sh['colour_plane_id'] = bs.u(2);\n\n    var NumPicTotalCurr = 0;\n    if (sh['nal_unit_type'] != 19 && sh['nal_unit_type'] != 20) {\n      sh['slice_pic_order_cnt_lsb'] =\n          bs.u(this.sps['log2_max_pic_order_cnt_lsb_minus4'] + 4);\n      sh['short_term_ref_pic_set_sps_flag'] = bs.u(1);\n      if (sh['short_term_ref_pic_set_sps_flag'] == 0) {\n        this.short_term_ref_pic_set(\n            bs, this.sps['num_short_term_ref_pic_sets'],\n            this.sps['num_short_term_ref_pic_sets'], sh, this.sps);\n        NumPicTotalCurr = sh['#NumDeltaPocs'];\n      } else if (this.sps['num_short_term_ref_pic_sets'] > 1) {\n        sh['short_term_ref_pic_set_idx'] =\n            bs.u(cntbits(this.sps['num_short_term_ref_pic_sets']));\n        NumPicTotalCurr =\n            this.sps['#NumDeltaPocs[' + sh['short_term_ref_pic_set_idx'] + ']'];\n      }\n\n      if (this.sps['long_term_ref_pics_present_flag']) {\n        var num_long_term_sps = 0;\n        if (this.sps['num_long_term_ref_pics_sps'] > 0)\n          sh['num_long_term_sps'] = num_long_term_sps = bs.ue();\n        sh['num_long_term_pics'] = bs.ue();\n        var nbits = cntbits(this.sps['num_long_term_ref_pics_sps']);\n        for (var i = 0; i < num_long_term_sps + sh['num_long_term_pics']; i++) {\n          if (i < num_long_term_sps) {\n            if (this.sps['num_long_term_ref_pics_sps'] > 1) {\n              sh['lt_idx_sps[' + i + ']'] = bs.u(nbits);\n              NumPicTotalCurr += this.sps\n                                     ['used_by_curr_pic_lt_sps_flag[' +\n                                      sh['lt_idx_sps[' + i + ']'] + ']'];\n            }\n          } else {\n            sh['poc_lsb_lt[' + i + ']'] =\n                bs.u(this.sps['log2_max_pic_order_cnt_lsb_minus4'] + 4);\n            sh['used_by_curr_pic_lt_flag[' + i + ']'] = bs.u(1);\n            NumPicTotalCurr += sh['used_by_curr_pic_lt_flag[' + i + ']'];\n          }\n          sh['delta_poc_msb_present_flag[' + i + ']'] = bs.u(1);\n          if (sh['delta_poc_msb_present_flag[' + i + ']'])\n            sh['delta_poc_msb_cycle_lt[' + i + ']'] = bs.ue();\n        }\n      }\n\n      if (this.sps['sps_temporal_mvp_enabled_flag'])\n        sh['slice_temporal_mvp_enabled_flag'] = bs.u(1);\n    }\n\n    if (this.sps['sample_adaptive_offset_enabled_flag']) {\n      sh['slice_sao_luma_flag'] = bs.u(1);\n      if (this.sps['chroma_format_idc'] > 0)\n        sh['slice_sao_chroma_flag'] = bs.u(1);\n    }\n\n    if (sh['slice_type'] == 1 || sh['slice_type'] == 0) {\n      sh['num_ref_idx_active_override_flag'] = bs.u(1);\n      var num_ref_idx_l0_active_minus1 =\n          this.pps['num_ref_idx_l0_default_active_minus1'];\n      var num_ref_idx_l1_active_minus1 =\n          this.pps['num_ref_idx_l1_default_active_minus1'];\n      if (sh['num_ref_idx_active_override_flag']) {\n        sh['num_ref_idx_l0_active_minus1'] = num_ref_idx_l0_active_minus1 =\n            bs.ue();\n        if (sh['slice_type'] == 0)\n          sh['num_ref_idx_l1_active_minus1'] = num_ref_idx_l1_active_minus1 =\n              bs.ue();\n      }\n      if (this.pps['lists_modification_present_flag'] && NumPicTotalCurr > 1) {\n        var nbits = cntbits(NumPicTotalCurr);\n        sh['ref_pic_list_modification_flag_l0'] = bs.u(1);\n        if (sh['ref_pic_list_modification_flag_l0']) {\n          for (var i = 0; i <= num_ref_idx_l0_active_minus1; i++)\n            sh['list_entry_l0[' + i + ']'] = bs.u(nbits);\n        }\n        if (sh['slice_type'] == 0) {\n          sh['ref_pic_list_modification_flag_l1'] = bs.u(1);\n          if (sh['ref_pic_list_modification_flag_l1']) {\n            for (var i = 0; i <= num_ref_idx_l1_active_minus1; i++)\n              sh['list_entry_l1[' + i + ']'] = bs.u(nbits);\n          }\n        }\n      }\n      if (sh['slice_type'] == 0) sh['mvd_l1_zero_flag'] = bs.u(1);\n      if (this.pps['cabac_init_present_flag']) sh['cabac_init_flag'] = bs.u(1);\n      if (sh['slice_temporal_mvp_enabled_flag']) {\n        var collocated_from_l0_flag = 1;\n        if (sh['slice_type'] == 0)\n          sh['collocated_from_l0_flag'] = collocated_from_l0_flag = bs.u(1);\n        if ((collocated_from_l0_flag && num_ref_idx_l0_active_minus1 > 0) ||\n            (collocated_from_l0_flag == 0 && num_ref_idx_l1_active_minus1 > 0))\n          sh['collocated_ref_idx'] = bs.ue();\n      }\n      if ((this.pps['weighted_pred_flag'] && sh['slice_type'] == 1) ||\n          (this.pps['weighted_bipred_flag'] && sh['slice_type'] == 0)) {\n        sh['luma_log2_weight_denom'] = bs.ue();\n        if ('chroma_format_idc' in this.sps &&\n            this.sps['chroma_format_idc'] != 0)\n          sh['delta_chroma_log2_weight_denom'] = bs.se();\n        for (var i = 0; i <= num_ref_idx_l0_active_minus1; i++)\n          sh['luma_weight_l0_flag[' + i + ']'] = bs.u(1);\n        if (this.sps['chroma_format_idc'] != 0) {\n          for (var i = 0; i <= num_ref_idx_l0_active_minus1; i++)\n            sh['chroma_weight_l0_flag[' + i + ']'] = bs.u(1);\n        }\n        for (var i = 0; i <= num_ref_idx_l0_active_minus1; i++) {\n          if (sh['luma_weight_l0_flag[' + i + ']']) {\n            sh['delta_luma_weight_l0[' + i + ']'] = bs.se();\n            sh['luma_offset_l0[' + i + ']'] = bs.se();\n          }\n          if (sh['chroma_weight_l0_flag[' + i + ']']) {\n            for (var j = 0; j < 2; j++) {\n              sh['delta_chroma_weight_l0[' + i + '][' + j + ']'] = bs.se();\n              sh['delta_chroma_offset_l0[' + i + '][' + j + ']'] = bs.se();\n            }\n          }\n        }\n        if (sh['slice_type'] == 0) {\n          for (var i = 0; i <= num_ref_idx_l1_active_minus1; i++)\n            sh['luma_weight_l1_flag[' + i + ']'] = bs.u(1);\n          if (this.sps['chroma_format_idc'] != 0)\n            for (var i = 0; i <= num_ref_idx_l1_active_minus1; i++)\n              sh['chroma_weight_l1_flag[' + i + ']'] = bs.u(1);\n          for (var i = 0; i <= num_ref_idx_l1_active_minus1; i++) {\n            if (sh['luma_weight_l1_flag[' + i + ']']) {\n              sh['delta_luma_weight_l1[' + i + ']'] = bs.se();\n              sh['luma_offset_l1[' + i + ']'] = bs.se();\n            }\n            if (sh['chroma_weight_l1_flag[' + i + ']']) {\n              for (var j = 0; j < 2; j++) {\n                sh['delta_chroma_weight_l1[' + i + '][' + j + ']'] = bs.se();\n                sh['delta_chroma_offset_l1[' + i + '][' + j + ']'] = bs.se();\n              }\n            }\n          }\n        }\n      }\n      sh['five_minus_max_num_merge_cand'] = bs.ue();\n    }\n\n    sh['slice_qp_delta'] = bs.se();\n    if (this.pps['pps_slice_chroma_qp_offsets_present_flag']) {\n      sh['slice_cb_qp_offset'] = bs.se();\n      sh['slice_cr_qp_offset'] = bs.se();\n    }\n\n    if (this.pps['deblocking_filter_override_enabled_flag'])\n      sh['deblocking_filter_override_flag'] = bs.u(1);\n    if (sh['deblocking_filter_override_flag'] || 0) {\n      sh['slice_deblocking_filter_disabled_flag'] = bs.u(1);\n      if (sh['slice_deblocking_filter_disabled_flag'] == 0) {\n        sh['slice_beta_offset_div2'] = bs.se();\n        sh['slice_tc_offset_div2'] = bs.se();\n      }\n    }\n\n    if (this.pps['pps_loop_filter_across_slices_enabled_flag'] &&\n        (sh['slice_sao_luma_flag'] || sh['slice_sao_chroma_flag'] ||\n         (sh['slice_deblocking_filter_disabled_flag'] || 0) == 0))\n      sh['slice_loop_filter_across_slices_enabled_flag'] = bs.u(1);\n  }\n\n  if (this.pps['tiles_enabled_flag'] ||\n      this.pps['entropy_coding_sync_enabled_flag']) {\n    sh['num_entry_point_offsets'] = bs.ue();\n    if (sh['num_entry_point_offsets'] > 0) {\n      sh['offset_len_minus1'] = bs.ue();\n      for (var i = 0; i < sh['num_entry_point_offsets']; i++)\n        sh['entry_point_offset_minus1[' + i + ']'] =\n            bs.u(sh['offset_len_minus1'] + 1);\n    }\n  }\n\n  if (this.pps['slice_segment_header_extension_present_flag']) {\n    sh['slice_segment_header_extension_length'] = bs.ue();\n    for (var i = 0; i < sh['slice_segment_header_extension_length']; i++)\n      sh['slice_segment_header_extension_data_byte[' + i + ']'] = bs.u(8);\n  }\n};\n\nbitstream_parser_h265.prototype.parse_sei = function(bs) {\n  var seis = {};\n  return seis;\n};","export default class Renderer {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.context = this.canvas.getContext('2d');\n        this.img = this.context.createImageData(canvas.width, canvas.height);\n        let rgba = this.img.data;\n        for (let y = 0; y < this.img.height; y += 2) {\n            const p0 = y * this.img.width;\n            const p1 = p0 + this.img.width;\n            for (let x = 0; x < this.img.width; x += 2) {\n                rgba[(p0 + x) * 4 + 3] = 255;\n                rgba[(p0 + x) * 4 + 7] = 255;\n                rgba[(p1 + x) * 4 + 3] = 255;\n                rgba[(p1 + x) * 4 + 7] = 255;\n            }\n        }\n    }\n\n    converter(frame) {\n        let img = this.img;\n        let rgba = img.data;\n        for (let y = 0; y < img.height; y += 2) {\n            const p0 = y * img.width;\n            const p1 = p0 + img.width;\n            const p4 = p0 / 4;\n            for (let x = 0; x < img.width; x += 2) {\n                const y0 = 1.164 * (frame.y[p0 + x] - 16);\n                const y1 = 1.164 * (frame.y[p0 + x + 1] - 16);\n                const y2 = 1.164 * (frame.y[p1 + x] - 16);\n                const y3 = 1.164 * (frame.y[p1 + x + 1] - 16);\n                const u = frame.u[p4 + x / 2];\n                const v = frame.v[p4 + x / 2];\n                const t0 = 1.596 * (v - 128);\n                const t1 = -0.391 * (u - 128) - 0.813 * (v - 128);\n                const t2 = 2.018 * (u - 128);\n                const p2 = (p0 + x) * 4;\n                const p3 = (p1 + x) * 4;\n                rgba[p2] = y0 + t0;\n                rgba[p2 + 1] = y0 + t1;\n                rgba[p2 + 2] = y0 + t2;\n                rgba[p2 + 4] = y1 + t0;\n                rgba[p2 + 5] = y1 + t1;\n                rgba[p2 + 6] = y1 + t2;\n                rgba[p3] = y2 + t0;\n                rgba[p3 + 1] = y2 + t1;\n                rgba[p3 + 2] = y2 + t2;\n                rgba[p3 + 4] = y3 + t0;\n                rgba[p3 + 5] = y3 + t1;\n                rgba[p3 + 6] = y3 + t2;\n            }\n        }\n\n        return img;\n    }\n}\n","import { mergeBuffer, readBuffer } from '../utils';\nimport create_parser from './bsparser';\nimport Renderer from './renderer';\n\nlet FrameType;\n(function FrameTypeFn(FrameType) {\n    FrameType[(FrameType['Key'] = 1)] = 'Key';\n    FrameType[(FrameType['IDR'] = 1)] = 'IDR';\n    FrameType[(FrameType['I'] = 2)] = 'I';\n    FrameType[(FrameType['P'] = 3)] = 'P';\n    FrameType[(FrameType['B'] = 4)] = 'B';\n    FrameType[(FrameType['Unknown'] = 255)] = 'Unknown';\n})(FrameType || (FrameType = {}));\n\nconst nalStart = new Uint8Array([0x00, 0x00, 0x00, 0x01]);\nexport default class Decoder {\n    constructor(flv) {\n        const { debug, options, player } = flv;\n        this.worker = new Worker(options.workerPath);\n        this.h264Parser = create_parser('h264');\n        this.h264DecoderInitialized = false;\n\n        let id = 0;\n\n        let sps = null;\n        let pps = null;\n\n        const nalus = [];\n        flv.on('videoData', nalu => {\n            const readNalu = readBuffer(nalu);\n            readNalu(4);\n            const nalHeader = readNalu(1)[0];\n            const naluType = nalHeader & 31;\n\n            switch (naluType) {\n                case 1:\n                case 5: {\n                    const rawdata = mergeBuffer(sps, pps, nalStart, nalu);\n                    const packet = {\n                        status: 0,\n                        data: rawdata.buffer,\n                        frame_type: 255,\n                    };\n        \n                    if (!this.h264DecoderInitialized) {\n                        this.h264DecoderInitialized = true;\n                        this.renderer = new Renderer(player.canvas);\n                        this.h264setup(options.h264Configuration, packet).then(\n                            frame => {\n                                console.log(frame);\n                                if (frame.data) {\n                                    const videoFrame = this.renderer.converter(frame);\n                                    flv.emit('videoFrame', videoFrame);\n                                }\n                            },\n                            err => {\n                                debug.warn(false, '[h264]: decode failed', err);\n                            },\n                        );\n                    } else {\n                        this.h264decode(packet).then(\n                            frame => {\n                                console.log(frame);\n                                if (frame.data) {\n                                    const videoFrame = this.renderer.converter(frame);\n                                    flv.emit('videoFrame', videoFrame);\n                                }\n                            },\n                            err => {\n                                debug.warn(false, '[h264]: decode failed', err);\n                            },\n                        );\n                    }\n                    break;\n                }\n                case 7:\n                    sps = nalu;\n                    break;\n                case 8:\n                    pps = nalu;\n                    break;\n                default:\n                    debug.warn(false, `[NALU]: Found extra nalu type ${naluType}`);\n                    break;\n            }\n        });\n\n        this.test = function test() {\n            const data = nalus.shift();\n            console.log(data);\n            this.h264Parser.parse(data);\n            let naluInfo = this.h264Parser.next();\n            if (!naluInfo) return;\n            let rawdata = null;\n            switch (naluInfo['@type']) {\n                case 'IDR':\n                case 'I':\n                case 'B':\n                case 'P': {\n                    rawdata = mergeBuffer(sps, pps, nalStart, naluInfo['@data']);\n                    break;\n                }\n                case 'SPS':\n                    sps = mergeBuffer(nalStart, naluInfo['@data']);\n                    console.log('sps', sps);\n                    break;\n                case 'PPS':\n                    pps = mergeBuffer(nalStart, naluInfo['@data']);\n                    console.log('pps', pps);\n                    break;\n                default:\n                    break;\n            }\n\n            // console.log(rawdata);\n            // if (!rawdata) return;\n        };\n    }\n\n    h264setup(cfg, packet) {\n        return new Promise((resolve, reject) => {\n            this.worker.onmessage = ev => {\n                if (ev.data.status === 0) {\n                    resolve(ev.data);\n                } else {\n                    reject(ev.data);\n                }\n            };\n            this.worker.postMessage({\n                params: cfg,\n                packet: packet,\n            });\n        });\n    }\n\n    h264decode(packet) {\n        return new Promise((resolve, reject) => {\n            this.worker.onmessage = ev => {\n                if (ev.data.status === 0) {\n                    resolve(ev.data);\n                } else {\n                    reject(ev.data);\n                }\n            };\n\n            this.worker.postMessage(packet, [packet.data]);\n        });\n    }\n}\n","export default function fetchRequest(flv, url) {\n    flv.emit('streamStart');\n    fetch(url, {\n        headers: flv.options.headers,\n    }).then(response => {\n        const reader = response.body.getReader();\n\n        flv.on('destroy', () => {\n            reader.cancel();\n        });\n\n        flv.on('streamCancel', () => {\n            reader.cancel();\n            flv.debug.log('stream-cancel');\n        });\n\n        (function read() {\n            reader\n                .read()\n                .then(({ done, value }) => {\n                    if (done) {\n                        flv.emit('streamEnd');\n                        return;\n                    }\n                    flv.emit('streaming', new Uint8Array(value));\n                    read();\n                })\n                .catch(error => {\n                    throw error;\n                });\n        })();\n    });\n}\n","export default function mozXhrRequest(flv, url) {\n    flv.emit('streamStart');\n    const {\n        events: { proxy },\n        options: { headers },\n    } = flv;\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'moz-chunked-arraybuffer';\n    Object.keys(headers).forEach(key => {\n        xhr.setRequestHeader(key, headers[key]);\n    });\n\n    proxy(xhr, 'readystatechange', () => {\n        flv.emit('readystatechange', xhr);\n    });\n\n    proxy(xhr, 'progress', () => {\n        flv.emit('streaming', new Uint8Array(xhr.response));\n    });\n\n    proxy(xhr, 'loadend', () => {\n        flv.emit('streamEnd');\n    });\n\n    proxy(xhr, 'error', error => {\n        throw error;\n    });\n\n    flv.on('destroy', () => {\n        xhr.abort();\n    });\n\n    flv.on('streamCancel', () => {\n        xhr.abort();\n        flv.debug.log('stream-cancel');\n    });\n\n    xhr.send();\n}\n","export default function xhrRequest(flv, url) {\n    flv.emit('streamStart');\n    const {\n        events: { proxy },\n        options: { headers },\n    } = flv;\n    const textEncoder = new TextEncoder();\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'text';\n    Object.keys(headers).forEach(key => {\n        xhr.setRequestHeader(key, headers[key]);\n    });\n    let index = 0;\n\n    proxy(xhr, 'readystatechange', () => {\n        flv.emit('readystatechange', xhr);\n    });\n\n    proxy(xhr, 'progress', () => {\n        const rawText = xhr.responseText.substr(index);\n        index = xhr.responseText.length;\n        flv.emit('streaming', textEncoder.encode(rawText, { stream: true }));\n    });\n\n    proxy(xhr, 'loadend', () => {\n        flv.emit('streaming', textEncoder.encode('', { stream: false }));\n        flv.emit('streamEnd');\n    });\n\n    proxy(xhr, 'error', error => {\n        throw error;\n    });\n\n    flv.on('destroy', () => {\n        xhr.abort();\n    });\n\n    flv.on('streamCancel', () => {\n        xhr.abort();\n        flv.debug.log('stream-cancel');\n    });\n\n    xhr.send();\n}\n","export default function readFile(flv, file) {\n    flv.emit('streamStart');\n    const { proxy } = flv.events;\n    const reader = new FileReader();\n    proxy(reader, 'load', e => {\n        const buffer = e.target.result;\n        flv.emit('streamEnd', new Uint8Array(buffer));\n    });\n    reader.readAsArrayBuffer(file);\n}\n","import fetchRequest from './fetchRequest';\nimport mozXhrRequest from './mozXhrRequest';\nimport xhrRequest from './xhrRequest';\nimport readFile from './readFile';\n\nfunction supportsXhrResponseType(type) {\n    try {\n        const tmpXhr = new XMLHttpRequest();\n        tmpXhr.responseType = type;\n        return tmpXhr.responseType === type;\n    } catch (e) {\n        return false;\n    }\n}\n\nexport default class Stream {\n    constructor(flv) {\n        const { url } = flv.options;\n        this.transportFactory = Stream.getStreamFactory(url);\n        this.transportFactory(flv, url);\n    }\n\n    static getStreamFactory(url) {\n        if (url instanceof File) {\n            return readFile;\n        }\n\n        if (\n            typeof Response !== 'undefined' &&\n            Object.prototype.hasOwnProperty.call(Response.prototype, 'body') &&\n            typeof Headers === 'function'\n        ) {\n            return fetchRequest;\n        }\n\n        const mozChunked = 'moz-chunked-arraybuffer';\n        if (supportsXhrResponseType(mozChunked)) {\n            return mozXhrRequest;\n        }\n\n        return xhrRequest;\n    }\n}\n","import Emitter from 'tiny-emitter';\nimport optionValidator from './utils/optionValidator';\nimport Debug from './debug';\nimport Player from './player';\nimport Demuxer from './demuxer';\nimport Decoder from './decoder';\nimport Stream from './stream';\n\nlet id = 0;\nclass FlvPlayer extends Emitter {\n    constructor(options) {\n        super();\n        this.options = Object.assign({}, FlvPlayer.options, options);\n        optionValidator(this);\n\n        this.debug = new Debug(this);\n        this.player = new Player(this);\n        this.decoder = new Decoder(this);\n        this.demuxer = new Demuxer(this);\n        this.stream = new Stream(this);\n\n        id += 1;\n        this.id = id;\n        FlvPlayer.instances.push(this);\n    }\n\n    static get options() {\n        return {\n            url: '',\n            container: null,\n            debug: false,\n            live: false,\n            controls: true,\n            width: 400,\n            height: 300,\n            workerPath: 'openh264_decoder.js',\n            h264Configuration: {},\n        };\n    }\n\n    static get version() {\n        return '__VERSION__';\n    }\n\n    static get env() {\n        return '__ENV__';\n    }\n\n    destroy() {\n        FlvPlayer.instances.splice(FlvPlayer.instances.indexOf(this), 1);\n        this.emit('destroy');\n    }\n}\n\nObject.defineProperty(FlvPlayer, 'instances', {\n    value: [],\n});\n\nexport default FlvPlayer;\n"],"names":["_typeof","FlvPlayerError","message","context","Error","captureStackTrace","constructor","name","errorHandle","condition","msg","readBuffer","buffer","index","read","length","tempUint8","Uint8Array","i","mergeBuffer","buffers","Cons","reduce","pre","val","merge","byteLength","set","readDouble","array","view","DataView","ArrayBuffer","forEach","b","setUint8","getFloat64","readBoolean","readString","String","fromCharCode","call","readBufferSum","uint","totle","num","flv","options","container","url","HTMLDivElement","instances","every","item","File","Debug","debug","log","args","console","warn","error","Player","classList","add","canvas","document","createElement","width","height","getContext","fillStyle","fillRect","appendChild","on","amf2","metaData","videoFrames","videoFrame","push","putImageData","nalStart","Demuxer","scripMeta","AVCDecoderConfigurationRecord","AudioSpecificConfig","uint8","header","loaded","parse","emit","readable","Object","create","signature","version","flags","headersize","prevTagSize","restIndex","tag","tagType","dataSize","ts2","ts1","ts0","ts3","timestamp","streamID","body","demuxerScripTag","demuxerVideoTag","demuxerAudioTag","readScripTag","amf1","type","size","string","getValue","value","undefined","valueLength","lastType","nameLength","itemType","keys","frameType","codecID","packet","slice","AVCPacketType","getUint8","CompositionTime","getUint32","pts","packetData","subarray","readDcr","result","configurationVersion","AVCProfileIndication","profile_compatibility","AVCLevelIndication","lengthSizeMinusOne","numOfSequenceParameterSets","sequenceParameterSetLength","SPS","numOfPictureParameterSets","pictureParameterSetLength","PPS","readVideo","soundFormat","soundRate","soundSize","soundType","packetType","audioObjectType","samplingFrequencyIndex","channelConfiguration","ADTSLen","ADTSHeader","ADTSBody","data","g_headers","create_parser","fmt","file_parser_ivf","indexOf","file_parser_annexb","bitstream","Array","bytepos","bits","nbits","trailing_zero_bytes","trailing_zero_bits","stopbit","load","onebyte","bitpos","bitsleft","u","n","r","s","sign","ue","leadingzeros","se","codenum","codeval","uvlc","leading_zeros","le","bs","leb128","byte","ns","w","cntbits","m","v","extra_bit","su","int2str","x","base","padding","padend","str","toString","pad","join","more_rbsp_data","bytes2str","bytes","bytes2word","offset","bytes2dword","in_range","clip","min","max","store_header","h","file_parser_base","parser","recv","addr","next_header_idx","next","get","id","ivf_header_length","ivf_header","frame_size","num_needed_bytes","prototype","pos","num_read_bytes","Math","parse_ivf_header","fourcc","bitstream_parser_vp8","bitstream_parser_vp9","bitstream_parser_av1","alert","code","first","bitstream_parser_h264","bitstream_parser_h265","cnt3","frame_num","ref_idx","color_config","ref","find_ref","MiCols","Sb64Cols","minLog2TileCols","maxLog2TileCols","tile_cols_log2","ref_mask","color_space","idx","obu_types","frame_type","KEY_FRAME","INTER_FRAME","INTRA_ONLY_FRAME","SWITCH_FRAME","ref_frame_type","NONE","INTRA_FRAME","LAST_FRAME","LAST2_FRAME","LAST3_FRAME","GOLDEN_FRAME","BWDREF_FRAME","ALTREF2_FRAME","ALTREF_FRAME","NUM_REF_FRAMES","REFS_PER_FRAME","SELECT_SCREEN_CONTENT_TOOLS","SELECT_INTEGER_MV","PRIMARY_REF_NONE","MAX_SEGMENTS","IDENTITY","TRANSLATION","ROTZOOM","AFFINE","WARPEDMODEL_PREC_BITS","SeenFrameHeader","FeatureEnabled","from","fill","FeatureData","seq_header","obu_header_bitpos","parse_obu_header","payload_bitpos","sequence_header_obu","frame_obu","payload_bits","trailing_bits","frame_header_obu","uncompressed_header","idLen","allFrames","frame_presentation_time_length_minus_1","ref_frame","equal_picture_interval","opPtIdc","inTemporalLayer","inSpatialLayer","render_size","superres_params","setup_past_independence","load_previous","tile_info","quantization_params","segmentation_params","delta_q_params","delta_lf_params","sid","get_qindex","loop_filter_params","cdef_params","lr_params","skip_mode_params","global_motion_params","film_grain_params","frame_width_bits_minus_1","frame_height_bits_minus_1","get_relative_dist","a","diff","MiRows","sbCols","sbRows","sbShift","sbSize","maxTileWidthSb","maxTileAreaSb","tile_log2","maxLog2TileRows","minLog2Tiles","widestTileSb","startSb","maxWidth","sizeSb","maxTileHeightSb","maxHeight","blkSize","target","k","read_delta_q","delta_q","delta_coded","Segmentation_Feature_Bits","Segmentation_Feature_Signed","Segmentation_Feature_Max","j","enabled","bitsToRead","limit","clippedValue","ignoreDeltaQ","segmentId","qindex","usesChromaLr","NumPlanes","skipModeAllowed","forwardIdx","backwardIdx","forwardHint","backwardHint","pow","refHint","secondForwardIdx","secondForwardHint","read_global_param","GM_ABS_ALPHA_BITS","GM_ALPHA_PREC_BITS","GM_ABS_TRANS_ONLY_BITS","GM_ABS_TRANS_BITS","GM_TRANS_PREC_BITS","GM_TRANS_ONLY_PREC_BITS","absBits","precBits","precDiff","round","sub","mx","decode_signed_subexp_with_ref","low","high","decode_unsigned_subexp_with_ref","decode_subexp","inverse_recenter","numSyms","mk","b2","subexp_final_bits","num_y_points","num_cb_points","num_cr_points","numPosLuma","numPosChroma","nal_unit_type","sei_payload_type","parse_nalu","parse_sei","parse_sps","profile","parse_pps","parse_slice","find_nalu","key","sps","profile_idc","nalu","scaling_list","parse_hrd","hrd","pps","nlists","sh","list","modification_of_pic_nums_idc","num_ref_idx_active_minus1","memory_management_control_operation","memory_management_base_control_operation","payload_type","payload_size","parse_vps","slice_segment_header","profile_tier_level","profilePresentFlag","maxNumSubLayersMinus1","hrd_parameters","commonInfPresentFlag","suffix","rep_format","vps","dpb_size","currLsIdx","vps_vui_bsp_hrd_params","t","vps_vui","layerIdx","vps_extension","NumScalabilityTypes","lId","smIdx","newViewFlag","NumViews","NumDirectRefLayers","iNuhLId","d","p","jNuhLid","predLId","nuhLayerIdA","layerNum","lsIdx","treeIdx","layerCnt","maxSlMinus1","NumLayersInIdList","maxSLMinus1","OlsIdxToLsIdx","defaultOutputLayerIdc","currLayerId","rLsLayerIdx","refLayerId","vvps","bytealign","vps_3d_extension","vui","short_term_ref_pic_set","stRpsIdx","num_short_term_ref_pic_sets","rps","RefRpsIdx","deltaRps","RefNumDeltaPocs","NumDeltaPocs","scaling_list_data","sizeId","matrixId","nextCoef","coefNum","scaling_list_dc_coef_minus8","scalingList","scaling_list_delta_coef","colour_mapping_octants","inpDepth","idxY","idxCb","idxCr","inpLength","PartNumY","idxShiftY","coded_res_flag","c","res_coeff_q","res_coeff_r","delta_dlt","min_diff_minus1","MaxCUWidth","NumCTUs","floor","NumPicTotalCurr","num_long_term_sps","num_ref_idx_l0_active_minus1","num_ref_idx_l1_active_minus1","collocated_from_l0_flag","seis","Renderer","img","createImageData","rgba","y","p0","p1","frame","p4","y0","y1","y2","y3","t0","t1","t2","p2","p3","FrameType","FrameTypeFn","Decoder","player","worker","Worker","workerPath","h264Parser","h264DecoderInitialized","nalus","readNalu","nalHeader","naluType","rawdata","status","renderer","h264setup","h264Configuration","then","converter","err","h264decode","test","shift","naluInfo","cfg","Promise","resolve","reject","onmessage","ev","postMessage","params","fetchRequest","fetch","headers","response","reader","getReader","cancel","done","mozXhrRequest","proxy","events","xhr","XMLHttpRequest","open","responseType","setRequestHeader","abort","send","xhrRequest","textEncoder","TextEncoder","rawText","responseText","substr","encode","stream","readFile","file","FileReader","e","readAsArrayBuffer","supportsXhrResponseType","tmpXhr","Stream","transportFactory","getStreamFactory","Response","hasOwnProperty","Headers","mozChunked","FlvPlayer","assign","optionValidator","decoder","demuxer","splice","live","controls","Emitter","defineProperty"],"mappings":"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"}