/*!
 * FlvPlayer.js v1.0.6
 * Github: https://github.com/zhw2590582/FlvPlayer#readme
 * (c) 2017-2019 Harvey Zack
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FlvplayerControl=t()}(this,function(){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r={play:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n  <path d="M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"></path>\n</svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"></path>\n</svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <path d="M10.188 4.65L6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zM14.446 3.778a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"></path>\n    <path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"></path>\n</svg>',volumeClose:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"></path>\n    <path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zM18.778 18.778l-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"></path>\n</svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\n\t<path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path>\n\t<path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path>\n\t<path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path>\n\t<path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path>\n</svg>',loading:'<svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default">\n  <rect x="0" y="0" width="100" height="100" fill="none" class="bk"/>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(0 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(30 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(60 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(90 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(120 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(150 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(180 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(210 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(240 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(270 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(300 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(330 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/>\n  </rect>\n</svg>'},l=Object.keys(r).reduce(function(e,t){return e[t]='<i class="flvplayer-icon flvplayer-icon-'.concat(t,'">').concat(r[t],"</i>"),e},{});function e(e,t){return e(t={exports:{}},t.exports),t.exports}var o=e(function(e){var a,t,i,c,r,n;a="undefined"!=typeof window&&void 0!==window.document?window.document:{},t=e.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=t.length,l={};n<r;n++)if((e=t[n])&&e[1]in a){for(n=0;n<e.length;n++)l[t[0][n]]=e[n];return l}return!1}(),r={change:c.fullscreenchange,error:c.fullscreenerror},n={request:function(o){return new Promise(function(e,t){var n,r=c.requestFullscreen,l=function(){this.off("change",l),e()}.bind(this);this.on("change",l),o=o||a.documentElement,n=/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?o[r]():o[r](i?Element.ALLOW_KEYBOARD_INPUT:{}),Promise.resolve(n).catch(t)}.bind(this))},exit:function(){return new Promise(function(e){if(this.isFullscreen){var t=function(){this.off("change",t),e()}.bind(this);a[c.exitFullscreen](),this.on("change",t)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var n=r[e];n&&a.addEventListener(n,t,!1)},off:function(e,t){var n=r[e];n&&a.removeEventListener(n,t,!1)},raw:c},c?(Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(a[c.fullscreenElement])}},element:{enumerable:!0,get:function(){return a[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(a[c.fullscreenEnabled])}}}),t?(e.exports=n,e.exports.default=n):window.screenfull=n):t?e.exports=!1:window.screenfull=!1});var a=e(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(e){return n(e)}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(e)}t.exports=r});function v(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return(0<t?[t,n,r]:[n,r]).map(function(e){return e<10?"0".concat(e):String(e)}).join(":")}function y(l,o){var a,i,c=!1;return function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(c)return a=n,void(i=this);c=!0,l.apply(this,n),setTimeout(function(){c=!1,a&&(e.apply(i,a),i=a=null)},o)}}function m(e,t,n){return Math.max(Math.min(e,Math.max(t,n)),Math.min(t,n))}function h(t,n,e){return"object"===a(n)&&Object.keys(n).forEach(function(e){h(t,e,n[e])}),t.style[n]=e,t}function g(e,t,n){var r=!(2<arguments.length&&void 0!==n)||n,l=window.getComputedStyle(e,null).getPropertyValue(t);return r?parseFloat(l):l}function i(t,o){var e=t.options.poster,n=t.events.proxy,a=t.player;e&&(t.on("play",function(){o.$poster.style.display="none"}),t.on("seeked",function(){o.$poster.style.display="none"})),t.on("waiting",function(){o.loading=!0}),t.on("ended",function(){o.loading=!1}),t.on("timeupdate",function(){o.loading=!1}),n(o.$play,"click",function(){a.play()}),n(o.$pause,"click",function(){a.pause()});var r=y(function(e){var t=m(e/a.duration,0,1);o.$loaded.style.width="".concat(100*t,"%")},500);t.on("videoLoaded",function(e){t.options.live||r(e)});var l=y(function(e){o.$played.style.width="".concat(e/a.duration*100,"%"),o.$current.innerText=v(e)},500);t.on("timeupdate",function(e){t.options.live||l(e)}),t.on("seeked",function(e){t.options.live||l(e)}),t.on("play",function(){o.$play.style.display="none",o.$pause.style.display="block"}),t.on("ended",function(){o.controls=!0,o.$play.style.display="block",o.$pause.style.display="none"}),t.on("pause",function(){o.$play.style.display="block",o.$pause.style.display="none"}),t.on("scripMeta",function(){t.options.live||(o.$duration.innerText=v(a.duration))}),n(o.$fullscreen,"click",function(){o.fullscreen?o.fullscreen=!1:o.fullscreen=!0});var i=function(r,l,o){var a;function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];clearTimeout(a),a=setTimeout(function(){a=null,r.apply(o,t)},l)}return e.clearTimeout=function(){clearTimeout(a)},e}(function(){a.$player.classList.add("flvplayer-hide-cursor"),o.controls=!1},5e3);function c(e){var t=o.$volumePanel.getBoundingClientRect(),n=t.left,r=t.width,l=o.$volumeHandle.getBoundingClientRect().width;return 10*(m(e.x-n-l/2,0,r-l/2)/(r-l))}function s(e){if(0===e)h(o.$volumeOn,"display","none"),h(o.$volumeOff,"display","flex"),h(o.$volumeHandle,"left","0");else{var t=((g(o.$volumePanel,"width")||60)-g(o.$volumeHandle,"width"))*e/10;h(o.$volumeOn,"display","flex"),h(o.$volumeOff,"display","none"),h(o.$volumeHandle,"left","".concat(t,"px"))}}if(n(a.$player,"mousemove",function(){i.clearTimeout(),a.$player.classList.remove("flvplayer-hide-cursor"),o.controls=!0,a.playing&&i()}),t.options.hasAudio){var f=0,u=!1;s(t.options.volume),t.on("volumechange",function(){s(a.volume)}),n(o.$volumeOn,"click",function(){o.$volumeOn.style.display="none",o.$volumeOff.style.display="block",f=a.volume,a.volume=0}),n(o.$volumeOff,"click",function(){o.$volumeOn.style.display="block",o.$volumeOff.style.display="none",a.volume=f||7}),n(o.$volumePanel,"click",function(e){a.volume=c(e)}),n(o.$volumeHandle,"mousedown",function(){u=!0}),n(o.$volumeHandle,"mousemove",function(e){u&&(a.volume=c(e))}),n(document,"mouseup",function(){u=u&&!1})}function p(e){var t=o.$progress,n=t.getBoundingClientRect().left,r=m(e.x-n,0,t.clientWidth),l=r/t.clientWidth*a.duration;return{second:l,time:v(l),width:r,percentage:m(r/t.clientWidth,0,1)}}if(!t.options.live&&!t.isMobile){n(o.$progress,"click",function(e){if(e.target!==o.$indicator){var t=p(e),n=t.second,r=t.percentage;n<=a.loaded&&(o.$played.style.width="".concat(100*r,"%"),a.currentTime=n)}});var d=!1;n(o.$indicator,"mousedown",function(){d=!0}),n(document,"mousemove",function(e){if(d){var t=p(e),n=t.second,r=t.percentage;n<=a.loaded&&(o.$played.style.width="".concat(100*r,"%"),a.currentTime=n)}}),n(document,"mouseup",function(){d=d&&!1})}}return function e(t){n(this,e),function(e,t){var n=e.options;e.player.$player.classList.add("flvplayer-controls-show"),n.live&&e.player.$player.classList.add("flvplayer-live"),e.player.$player.insertAdjacentHTML("beforeend","\n        ".concat(n.poster?'<div class="flvplayer-poster" style="background-image: url('.concat(n.poster,')"></div>'):"",'\n            <div class="flvplayer-loading">').concat(l.loading,'</div>\n            <div class="flvplayer-controls flv-player-controls-show ').concat(n.live?"flv-player-live":"",'">\n                ').concat(n.live?"":'\n                    <div class="flvplayer-controls-progress">\n                        <div class="flvplayer-loaded"></div>\n                        <div class="flvplayer-played">\n                            <div class="flvplayer-indicator"></div>\n                        </div>\n                    </div>\n                ','\n                <div class="flvplayer-controls-bottom">\n                    <div class="flvplayer-controls-left">\n                        <div class="flvplayer-controls-item flvplayer-state">\n                            <div class="flvplayer-play">').concat(l.play,'</div>\n                            <div class="flvplayer-pause">').concat(l.pause,"</div>\n                        </div>\n                        ").concat(n.hasAudio?'\n                            <div class="flvplayer-controls-item flvplayer-volume">\n                                <div class="flvplayer-volume-on">'.concat(l.volume,'</div>\n                                <div class="flvplayer-volume-off">').concat(l.volumeClose,'</div>\n                                <div class="flvplayer-volume-panel">\n                                    <div class="flvplayer-volume-panel-handle"></div>\n                                </div>\n                            </div>\n                        '):"","\n                        ").concat(n.live?"":'\n                            <div class="flvplayer-controls-item flvplayer-time">\n                                <span class="flvplayer-current">00:00</span> / <span class="flvplayer-duration">00:00</span>\n                            </div>\n                        ','\n                    </div>\n                    <div class="flvplayer-controls-right">\n                        <div class="flvplayer-controls-item flvplayer-fullscreen">').concat(l.fullscreen,"</div>\n                    </div>\n                </div>\n            </div>\n        ")),Object.defineProperty(t,"$poster",{value:n.container.querySelector(".flvplayer-poster")}),Object.defineProperty(t,"$loading",{value:n.container.querySelector(".flvplayer-loading")}),Object.defineProperty(t,"$controls",{value:n.container.querySelector(".flvplayer-controls")}),Object.defineProperty(t,"$state",{value:n.container.querySelector(".flvplayer-state")}),Object.defineProperty(t,"$play",{value:n.container.querySelector(".flvplayer-play")}),Object.defineProperty(t,"$pause",{value:n.container.querySelector(".flvplayer-pause")}),Object.defineProperty(t,"$current",{value:n.container.querySelector(".flvplayer-current")}),Object.defineProperty(t,"$duration",{value:n.container.querySelector(".flvplayer-duration")}),Object.defineProperty(t,"$volumeOn",{value:n.container.querySelector(".flvplayer-volume-on")}),Object.defineProperty(t,"$volumeOff",{value:n.container.querySelector(".flvplayer-volume-off")}),Object.defineProperty(t,"$volumePanel",{value:n.container.querySelector(".flvplayer-volume-panel")}),Object.defineProperty(t,"$volumeHandle",{value:n.container.querySelector(".flvplayer-volume-panel-handle")}),Object.defineProperty(t,"$fullscreen",{value:n.container.querySelector(".flvplayer-fullscreen")}),Object.defineProperty(t,"$progress",{value:n.container.querySelector(".flvplayer-controls-progress")}),Object.defineProperty(t,"$loaded",{value:n.container.querySelector(".flvplayer-loaded")}),Object.defineProperty(t,"$played",{value:n.container.querySelector(".flvplayer-played")}),Object.defineProperty(t,"$indicator",{value:n.container.querySelector(".flvplayer-indicator")})}(t,this),i(t,this),function(t,e){var n=t.player;Object.defineProperty(e,"controls",{get:function(){return n.$player.classList.contains("flvplayer-controls-show")},set:function(e){e?n.$player.classList.add("flvplayer-controls-show"):n.$player.classList.remove("flvplayer-controls-show")}}),Object.defineProperty(e,"loading",{get:function(){return n.$player.classList.contains("flvplayer-loading-show")},set:function(e){e?n.$player.classList.add("flvplayer-loading-show"):n.$player.classList.remove("flvplayer-loading-show")}});try{var r=function(){e.fullscreen?n.$container.classList.add("flvplayer-fullscreen"):n.$container.classList.remove("flvplayer-fullscreen"),n.autoSize()};o.on("change",r),t.events.destroys.push(function(){o.off("change",r)})}catch(e){t.debug.warn(!1,"Does not seem to support full screen events")}Object.defineProperty(e,"fullscreen",{get:function(){return o.isFullscreen||n.$container.classList.contains("flvplayer-fullscreen-web")},set:function(e){if(e)try{o.request(n.$container)}catch(e){n.$container.classList.add("flvplayer-fullscreen-web")}else try{o.exit()}catch(e){n.$container.classList.remove("flvplayer-fullscreen-web")}}})}(t,this),t.isMobile||function(e,t){var n=e.events.proxy,l=e.player,o={};function r(e,t){o[e]?o[e].push(t):o[e]=[t]}r(27,function(){t.fullscreen&&(l.fullscreen=!1)}),r(32,function(){l.toggle()}),r(37,function(){l.currentTime-=10}),r(38,function(){l.volume+=1}),r(39,function(){l.currentTime+=10}),r(40,function(){l.volume-=1}),n(window,"keydown",function(e){if(l.isFocus){var t=document.activeElement.tagName.toUpperCase(),n=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==n&&"true"!==n){var r=o[e.keyCode];r&&(e.preventDefault(),r.forEach(function(e){return e()}))}}})}(t,this)}});
